(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/QXO":function(t,e,n){"use strict";n("KBVK"),n("BQvE");var r=n("lTHQ");n.o(r,"BrowserCodeReader")&&n.d(e,"BrowserCodeReader",function(){return r.BrowserCodeReader}),n.o(r,"BrowserMultiFormatReader")&&n.d(e,"BrowserMultiFormatReader",function(){return r.BrowserMultiFormatReader});var s=n("YElM");n.o(s,"BrowserCodeReader")&&n.d(e,"BrowserCodeReader",function(){return s.BrowserCodeReader}),n.o(s,"BrowserMultiFormatReader")&&n.d(e,"BrowserMultiFormatReader",function(){return s.BrowserMultiFormatReader}),n("jAob"),n("8qDK");var i=n("1M1C");n.d(e,"BrowserCodeReader",function(){return i.a}),n("Q5es");var o=n("/jzt");n.d(e,"BrowserMultiFormatReader",function(){return o.a}),n("jTPI"),n("szyW"),n("yJ/b"),n("y7uS"),n("uAql")},"/jzt":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r,s=n("KBVK"),i=n("1M1C"),o=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(e,n){var r=this,i=new s.MultiFormatReader;return i.setHints(e),(r=t.call(this,i,e,n)||this).reader=i,r}return o(e,t),Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(s.DecodeHintType.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e}(i.a)},0:function(t,e,n){t.exports=n("zUnb")},"1M1C":function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("KBVK"),s=n("BQvE");function i(){return"undefined"!=typeof navigator}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)},a=function(t,e,n,r){return new(n||(n=Promise))(function(s,i){function o(t){try{l(r.next(t))}catch(e){i(e)}}function a(t){try{l(r.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,a)}l((r=r.apply(t,e||[])).next())})},l=function(t,e){var n,r,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=e.call(t,o)}catch(a){i=[6,a],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},c=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},h=function(){function t(t,e,n){void 0===e&&(e=new Map),void 0===n&&(n={}),this.reader=t,this.hints=e,this.options=o(o({},u),n)}return Object.defineProperty(t.prototype,"possibleFormats",{set:function(t){this.hints.set(r.DecodeHintType.POSSIBLE_FORMATS,t)},enumerable:!1,configurable:!0}),t.addVideoSource=function(t,e){try{t.srcObject=e}catch(n){t.src=URL.createObjectURL(e)}},t.mediaStreamSetTorch=function(t,e){return a(this,void 0,void 0,function(){return l(this,function(n){switch(n.label){case 0:return[4,t.applyConstraints({advanced:[{fillLightMode:e?"flash":"off",torch:!!e}]})];case 1:return n.sent(),[2]}})})},t.mediaStreamIsTorchCompatible=function(e){var n,r,s=e.getVideoTracks();try{for(var i=c(s),o=i.next();!o.done;o=i.next())if(t.mediaStreamIsTorchCompatibleTrack(o.value))return!0}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1},t.mediaStreamIsTorchCompatibleTrack=function(t){try{return"torch"in t.getCapabilities()}catch(e){return console.error(e),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},t.isVideoPlaying=function(t){return t.currentTime>0&&!t.paused&&t.readyState>2},t.getMediaElement=function(t,e){var n=document.getElementById(t);if(!n)throw new r.ArgumentException("element with id '"+t+"' not found");if(n.nodeName.toLowerCase()!==e.toLowerCase())throw new r.ArgumentException("element with id '"+t+"' must be an "+e+" element");return n},t.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if("string"==typeof e)return t.getMediaElement(e,"video");if(!e&&"undefined"!=typeof document){var n=document.createElement("video");return n.width=200,n.height=200,n}throw new Error("Couldn't get videoElement from videoSource!")},t.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if("string"==typeof e)return t.getMediaElement(e,"img");if(void 0===e){var n=document.createElement("img");return n.width=200,n.height=200,n}throw new Error("Couldn't get imageElement from imageSource!")},t.prepareVideoElement=function(e){var n=t.createVideoElement(e);return n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},t.isImageLoaded=function(t){return!!t.complete&&0!==t.naturalWidth},t.createBinaryBitmapFromCanvas=function(t){var e=new s.a(t),n=new r.HybridBinarizer(e);return new r.BinaryBitmap(n)},t.drawImageOnCanvas=function(t,e){t.drawImage(e,0,0)},t.getMediaElementDimensions=function(t){if(t instanceof HTMLVideoElement)return{height:t.videoHeight,width:t.videoWidth};if(t instanceof HTMLImageElement)return{height:t.naturalHeight||t.height,width:t.naturalWidth||t.width};throw new Error("Couldn't find the Source's dimentions!")},t.createCaptureCanvas=function(e){if(!e)throw new r.ArgumentException("Cannot create a capture canvas without a media element.");if("undefined"==typeof document)throw new Error('The page "Document" is undefined, make sure you\'re running in a browser.');var n=document.createElement("canvas"),s=t.getMediaElementDimensions(e),i=s.width,o=s.height;return n.style.width=i+"px",n.style.height=o+"px",n.width=i,n.height=o,n},t.tryPlayVideo=function(e){return a(this,void 0,void 0,function(){var n;return l(this,function(r){switch(r.label){case 0:if(null==e?void 0:e.ended)return console.error("Trying to play video that has ended."),[2,!1];if(t.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[2,!0];case 3:return n=r.sent(),console.warn("It was not possible to play the video.",n),[2,!1];case 4:return[2]}})})},t.createCanvasFromMediaElement=function(e){var n=t.createCaptureCanvas(e),r=n.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return t.drawImageOnCanvas(r,e),n},t.createBinaryBitmapFromMediaElem=function(e){var n=t.createCanvasFromMediaElement(e);return t.createBinaryBitmapFromCanvas(n)},t.destroyImageElement=function(t){t.src="",t.removeAttribute("src"),t=void 0},t.listVideoInputDevices=function(){return a(this,void 0,void 0,function(){var t,e,n,r,s,o,a,u;return l(this,function(l){switch(l.label){case 0:if(!i())throw new Error("Can't enumerate devices, navigator is not present.");if(!(i()&&navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices))throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:t=l.sent(),e=[];try{for(n=c(t),r=n.next();!r.done;r=n.next())"videoinput"===(o="video"===(s=r.value).kind?"videoinput":s.kind)&&e.push({deviceId:s.deviceId||s.id,label:s.label||"Video device "+(e.length+1),kind:o,groupId:s.groupId})}catch(h){a={error:h}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(a)throw a.error}}return[2,e]}})})},t.findDeviceById=function(e){return a(this,void 0,void 0,function(){var n;return l(this,function(r){switch(r.label){case 0:return[4,t.listVideoInputDevices()];case 1:return(n=r.sent())?[2,n.find(function(t){return t.deviceId===e})]:[2]}})})},t.cleanVideoSource=function(t){if(t){try{t.srcObject=null}catch(e){t.src=""}t&&t.removeAttribute("src")}},t.playVideoOnLoadAsync=function(e,n){return a(this,void 0,void 0,function(){return l(this,function(r){switch(r.label){case 0:return[4,t.tryPlayVideo(e)];case 1:return r.sent()?[2,!0]:[2,new Promise(function(r,s){var i=setTimeout(function(){t.isVideoPlaying(e)||(s(!1),e.removeEventListener("canplay",o))},n),o=function(){t.tryPlayVideo(e).then(function(t){clearTimeout(i),e.removeEventListener("canplay",o),r(t)})};e.addEventListener("canplay",o)})]}})})},t.attachStreamToVideo=function(e,n,r){return void 0===r&&(r=5e3),a(this,void 0,void 0,function(){var s;return l(this,function(i){switch(i.label){case 0:return s=t.prepareVideoElement(n),t.addVideoSource(s,e),[4,t.playVideoOnLoadAsync(s,r)];case 1:return i.sent(),[2,s]}})})},t._waitImageLoad=function(e){return new Promise(function(n,r){var s=setTimeout(function(){t.isImageLoaded(e)||(e.removeEventListener("load",i),r())},1e4),i=function(){clearTimeout(s),e.removeEventListener("load",i),n()};e.addEventListener("load",i)})},t.checkCallbackFnOrThrow=function(t){if(!t)throw new r.ArgumentException("`callbackFn` is a required parameter, you cannot capture results without it.")},t.disposeMediaStream=function(t){t.getVideoTracks().forEach(function(t){return t.stop()}),t=void 0},t.prototype.decode=function(e){var n=t.createCanvasFromMediaElement(e);return this.decodeFromCanvas(n)},t.prototype.decodeBitmap=function(t){return this.reader.decode(t,this.hints)},t.prototype.decodeFromCanvas=function(e){var n=t.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(n)},t.prototype.decodeFromImageElement=function(e){return a(this,void 0,void 0,function(){var n;return l(this,function(s){switch(s.label){case 0:if(!e)throw new r.ArgumentException("An image element must be provided.");return n=t.prepareImageElement(e),[4,this._decodeOnLoadImage(n)];case 1:return[2,s.sent()]}})})},t.prototype.decodeFromImageUrl=function(e){return a(this,void 0,void 0,function(){var n;return l(this,function(s){switch(s.label){case 0:if(!e)throw new r.ArgumentException("An URL must be provided.");(n=t.prepareImageElement()).src=e,s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this.decodeFromImageElement(n)];case 2:return[2,s.sent()];case 3:return t.destroyImageElement(n),[7];case 4:return[2]}})})},t.prototype.decodeFromConstraints=function(e,n,r){return a(this,void 0,void 0,function(){var s,i;return l(this,function(o){switch(o.label){case 0:return t.checkCallbackFnOrThrow(r),[4,navigator.mediaDevices.getUserMedia(e)];case 1:s=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.decodeFromStream(s,n,r)];case 3:return[2,o.sent()];case 4:throw i=o.sent(),t.disposeMediaStream(s),i;case 5:return[2]}})})},t.prototype.decodeFromStream=function(e,n,r){return a(this,void 0,void 0,function(){var s,i,u,h,d,f,g=this;return l(this,function(p){switch(p.label){case 0:return t.checkCallbackFnOrThrow(r),[4,t.attachStreamToVideo(e,n,this.options.tryPlayVideoTimeout)];case 1:return s=p.sent(),i=this.scan(s,r,function(){t.disposeMediaStream(e),t.cleanVideoSource(s)}),u=e.getVideoTracks(),h=o(o({},i),{stop:function(){i.stop()},streamVideoConstraintsApply:function(t,e){return a(this,void 0,void 0,function(){var n,r,s,i,o,a;return l(this,function(l){switch(l.label){case 0:n=e?u.filter(e):u,l.label=1;case 1:l.trys.push([1,6,7,8]),r=c(n),s=r.next(),l.label=2;case 2:return s.done?[3,5]:[4,s.value.applyConstraints(t)];case 3:l.sent(),l.label=4;case 4:return s=r.next(),[3,2];case 5:return[3,8];case 6:return i=l.sent(),o={error:i},[3,8];case 7:try{s&&!s.done&&(a=r.return)&&a.call(r)}finally{if(o)throw o.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(t){return u.find(t).getConstraints()},streamVideoSettingsGet:function(t){return u.find(t).getSettings()},streamVideoCapabilitiesGet:function(t){return u.find(t).getCapabilities()}}),t.mediaStreamIsTorchCompatible(e)&&(d=null==u?void 0:u.find(function(e){return t.mediaStreamIsTorchCompatibleTrack(e)}),h.switchTorch=f=function(e){return a(g,void 0,void 0,function(){return l(this,function(n){switch(n.label){case 0:return[4,t.mediaStreamSetTorch(d,e)];case 1:return n.sent(),[2]}})})},h.stop=function(){i.stop(),f(!1)}),[2,h]}})})},t.prototype.decodeFromVideoDevice=function(e,n,r){return a(this,void 0,void 0,function(){return l(this,function(s){switch(s.label){case 0:return t.checkCallbackFnOrThrow(r),[4,this.decodeFromConstraints({video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},n,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeFromVideoElement=function(e,n){return a(this,void 0,void 0,function(){var s;return l(this,function(i){switch(i.label){case 0:if(t.checkCallbackFnOrThrow(n),!e)throw new r.ArgumentException("A video element must be provided.");return s=t.prepareVideoElement(e),[4,t.playVideoOnLoadAsync(s,this.options.tryPlayVideoTimeout)];case 1:return i.sent(),[2,this.scan(s,n)]}})})},t.prototype.decodeFromVideoUrl=function(e,n){return a(this,void 0,void 0,function(){var s,i;return l(this,function(o){switch(o.label){case 0:if(t.checkCallbackFnOrThrow(n),!e)throw new r.ArgumentException("An URL must be provided.");return(s=t.prepareVideoElement()).src=e,i=function(){t.cleanVideoSource(s)},[4,t.playVideoOnLoadAsync(s,this.options.tryPlayVideoTimeout)];case 1:return o.sent(),[2,this.scan(s,n,i)]}})})},t.prototype.decodeOnceFromConstraints=function(t,e){return a(this,void 0,void 0,function(){var n;return l(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return n=r.sent(),[4,this.decodeOnceFromStream(n,e)];case 2:return[2,r.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,n){return a(this,void 0,void 0,function(){var r,s;return l(this,function(i){switch(i.label){case 0:return r=Boolean(n),[4,t.attachStreamToVideo(e,n)];case 1:s=i.sent(),i.label=2;case 2:return i.trys.push([2,,4,5]),[4,this.scanOneResult(s)];case 3:return[2,i.sent()];case 4:return r||t.cleanVideoSource(s),[7];case 5:return[2]}})})},t.prototype.decodeOnceFromVideoDevice=function(t,e){return a(this,void 0,void 0,function(){return l(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromConstraints({video:t?{deviceId:{exact:t}}:{facingMode:"environment"}},e)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoElement=function(e){return a(this,void 0,void 0,function(){var n;return l(this,function(s){switch(s.label){case 0:if(!e)throw new r.ArgumentException("A video element must be provided.");return n=t.prepareVideoElement(e),[4,t.playVideoOnLoadAsync(n,this.options.tryPlayVideoTimeout)];case 1:return s.sent(),[4,this.scanOneResult(n)];case 2:return[2,s.sent()]}})})},t.prototype.decodeOnceFromVideoUrl=function(e){return a(this,void 0,void 0,function(){var n,s;return l(this,function(i){switch(i.label){case 0:if(!e)throw new r.ArgumentException("An URL must be provided.");(n=t.prepareVideoElement()).src=e,s=this.decodeOnceFromVideoElement(n),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,s];case 2:return[2,i.sent()];case 3:return t.cleanVideoSource(n),[7];case 4:return[2]}})})},t.prototype.scanOneResult=function(t,e,n,s){var i=this;return void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===s&&(s=!0),new Promise(function(o,a){i.scan(t,function(t,i,l){if(t)return o(t),void l.stop();if(i){if(i instanceof r.NotFoundException&&e)return;if(i instanceof r.ChecksumException&&n)return;if(i instanceof r.FormatException&&s)return;l.stop(),a(i)}})})},t.prototype.scan=function(e,n,s){var i=this;t.checkCallbackFnOrThrow(n);var o=t.createCaptureCanvas(e),a=o.getContext("2d");if(!a)throw new Error("Couldn't create canvas for visual element scan.");var l,c=function(){a=void 0,o=void 0},u=!1,h={stop:function(){u=!0,clearTimeout(l),c(),s&&s()}},d=function(){if(!u)try{t.drawImageOnCanvas(a,e);var f=i.decodeFromCanvas(o);n(f,void 0,h),l=setTimeout(d,i.options.delayBetweenScanSuccess)}catch(g){if(n(void 0,g,h),g instanceof r.ChecksumException||g instanceof r.FormatException||g instanceof r.NotFoundException)return void(l=setTimeout(d,i.options.delayBetweenScanAttempts));c(),s&&s(g)}};return d(),h},t.prototype._decodeOnLoadImage=function(e){return a(this,void 0,void 0,function(){return l(this,function(n){switch(n.label){case 0:return t.isImageLoaded(e)?[3,2]:[4,t._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},t}()},"8qDK":function(t,e,n){"use strict";n("KBVK"),n("1M1C")},BQvE:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r,s=n("KBVK"),i=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=function(t){function e(n){var r=t.call(this,n.width,n.height)||this;return r.canvas=n,r.buffer=e.makeBufferFromCanvasImageData(n),r}return i(e,t),e.makeBufferFromCanvasImageData=function(t){var n=t.getContext("2d");if(!n)throw new Error("Couldn't get canvas context.");var r=n.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(r.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,e,n){for(var r=new Uint8ClampedArray(e*n),s=0,i=0,o=t.length;s<o;s+=4,i++)r[i]=0===t[s+3]?255:306*t[s]+601*t[s+1]+117*t[s+2]+512>>10;return r},e.prototype.getRow=function(t,e){if(t<0||t>=this.getHeight())throw new s.IllegalArgumentException("Requested row is outside the image: "+t);var n=this.getWidth(),r=t*n;return null===e?e=this.buffer.slice(r,r+n):(e.length<n&&(e=new Uint8ClampedArray(n)),e.set(this.buffer.slice(r,r+n))),e},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(e,n,r,s){return t.prototype.crop.call(this,e,n,r,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new s.InvertedLuminanceSource(this)},e.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var r=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,i=this.canvas.height,o=Math.ceil(Math.abs(Math.cos(r))*s+Math.abs(Math.sin(r))*i),a=Math.ceil(Math.abs(Math.sin(r))*s+Math.abs(Math.cos(r))*i);n.width=o,n.height=a;var l=n.getContext("2d");if(!l)throw new Error("Could not create a Convas Context element.");return l.translate(o/2,a/2),l.rotate(r),l.drawImage(this.canvas,s/-2,i/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(s.LuminanceSource)},KBVK:function(t,e,n){!function(t){"use strict";var e,n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r=function(t){function e(e){var n,r,s,i=this.constructor,o=t.call(this,e)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1}),n=o,r=i.prototype,(s=Object.setPrototypeOf)?s(n,r):n.__proto__=r,function(t,e){void 0===e&&(e=t.constructor);var n=Error.captureStackTrace;n&&n(t,e)}(o),o}return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e}(Error);class s extends r{constructor(t){super(t),this.message=t}getKind(){return this.constructor.kind}}s.kind="Exception";class i extends s{}i.kind="ArgumentException";class o extends s{}o.kind="IllegalArgumentException";class a{constructor(t){if(this.binarizer=t,null===t)throw new o("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,e){return this.binarizer.getBlackRow(t,e)}getBlackMatrix(){return null==this.matrix&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,e,n,r){const s=this.binarizer.getLuminanceSource().crop(t,e,n,r);return new a(this.binarizer.createBinarizer(s))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new a(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new a(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch(t){return""}}}class l extends s{static getChecksumInstance(){return new l}}l.kind="ChecksumException";class c{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class u{static arraycopy(t,e,n,r,s){for(;s--;)n[r++]=t[e++]}static currentTimeMillis(){return Date.now()}}class h extends s{}h.kind="IndexOutOfBoundsException";class d extends h{constructor(t,e){super(e),this.index=t,this.message=e}}d.kind="ArrayIndexOutOfBoundsException";class f{static fill(t,e){for(let n=0,r=t.length;n<r;n++)t[n]=e}static fillWithin(t,e,n,r){f.rangeCheck(t.length,e,n);for(let s=e;s<n;s++)t[s]=r}static rangeCheck(t,e,n){if(e>n)throw new o("fromIndex("+e+") > toIndex("+n+")");if(e<0)throw new d(e);if(n>t)throw new d(n)}static asList(...t){return t}static create(t,e,n){return Array.from({length:t}).map(t=>Array.from({length:e}).fill(n))}static createInt32Array(t,e,n){return Array.from({length:t}).map(t=>Int32Array.from({length:e}).fill(n))}static equals(t,e){if(!t)return!1;if(!e)return!1;if(!t.length)return!1;if(!e.length)return!1;if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}static hashCode(t){if(null===t)return 0;let e=1;for(const n of t)e=31*e+n;return e}static fillUint8Array(t,e){for(let n=0;n!==t.length;n++)t[n]=e}static copyOf(t,e){return t.slice(0,e)}static copyOfUint8Array(t,e){if(t.length<=e){const n=new Uint8Array(e);return n.set(t),n}return t.slice(0,e)}static copyOfRange(t,e,n){const r=n-e,s=new Int32Array(r);return u.arraycopy(t,e,s,0,r),s}static binarySearch(t,e,n){void 0===n&&(n=f.numberComparator);let r=0,s=t.length-1;for(;r<=s;){const i=s+r>>1,o=n(e,t[i]);if(o>0)r=i+1;else{if(!(o<0))return i;s=i-1}}return-r-1}static numberComparator(t,e){return t-e}}class g{static numberOfTrailingZeros(t){let e;if(0===t)return 32;let n=31;return e=t<<16,0!==e&&(n-=16,t=e),e=t<<8,0!==e&&(n-=8,t=e),e=t<<4,0!==e&&(n-=4,t=e),e=t<<2,0!==e&&(n-=2,t=e),n-(t<<1>>>31)}static numberOfLeadingZeros(t){if(0===t)return 32;let e=1;return t>>>16==0&&(e+=16,t<<=16),t>>>24==0&&(e+=8,t<<=8),t>>>28==0&&(e+=4,t<<=4),t>>>30==0&&(e+=2,t<<=2),e-=t>>>31,e}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=(t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135,63&(t+=t>>>8)+(t>>>16)}static truncDivision(t,e){return Math.trunc(t/e)}static parseInt(t,e){return parseInt(t,e)}}g.MIN_VALUE_32_BITS=-2147483648,g.MAX_VALUE=Number.MAX_SAFE_INTEGER;class p{constructor(t,e){void 0===t?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,this.bits=null==e?p.makeArray(t):e)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>32*this.bits.length){const e=p.makeArray(t);u.arraycopy(this.bits,0,e,0,this.bits.length),this.bits=e}}get(t){return 0!=(this.bits[Math.floor(t/32)]&1<<(31&t))}set(t){this.bits[Math.floor(t/32)]|=1<<(31&t)}flip(t){this.bits[Math.floor(t/32)]^=1<<(31&t)}getNextSet(t){const e=this.size;if(t>=e)return e;const n=this.bits;let r=Math.floor(t/32),s=n[r];s&=~((1<<(31&t))-1);const i=n.length;for(;0===s;){if(++r===i)return e;s=n[r]}const o=32*r+g.numberOfTrailingZeros(s);return o>e?e:o}getNextUnset(t){const e=this.size;if(t>=e)return e;const n=this.bits;let r=Math.floor(t/32),s=~n[r];s&=~((1<<(31&t))-1);const i=n.length;for(;0===s;){if(++r===i)return e;s=~n[r]}const o=32*r+g.numberOfTrailingZeros(s);return o>e?e:o}setBulk(t,e){this.bits[Math.floor(t/32)]=e}setRange(t,e){if(e<t||t<0||e>this.size)throw new o;if(e===t)return;e--;const n=Math.floor(t/32),r=Math.floor(e/32),s=this.bits;for(let i=n;i<=r;i++)s[i]|=(2<<(i<r?31:31&e))-(1<<(i>n?0:31&t))}clear(){const t=this.bits.length,e=this.bits;for(let n=0;n<t;n++)e[n]=0}isRange(t,e,n){if(e<t||t<0||e>this.size)throw new o;if(e===t)return!0;e--;const r=Math.floor(t/32),s=Math.floor(e/32),i=this.bits;for(let o=r;o<=s;o++){const a=(2<<(o<s?31:31&e))-(1<<(o>r?0:31&t))&4294967295;if((i[o]&a)!==(n?a:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(t,e){if(e<0||e>32)throw new o("Num bits must be between 0 and 32");this.ensureCapacity(this.size+e);for(let n=e;n>0;n--)this.appendBit(1==(t>>n-1&1))}appendBitArray(t){const e=t.size;this.ensureCapacity(this.size+e);for(let n=0;n<e;n++)this.appendBit(t.get(n))}xor(t){if(this.size!==t.size)throw new o("Sizes don't match");const e=this.bits;for(let n=0,r=e.length;n<r;n++)e[n]^=t.bits[n]}toBytes(t,e,n,r){for(let s=0;s<r;s++){let r=0;for(let e=0;e<8;e++)this.get(t)&&(r|=1<<7-e),t++;e[n+s]=r}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),e=Math.floor((this.size-1)/32),n=e+1,r=this.bits;for(let s=0;s<n;s++){let n=r[s];n=n>>1&1431655765|(1431655765&n)<<1,n=n>>2&858993459|(858993459&n)<<2,n=n>>4&252645135|(252645135&n)<<4,n=n>>8&16711935|(16711935&n)<<8,n=n>>16&65535|(65535&n)<<16,t[e-s]=n}if(this.size!==32*n){const e=32*n-this.size;let r=t[0]>>>e;for(let s=1;s<n;s++){const n=t[s];r|=n<<32-e,t[s-1]=r,r=n>>>e}t[n-1]=r}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){return t instanceof p&&this.size===t.size&&f.equals(this.bits,t.bits)}hashCode(){return 31*this.size+f.hashCode(this.bits)}toString(){let t="";for(let e=0,n=this.size;e<n;e++)0==(7&e)&&(t+=" "),t+=this.get(e)?"X":".";return t}clone(){return new p(this.size,this.bits.slice())}}!function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ASSUME_GS1=7]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(e||(e={}));var m,w=e;class _ extends s{static getFormatInstance(){return new _}}_.kind="FormatException",function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"}(m||(m={}));class y{constructor(t,e,n,...r){this.valueIdentifier=t,this.name=n,this.values="number"==typeof e?Int32Array.from([e]):e,this.otherEncodingNames=r,y.VALUE_IDENTIFIER_TO_ECI.set(t,this),y.NAME_TO_ECI.set(n,this);const s=this.values;for(let i=0,o=s.length;i!==o;i++)y.VALUES_TO_ECI.set(s[i],this);for(const i of r)y.NAME_TO_ECI.set(i,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new _("incorect value");const e=y.VALUES_TO_ECI.get(t);if(void 0===e)throw new _("incorect value");return e}static getCharacterSetECIByName(t){const e=y.NAME_TO_ECI.get(t);if(void 0===e)throw new _("incorect value");return e}equals(t){if(!(t instanceof y))return!1;const e=t;return this.getName()===e.getName()}}y.VALUE_IDENTIFIER_TO_ECI=new Map,y.VALUES_TO_ECI=new Map,y.NAME_TO_ECI=new Map,y.Cp437=new y(m.Cp437,Int32Array.from([0,2]),"Cp437"),y.ISO8859_1=new y(m.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),y.ISO8859_2=new y(m.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),y.ISO8859_3=new y(m.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),y.ISO8859_4=new y(m.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),y.ISO8859_5=new y(m.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),y.ISO8859_6=new y(m.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),y.ISO8859_7=new y(m.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),y.ISO8859_8=new y(m.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),y.ISO8859_9=new y(m.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),y.ISO8859_10=new y(m.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),y.ISO8859_11=new y(m.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),y.ISO8859_13=new y(m.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),y.ISO8859_14=new y(m.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),y.ISO8859_15=new y(m.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),y.ISO8859_16=new y(m.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),y.SJIS=new y(m.SJIS,20,"SJIS","Shift_JIS"),y.Cp1250=new y(m.Cp1250,21,"Cp1250","windows-1250"),y.Cp1251=new y(m.Cp1251,22,"Cp1251","windows-1251"),y.Cp1252=new y(m.Cp1252,23,"Cp1252","windows-1252"),y.Cp1256=new y(m.Cp1256,24,"Cp1256","windows-1256"),y.UnicodeBigUnmarked=new y(m.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),y.UTF8=new y(m.UTF8,26,"UTF8","UTF-8"),y.ASCII=new y(m.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),y.Big5=new y(m.Big5,28,"Big5"),y.GB18030=new y(m.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),y.EUC_KR=new y(m.EUC_KR,30,"EUC_KR","EUC-KR");class E extends s{}E.kind="UnsupportedOperationException";class C{static decode(t,e){const n=this.encodingName(e);return this.customDecoder?this.customDecoder(t,n):"undefined"==typeof TextDecoder||this.shouldDecodeOnFallback(n)?this.decodeFallback(t,n):new TextDecoder(n).decode(t)}static shouldDecodeOnFallback(t){return!C.isBrowser()&&"ISO-8859-1"===t}static encode(t,e){const n=this.encodingName(e);return this.customEncoder?this.customEncoder(t,n):"undefined"==typeof TextEncoder?this.encodeFallback(t):(new TextEncoder).encode(t)}static isBrowser(){return"undefined"!=typeof window&&"[object Window]"==={}.toString.call(window)}static encodingName(t){return"string"==typeof t?t:t.getName()}static encodingCharacterSet(t){return t instanceof y?t:y.getCharacterSetECIByName(t)}static decodeFallback(t,e){const n=this.encodingCharacterSet(e);if(C.isDecodeFallbackSupported(n)){let e="";for(let n=0,r=t.length;n<r;n++){let r=t[n].toString(16);r.length<2&&(r="0"+r),e+="%"+r}return decodeURIComponent(e)}if(n.equals(y.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new E(`Encoding ${this.encodingName(e)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(y.UTF8)||t.equals(y.ISO8859_1)||t.equals(y.ASCII)}static encodeFallback(t){const e=btoa(unescape(encodeURIComponent(t))).split(""),n=[];for(let r=0;r<e.length;r++)n.push(e[r].charCodeAt(0));return new Uint8Array(n)}}class A{static castAsNonUtf8Char(t,e=null){const n=e?e.getName():this.ISO88591;return C.decode(new Uint8Array([t]),n)}static guessEncoding(t,e){if(null!=e&&void 0!==e.get(w.CHARACTER_SET))return e.get(w.CHARACTER_SET).toString();const n=t.length;let r=!0,s=!0,i=!0,o=0,a=0,l=0,c=0,u=0,h=0,d=0,f=0,g=0,p=0,m=0;const _=t.length>3&&239===t[0]&&187===t[1]&&191===t[2];for(let w=0;w<n&&(r||s||i);w++){const e=255&t[w];i&&(o>0?0==(128&e)?i=!1:o--:0!=(128&e)&&(0==(64&e)?i=!1:(o++,0==(32&e)?a++:(o++,0==(16&e)?l++:(o++,0==(8&e)?c++:i=!1))))),r&&(e>127&&e<160?r=!1:e>159&&(e<192||215===e||247===e)&&m++),s&&(u>0?e<64||127===e||e>252?s=!1:u--:128===e||160===e||e>239?s=!1:e>160&&e<224?(h++,f=0,d++,d>g&&(g=d)):e>127?(u++,d=0,f++,f>p&&(p=f)):(d=0,f=0))}return i&&o>0&&(i=!1),s&&u>0&&(s=!1),i&&(_||a+l+c>0)?A.UTF8:s&&(A.ASSUME_SHIFT_JIS||g>=3||p>=3)?A.SHIFT_JIS:r&&s?2===g&&2===h||10*m>=n?A.SHIFT_JIS:A.ISO88591:r?A.ISO88591:s?A.SHIFT_JIS:i?A.UTF8:A.PLATFORM_DEFAULT_ENCODING}static format(t,...e){let n=-1;return t.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(t,r,s,i,o,a){if("%%"===t)return"%";if(void 0===e[++n])return;t=i?parseInt(i.substr(1)):void 0;let l,c=o?parseInt(o.substr(1)):void 0;switch(a){case"s":l=e[n];break;case"c":l=e[n][0];break;case"f":l=parseFloat(e[n]).toFixed(t);break;case"p":l=parseFloat(e[n]).toPrecision(t);break;case"e":l=parseFloat(e[n]).toExponential(t);break;case"x":l=parseInt(e[n]).toString(c||16);break;case"d":l=parseFloat(parseInt(e[n],c||10).toPrecision(t)).toFixed(0)}l="object"==typeof l?JSON.stringify(l):(+l).toString(c);let u=parseInt(s),h=s&&s[0]+""=="0"?"0":" ";for(;l.length<u;)l=void 0!==r?l+h:h+l;return l})}static getBytes(t,e){return C.encode(t,e)}static getCharCode(t,e=0){return t.charCodeAt(e)}static getCharAt(t){return String.fromCharCode(t)}}A.SHIFT_JIS=y.SJIS.getName(),A.GB2312="GB2312",A.ISO88591=y.ISO8859_1.getName(),A.EUC_JP="EUC_JP",A.UTF8=y.UTF8.getName(),A.PLATFORM_DEFAULT_ENCODING=A.UTF8,A.ASSUME_SHIFT_JIS=!1;class S{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return this.value+="string"==typeof t?t.toString():this.encoding?A.castAsNonUtf8Char(t,this.encoding):String.fromCharCode(t),this}appendChars(t,e,n){for(let r=e;e<e+n;r++)this.append(t[r]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+1)}substring(t,e){return this.value.substring(t,e)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+e.length)}}class I{constructor(t,e,n,r){if(this.width=t,this.height=e,this.rowSize=n,this.bits=r,null==e&&(e=t),this.height=e,t<1||e<1)throw new o("Both dimensions must be greater than 0");null==n&&(n=Math.floor((t+31)/32)),this.rowSize=n,null==r&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const e=t.length,n=t[0].length,r=new I(n,e);for(let s=0;s<e;s++){const e=t[s];for(let t=0;t<n;t++)e[t]&&r.set(t,s)}return r}static parseFromString(t,e,n){if(null===t)throw new o("stringRepresentation cannot be null");const r=new Array(t.length);let s=0,i=0,a=-1,l=0,c=0;for(;c<t.length;)if("\n"===t.charAt(c)||"\r"===t.charAt(c)){if(s>i){if(-1===a)a=s-i;else if(s-i!==a)throw new o("row lengths do not match");i=s,l++}c++}else if(t.substring(c,c+e.length)===e)c+=e.length,r[s]=!0,s++;else{if(t.substring(c,c+n.length)!==n)throw new o("illegal character encountered: "+t.substring(c));c+=n.length,r[s]=!1,s++}if(s>i){if(-1===a)a=s-i;else if(s-i!==a)throw new o("row lengths do not match");l++}const u=new I(a,l);for(let o=0;o<s;o++)r[o]&&u.set(Math.floor(o%a),Math.floor(o/a));return u}get(t,e){const n=e*this.rowSize+Math.floor(t/32);return 0!=(this.bits[n]>>>(31&t)&1)}set(t,e){const n=e*this.rowSize+Math.floor(t/32);this.bits[n]|=1<<(31&t)&4294967295}unset(t,e){const n=e*this.rowSize+Math.floor(t/32);this.bits[n]&=~(1<<(31&t)&4294967295)}flip(t,e){const n=e*this.rowSize+Math.floor(t/32);this.bits[n]^=1<<(31&t)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new o("input matrix dimensions do not match");const e=new p(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits;for(let s=0,i=this.height;s<i;s++){const i=s*n,o=t.getRow(s,e).getBitArray();for(let t=0;t<n;t++)r[i+t]^=o[t]}}clear(){const t=this.bits,e=t.length;for(let n=0;n<e;n++)t[n]=0}setRegion(t,e,n,r){if(e<0||t<0)throw new o("Left and top must be nonnegative");if(r<1||n<1)throw new o("Height and width must be at least 1");const s=t+n,i=e+r;if(i>this.height||s>this.width)throw new o("The region must fit inside the matrix");const a=this.rowSize,l=this.bits;for(let o=e;o<i;o++){const e=o*a;for(let n=t;n<s;n++)l[e+Math.floor(n/32)]|=1<<(31&n)&4294967295}}getRow(t,e){null==e||e.getSize()<this.width?e=new p(this.width):e.clear();const n=this.rowSize,r=this.bits,s=t*n;for(let i=0;i<n;i++)e.setBulk(32*i,r[s+i]);return e}setRow(t,e){u.arraycopy(e.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),e=this.getHeight();let n=new p(t),r=new p(t);for(let s=0,i=Math.floor((e+1)/2);s<i;s++)n=this.getRow(s,n),r=this.getRow(e-1-s,r),n.reverse(),r.reverse(),this.setRow(s,r),this.setRow(e-1-s,n)}getEnclosingRectangle(){const t=this.height,e=this.rowSize,n=this.bits;let r=this.width,s=t,i=-1,o=-1;for(let a=0;a<t;a++)for(let t=0;t<e;t++){const l=n[a*e+t];if(0!==l){if(a<s&&(s=a),a>o&&(o=a),32*t<r){let e=0;for(;0==(l<<31-e&4294967295);)e++;32*t+e<r&&(r=32*t+e)}if(32*t+31>i){let e=31;for(;l>>>e==0;)e--;32*t+e>i&&(i=32*t+e)}}}return i<r||o<s?null:Int32Array.from([r,s,i-r+1,o-s+1])}getTopLeftOnBit(){const t=this.rowSize,e=this.bits;let n=0;for(;n<e.length&&0===e[n];)n++;if(n===e.length)return null;const r=n/t;let s=n%t*32;const i=e[n];let o=0;for(;0==(i<<31-o&4294967295);)o++;return s+=o,Int32Array.from([s,r])}getBottomRightOnBit(){const t=this.rowSize,e=this.bits;let n=e.length-1;for(;n>=0&&0===e[n];)n--;if(n<0)return null;const r=Math.floor(n/t);let s=32*Math.floor(n%t);const i=e[n];let o=31;for(;i>>>o==0;)o--;return s+=o,Int32Array.from([s,r])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){return t instanceof I&&this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&f.equals(this.bits,t.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+f.hashCode(this.bits),t}toString(t="X ",e="  ",n="\n"){return this.buildToString(t,e,n)}buildToString(t,e,n){let r=new S;for(let s=0,i=this.height;s<i;s++){for(let n=0,i=this.width;n<i;n++)r.append(this.get(n,s)?t:e);r.append(n)}return r.toString()}clone(){return new I(this.width,this.height,this.rowSize,this.bits.slice())}}class v extends s{static getNotFoundInstance(){return new v}}v.kind="NotFoundException";class b extends c{constructor(t){super(t),this.luminances=b.EMPTY,this.buckets=new Int32Array(b.LUMINANCE_BUCKETS)}getBlackRow(t,e){const n=this.getLuminanceSource(),r=n.getWidth();null==e||e.getSize()<r?e=new p(r):e.clear(),this.initArrays(r);const s=n.getRow(t,this.luminances),i=this.buckets;for(let a=0;a<r;a++)i[(255&s[a])>>b.LUMINANCE_SHIFT]++;const o=b.estimateBlackPoint(i);if(r<3)for(let a=0;a<r;a++)(255&s[a])<o&&e.set(a);else{let t=255&s[0],n=255&s[1];for(let i=1;i<r-1;i++){const r=255&s[i+1];(4*n-t-r)/2<o&&e.set(i),t=n,n=r}}return e}getBlackMatrix(){const t=this.getLuminanceSource(),e=t.getWidth(),n=t.getHeight(),r=new I(e,n);this.initArrays(e);const s=this.buckets;for(let a=1;a<5;a++){const r=Math.floor(n*a/5),i=t.getRow(r,this.luminances),o=Math.floor(4*e/5);for(let t=Math.floor(e/5);t<o;t++)s[(255&i[t])>>b.LUMINANCE_SHIFT]++}const i=b.estimateBlackPoint(s),o=t.getMatrix();for(let a=0;a<n;a++){const t=a*e;for(let n=0;n<e;n++)(255&o[t+n])<i&&r.set(n,a)}return r}createBinarizer(t){return new b(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const e=this.buckets;for(let n=0;n<b.LUMINANCE_BUCKETS;n++)e[n]=0}static estimateBlackPoint(t){const e=t.length;let n=0,r=0,s=0;for(let c=0;c<e;c++)t[c]>s&&(r=c,s=t[c]),t[c]>n&&(n=t[c]);let i=0,o=0;for(let c=0;c<e;c++){const e=c-r,n=t[c]*e*e;n>o&&(i=c,o=n)}if(r>i){const t=r;r=i,i=t}if(i-r<=e/16)throw new v;let a=i-1,l=-1;for(let c=i-1;c>r;c--){const e=c-r,s=e*e*(i-c)*(n-t[c]);s>l&&(a=c,l=s)}return a<<b.LUMINANCE_SHIFT}}b.LUMINANCE_BITS=5,b.LUMINANCE_SHIFT=8-b.LUMINANCE_BITS,b.LUMINANCE_BUCKETS=1<<b.LUMINANCE_BITS,b.EMPTY=Uint8ClampedArray.from([0]);class T extends b{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;const t=this.getLuminanceSource(),e=t.getWidth(),n=t.getHeight();if(e>=T.MINIMUM_DIMENSION&&n>=T.MINIMUM_DIMENSION){const r=t.getMatrix();let s=e>>T.BLOCK_SIZE_POWER;0!=(e&T.BLOCK_SIZE_MASK)&&s++;let i=n>>T.BLOCK_SIZE_POWER;0!=(n&T.BLOCK_SIZE_MASK)&&i++;const o=T.calculateBlackPoints(r,s,i,e,n),a=new I(e,n);T.calculateThresholdForBlock(r,s,i,e,n,o,a),this.matrix=a}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new T(t)}static calculateThresholdForBlock(t,e,n,r,s,i,o){const a=s-T.BLOCK_SIZE,l=r-T.BLOCK_SIZE;for(let c=0;c<n;c++){let s=c<<T.BLOCK_SIZE_POWER;s>a&&(s=a);const u=T.cap(c,2,n-3);for(let n=0;n<e;n++){let a=n<<T.BLOCK_SIZE_POWER;a>l&&(a=l);const c=T.cap(n,2,e-3);let h=0;for(let t=-2;t<=2;t++){const e=i[u+t];h+=e[c-2]+e[c-1]+e[c]+e[c+1]+e[c+2]}T.thresholdBlock(t,a,s,h/25,r,o)}}}static cap(t,e,n){return t<e?e:t>n?n:t}static thresholdBlock(t,e,n,r,s,i){for(let o=0,a=n*s+e;o<T.BLOCK_SIZE;o++,a+=s)for(let s=0;s<T.BLOCK_SIZE;s++)(255&t[a+s])<=r&&i.set(e+s,n+o)}static calculateBlackPoints(t,e,n,r,s){const i=s-T.BLOCK_SIZE,o=r-T.BLOCK_SIZE,a=new Array(n);for(let l=0;l<n;l++){a[l]=new Int32Array(e);let n=l<<T.BLOCK_SIZE_POWER;n>i&&(n=i);for(let s=0;s<e;s++){let e=s<<T.BLOCK_SIZE_POWER;e>o&&(e=o);let i=0,c=255,u=0;for(let s=0,o=n*r+e;s<T.BLOCK_SIZE;s++,o+=r){for(let e=0;e<T.BLOCK_SIZE;e++){const n=255&t[o+e];i+=n,n<c&&(c=n),n>u&&(u=n)}if(u-c>T.MIN_DYNAMIC_RANGE)for(s++,o+=r;s<T.BLOCK_SIZE;s++,o+=r)for(let e=0;e<T.BLOCK_SIZE;e++)i+=255&t[o+e]}let h=i>>2*T.BLOCK_SIZE_POWER;if(u-c<=T.MIN_DYNAMIC_RANGE&&(h=c/2,l>0&&s>0)){const t=(a[l-1][s]+2*a[l][s-1]+a[l-1][s-1])/4;c<t&&(h=t)}a[l][s]=h}}return a}}T.BLOCK_SIZE_POWER=3,T.BLOCK_SIZE=1<<T.BLOCK_SIZE_POWER,T.BLOCK_SIZE_MASK=T.BLOCK_SIZE-1,T.MINIMUM_DIMENSION=5*T.BLOCK_SIZE,T.MIN_DYNAMIC_RANGE=24;class R{constructor(t,e){this.width=t,this.height=e}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,e,n,r){throw new E("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new E("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new E("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let e=new S;for(let n=0;n<this.height;n++){const r=this.getRow(n,t);for(let t=0;t<this.width;t++){const n=255&r[t];let s;s=n<64?"#":n<128?"+":n<192?".":" ",e.append(s)}e.append("\n")}return e.toString()}}class N extends R{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,e){const n=this.delegate.getRow(t,e),r=this.getWidth();for(let s=0;s<r;s++)n[s]=255-(255&n[s]);return n}getMatrix(){const t=this.delegate.getMatrix(),e=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(e);for(let r=0;r<e;r++)n[r]=255-(255&t[r]);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(t,e,n,r){return new N(this.delegate.crop(t,e,n,r))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new N(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new N(this.delegate.rotateCounterClockwise45())}}class O extends R{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=O.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const e=t.getContext("2d").getImageData(0,0,t.width,t.height);return O.toGrayscaleBuffer(e.data,t.width,t.height)}static toGrayscaleBuffer(t,e,n){const r=new Uint8ClampedArray(e*n);for(let s=0,i=0,o=t.length;s<o;s+=4,i++){let e;e=0===t[s+3]?255:306*t[s]+601*t[s+1]+117*t[s+2]+512>>10,r[i]=e}return r}getRow(t,e){if(t<0||t>=this.getHeight())throw new o("Requested row is outside the image: "+t);const n=this.getWidth(),r=t*n;return null===e?e=this.buffer.slice(r,r+n):(e.length<n&&(e=new Uint8ClampedArray(n)),e.set(this.buffer.slice(r,r+n))),e}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,e,n,r){return super.crop(t,e,n,r),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const e=this.getTempCanvasElement(),n=e.getContext("2d"),r=t*O.DEGREE_TO_RADIANS,s=this.canvas.width,i=this.canvas.height,o=Math.ceil(Math.abs(Math.cos(r))*s+Math.abs(Math.sin(r))*i),a=Math.ceil(Math.abs(Math.sin(r))*s+Math.abs(Math.cos(r))*i);return e.width=o,e.height=a,n.translate(o/2,a/2),n.rotate(r),n.drawImage(this.canvas,s/-2,i/-2),this.buffer=O.makeBufferFromCanvasImageData(e),this}invert(){return new N(this)}}O.DEGREE_TO_RADIANS=Math.PI/180;class D{constructor(t,e,n){this.deviceId=t,this.label=e,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var P,M=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__awaiter:void 0)||function(t,e,n,r){return new(n||(n=Promise))(function(s,i){function o(t){try{l(r.next(t))}catch(e){i(e)}}function a(t){try{l(r.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,a)}l((r=r.apply(t,e||[])).next())})};class B{constructor(t,e=500,n){this.reader=t,this.timeBetweenScansMillis=e,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!=typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return M(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),e=[];for(const n of t){const t="video"===n.kind?"videoinput":n.kind;"videoinput"===t&&e.push({deviceId:n.deviceId||n.id,label:n.label||`Video device ${e.length+1}`,kind:t,groupId:n.groupId})}return e})}getVideoInputDevices(){return M(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(t=>new D(t.deviceId,t.label))})}findDeviceById(t){return M(this,void 0,void 0,function*(){const e=yield this.listVideoInputDevices();return e?e.find(e=>e.deviceId===t):null})}decodeFromInputVideoDevice(t,e){return M(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,e)})}decodeOnceFromVideoDevice(t,e){return M(this,void 0,void 0,function*(){let n;this.reset(),n=t?{deviceId:{exact:t}}:{facingMode:"environment"};const r={video:n};return yield this.decodeOnceFromConstraints(r,e)})}decodeOnceFromConstraints(t,e){return M(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(n,e)})}decodeOnceFromStream(t,e){return M(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(t,e);return yield this.decodeOnce(n)})}decodeFromInputVideoDeviceContinuously(t,e,n){return M(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,e,n)})}decodeFromVideoDevice(t,e,n){return M(this,void 0,void 0,function*(){let r;r=t?{deviceId:{exact:t}}:{facingMode:"environment"};const s={video:r};return yield this.decodeFromConstraints(s,e,n)})}decodeFromConstraints(t,e,n){return M(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(r,e,n)})}decodeFromStream(t,e,n){return M(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(t,e);return yield this.decodeContinuously(r,n)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,e){return M(this,void 0,void 0,function*(){const n=this.prepareVideoElement(e);return this.addVideoSource(n,t),this.videoElement=n,this.stream=t,yield this.playVideoOnLoadAsync(n),n})}playVideoOnLoadAsync(t){return new Promise((e,n)=>this.playVideoOnLoad(t,()=>e()))}playVideoOnLoad(t,e){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",e),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return M(this,void 0,void 0,function*(){if(this.isVideoPlaying(t))console.warn("Trying to play video that is already playing.");else try{yield t.play()}catch(e){console.warn("It was not possible to play the video.")}})}getMediaElement(t,e){const n=document.getElementById(t);if(!n)throw new i(`element with id '${t}' not found`);if(n.nodeName.toLowerCase()!==e.toLowerCase())throw new i(`element with id '${t}' must be an ${e} element`);return n}decodeFromImage(t,e){if(!t&&!e)throw new i("either imageElement with a src set or an url must be provided");return e&&!t?this.decodeFromImageUrl(e):this.decodeFromImageElement(t)}decodeFromVideo(t,e){if(!t&&!e)throw new i("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrl(e):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,e,n){if(void 0===t&&void 0===e)throw new i("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrlContinuously(e,n):this.decodeFromVideoElementContinuously(t,n)}decodeFromImageElement(t){if(!t)throw new i("An image element must be provided.");this.reset();const e=this.prepareImageElement(t);let n;return this.imageElement=e,n=this.isImageLoaded(e)?this.decodeOnce(e,!1,!0):this._decodeOnLoadImage(e),n}decodeFromVideoElement(t){const e=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(e)}decodeFromVideoElementContinuously(t,e){const n=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(n,e)}_decodeFromVideoElementSetup(t){if(!t)throw new i("A video element must be provided.");this.reset();const e=this.prepareVideoElement(t);return this.videoElement=e,e}decodeFromImageUrl(t){if(!t)throw new i("An URL must be provided.");this.reset();const e=this.prepareImageElement();this.imageElement=e;const n=this._decodeOnLoadImage(e);return e.src=t,n}decodeFromVideoUrl(t){if(!t)throw new i("An URL must be provided.");this.reset();const e=this.prepareVideoElement(),n=this.decodeFromVideoElement(e);return e.src=t,n}decodeFromVideoUrlContinuously(t,e){if(!t)throw new i("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,e);return n.src=t,r}_decodeOnLoadImage(t){return new Promise((e,n)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(e,n),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return M(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,e){return M(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,e)})}isImageLoaded(t){return!!t.complete&&0!==t.naturalWidth}prepareImageElement(t){let e;return void 0===t&&(e=document.createElement("img"),e.width=200,e.height=200),"string"==typeof t&&(e=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(e=t),e}prepareVideoElement(t){let e;return t||"undefined"==typeof document||(e=document.createElement("video"),e.width=200,e.height=200),"string"==typeof t&&(e=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(e=t),e.setAttribute("autoplay","true"),e.setAttribute("muted","true"),e.setAttribute("playsinline","true"),e}decodeOnce(t,e=!0,n=!0){this._stopAsyncDecode=!1;const r=(s,i)=>{if(this._stopAsyncDecode)return i(new v("Video stream has ended before any code could be detected.")),void(this._stopAsyncDecode=void 0);try{s(this.decode(t))}catch(o){const t=(o instanceof l||o instanceof _)&&n;if(e&&o instanceof v||t)return setTimeout(r,this._timeBetweenDecodingAttempts,s,i);i(o)}};return new Promise((t,e)=>r(t,e))}decodeContinuously(t,e){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode)this._stopContinuousDecode=void 0;else try{const r=this.decode(t);e(r,null),setTimeout(n,this.timeBetweenScansMillis)}catch(r){e(null,r);const t=r instanceof v;(r instanceof l||r instanceof _||t)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(t){const e=this.createBinaryBitmap(t);return this.decodeBitmap(e)}createBinaryBitmap(t){const e=this.getCaptureCanvasContext(t);this.drawImageOnCanvas(e,t);const n=this.getCaptureCanvas(t),r=new O(n),s=new T(r);return new a(s)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const e=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=e}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const e=this.createCaptureCanvas(t);this.captureCanvas=e}return this.captureCanvas}drawImageOnCanvas(t,e){t.drawImage(e,0,0)}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if("undefined"==typeof document)return this._destroyCaptureCanvas(),null;const e=document.createElement("canvas");let n,r;return void 0!==t&&(t instanceof HTMLVideoElement?(n=t.videoWidth,r=t.videoHeight):t instanceof HTMLImageElement&&(n=t.naturalWidth||t.width,r=t.naturalHeight||t.height)),e.style.width=n+"px",e.style.height=r+"px",e.width=n,e.height=r,e}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(void 0!==this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),void 0!==this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),void 0!==this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,e){try{t.srcObject=e}catch(n){t.src=URL.createObjectURL(e)}}cleanVideoSource(t){try{t.srcObject=null}catch(e){t.src=""}this.videoElement.removeAttribute("src")}}class x{constructor(t,e,n=(null==e?0:8*e.length),r,s,i=u.currentTimeMillis()){this.text=t,this.rawBytes=e,this.numBits=n,this.resultPoints=r,this.format=s,this.timestamp=i,this.text=t,this.rawBytes=e,this.numBits=null==n?null==e?0:8*e.length:n,this.resultPoints=r,this.format=s,this.resultMetadata=null,this.timestamp=null==i?u.currentTimeMillis():i}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,e){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(t,e)}putAllMetadata(t){null!==t&&(this.resultMetadata=null===this.resultMetadata?t:new Map(t))}addResultPoints(t){const e=this.resultPoints;if(null===e)this.resultPoints=t;else if(null!==t&&t.length>0){const n=new Array(e.length+t.length);u.arraycopy(e,0,n,0,e.length),u.arraycopy(t,0,n,e.length,t.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}!function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(P||(P={}));var k,L=P;!function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(k||(k={}));var F,U,V,H,j,z,G=k;class W{constructor(t,e,n,r,s=-1,i=-1){this.rawBytes=t,this.text=e,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=s,this.structuredAppendParity=i,this.numBits=null==t?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class X{exp(t){return this.expTable[t]}log(t){if(0===t)throw new o;return this.logTable[t]}static addOrSubtract(t,e){return t^e}}class Z{constructor(t,e){if(0===e.length)throw new o;this.field=t;const n=e.length;if(n>1&&0===e[0]){let t=1;for(;t<n&&0===e[t];)t++;t===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-t),u.arraycopy(e,t,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(0===t)return this.getCoefficient(0);const e=this.coefficients;let n;if(1===t){n=0;for(let t=0,r=e.length;t!==r;t++)n=X.addOrSubtract(n,e[t]);return n}n=e[0];const r=e.length,s=this.field;for(let i=1;i<r;i++)n=X.addOrSubtract(s.multiply(t,n),e[i]);return n}addOrSubtract(t){if(!this.field.equals(t.field))throw new o("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let e=this.coefficients,n=t.coefficients;if(e.length>n.length){const t=e;e=n,n=t}let r=new Int32Array(n.length);const s=n.length-e.length;u.arraycopy(n,0,r,0,s);for(let i=s;i<n.length;i++)r[i]=X.addOrSubtract(e[i-s],n[i]);return new Z(this.field,r)}multiply(t){if(!this.field.equals(t.field))throw new o("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const e=this.coefficients,n=e.length,r=t.coefficients,s=r.length,i=new Int32Array(n+s-1),a=this.field;for(let o=0;o<n;o++){const t=e[o];for(let e=0;e<s;e++)i[o+e]=X.addOrSubtract(i[o+e],a.multiply(t,r[e]))}return new Z(a,i)}multiplyScalar(t){if(0===t)return this.field.getZero();if(1===t)return this;const e=this.coefficients.length,n=this.field,r=new Int32Array(e),s=this.coefficients;for(let i=0;i<e;i++)r[i]=n.multiply(s[i],t);return new Z(n,r)}multiplyByMonomial(t,e){if(t<0)throw new o;if(0===e)return this.field.getZero();const n=this.coefficients,r=n.length,s=new Int32Array(r+t),i=this.field;for(let o=0;o<r;o++)s[o]=i.multiply(n[o],e);return new Z(i,s)}divide(t){if(!this.field.equals(t.field))throw new o("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new o("Divide by 0");const e=this.field;let n=e.getZero(),r=this;const s=t.getCoefficient(t.getDegree()),i=e.inverse(s);for(;r.getDegree()>=t.getDegree()&&!r.isZero();){const s=r.getDegree()-t.getDegree(),o=e.multiply(r.getCoefficient(r.getDegree()),i),a=t.multiplyByMonomial(s,o),l=e.buildMonomial(s,o);n=n.addOrSubtract(l),r=r.addOrSubtract(a)}return[n,r]}toString(){let t="";for(let e=this.getDegree();e>=0;e--){let n=this.getCoefficient(e);if(0!==n){if(n<0?(t+=" - ",n=-n):t.length>0&&(t+=" + "),0===e||1!==n){const e=this.field.log(n);0===e?t+="1":1===e?t+="a":(t+="a^",t+=e)}0!==e&&(1===e?t+="x":(t+="x^",t+=e))}}return t}}class Y extends s{}Y.kind="ArithmeticException";class q extends X{constructor(t,e,n){super(),this.primitive=t,this.size=e,this.generatorBase=n;const r=new Int32Array(e);let s=1;for(let o=0;o<e;o++)r[o]=s,s*=2,s>=e&&(s^=t,s&=e-1);this.expTable=r;const i=new Int32Array(e);for(let o=0;o<e-1;o++)i[r[o]]=o;this.logTable=i,this.zero=new Z(this,Int32Array.from([0])),this.one=new Z(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,e){if(t<0)throw new o;if(0===e)return this.zero;const n=new Int32Array(t+1);return n[0]=e,new Z(this,n)}inverse(t){if(0===t)throw new Y;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,e){return 0===t||0===e?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+g.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}q.AZTEC_DATA_12=new q(4201,4096,1),q.AZTEC_DATA_10=new q(1033,1024,1),q.AZTEC_DATA_6=new q(67,64,1),q.AZTEC_PARAM=new q(19,16,1),q.QR_CODE_FIELD_256=new q(285,256,0),q.DATA_MATRIX_FIELD_256=new q(301,256,1),q.AZTEC_DATA_8=q.DATA_MATRIX_FIELD_256,q.MAXICODE_FIELD_64=q.AZTEC_DATA_6;class $ extends s{}$.kind="ReedSolomonException";class K extends s{}K.kind="IllegalStateException";class Q{constructor(t){this.field=t}decode(t,e){const n=this.field,r=new Z(n,t),s=new Int32Array(e);let i=!0;for(let h=0;h<e;h++){const t=r.evaluateAt(n.exp(h+n.getGeneratorBase()));s[s.length-1-h]=t,0!==t&&(i=!1)}if(i)return;const o=new Z(n,s),a=this.runEuclideanAlgorithm(n.buildMonomial(e,1),o,e),l=a[1],c=this.findErrorLocations(a[0]),u=this.findErrorMagnitudes(l,c);for(let h=0;h<c.length;h++){const e=t.length-1-n.log(c[h]);if(e<0)throw new $("Bad error location");t[e]=q.addOrSubtract(t[e],u[h])}}runEuclideanAlgorithm(t,e,n){if(t.getDegree()<e.getDegree()){const n=t;t=e,e=n}const r=this.field;let s=t,i=e,o=r.getZero(),a=r.getOne();for(;i.getDegree()>=(n/2|0);){let t=s,e=o;if(s=i,o=a,s.isZero())throw new $("r_{i-1} was zero");i=t;let n=r.getZero();const l=s.getCoefficient(s.getDegree()),c=r.inverse(l);for(;i.getDegree()>=s.getDegree()&&!i.isZero();){const t=i.getDegree()-s.getDegree(),e=r.multiply(i.getCoefficient(i.getDegree()),c);n=n.addOrSubtract(r.buildMonomial(t,e)),i=i.addOrSubtract(s.multiplyByMonomial(t,e))}if(a=n.multiply(o).addOrSubtract(e),i.getDegree()>=s.getDegree())throw new K("Division algorithm failed to reduce polynomial?")}const l=a.getCoefficient(0);if(0===l)throw new $("sigmaTilde(0) was zero");const c=r.inverse(l);return[a.multiplyScalar(c),i.multiplyScalar(c)]}findErrorLocations(t){const e=t.getDegree();if(1===e)return Int32Array.from([t.getCoefficient(1)]);const n=new Int32Array(e);let r=0;const s=this.field;for(let i=1;i<s.getSize()&&r<e;i++)0===t.evaluateAt(i)&&(n[r]=s.inverse(i),r++);if(r!==e)throw new $("Error locator degree does not match number of roots");return n}findErrorMagnitudes(t,e){const n=e.length,r=new Int32Array(n),s=this.field;for(let i=0;i<n;i++){const o=s.inverse(e[i]);let a=1;for(let t=0;t<n;t++)if(i!==t){const n=s.multiply(e[t],o);a=s.multiply(a,0==(1&n)?1|n:-2&n)}r[i]=s.multiply(t.evaluateAt(o),s.inverse(a)),0!==s.getGeneratorBase()&&(r[i]=s.multiply(r[i],o))}return r}}!function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"}(F||(F={}));class J{decode(t){this.ddata=t;let e=t.getBits(),n=this.extractBits(e),r=this.correctBits(n),s=J.convertBoolArrayToByteArray(r),i=J.getEncodedData(r),o=new W(s,i,null,null);return o.setNumBits(r.length),o}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let e=t.length,n=F.UPPER,r=F.UPPER,s="",i=0;for(;i<e;)if(r===F.BINARY){if(e-i<5)break;let o=J.readCode(t,i,5);if(i+=5,0===o){if(e-i<11)break;o=J.readCode(t,i,11)+31,i+=11}for(let n=0;n<o;n++){if(e-i<8){i=e;break}const n=J.readCode(t,i,8);s+=A.castAsNonUtf8Char(n),i+=8}r=n}else{let o=r===F.DIGIT?4:5;if(e-i<o)break;let a=J.readCode(t,i,o);i+=o;let l=J.getCharacter(r,a);l.startsWith("CTRL_")?(n=r,r=J.getTable(l.charAt(5)),"L"===l.charAt(6)&&(n=r)):(s+=l,r=n)}return s}static getTable(t){switch(t){case"L":return F.LOWER;case"P":return F.PUNCT;case"M":return F.MIXED;case"D":return F.DIGIT;case"B":return F.BINARY;case"U":default:return F.UPPER}}static getCharacter(t,e){switch(t){case F.UPPER:return J.UPPER_TABLE[e];case F.LOWER:return J.LOWER_TABLE[e];case F.MIXED:return J.MIXED_TABLE[e];case F.PUNCT:return J.PUNCT_TABLE[e];case F.DIGIT:return J.DIGIT_TABLE[e];default:throw new K("Bad table")}}correctBits(t){let e,n;this.ddata.getNbLayers()<=2?(n=6,e=q.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,e=q.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,e=q.AZTEC_DATA_10):(n=12,e=q.AZTEC_DATA_12);let r=this.ddata.getNbDatablocks(),s=t.length/n;if(s<r)throw new _;let i=t.length%n,o=new Int32Array(s);for(let d=0;d<s;d++,i+=n)o[d]=J.readCode(t,i,n);try{new Q(e).decode(o,s-r)}catch(h){throw new _(h)}let a=(1<<n)-1,l=0;for(let d=0;d<r;d++){let t=o[d];if(0===t||t===a)throw new _;1!==t&&t!==a-1||l++}let c=new Array(r*n-l),u=0;for(let d=0;d<r;d++){let t=o[d];if(1===t||t===a-1)c.fill(t>1,u,u+n-1),u+=n-1;else for(let e=n-1;e>=0;--e)c[u++]=0!=(t&1<<e)}return c}extractBits(t){let e=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(e?11:14)+4*n,s=new Int32Array(r),i=new Array(this.totalBitsInLayer(n,e));if(e)for(let o=0;o<s.length;o++)s[o]=o;else{let t=r+1+2*g.truncDivision(g.truncDivision(r,2)-1,15),e=r/2,n=g.truncDivision(t,2);for(let r=0;r<e;r++){let t=r+g.truncDivision(r,15);s[e-r-1]=n-t-1,s[e+r]=n+t+1}}for(let o=0,a=0;o<n;o++){let l=4*(n-o)+(e?9:12),c=2*o,u=r-1-c;for(let e=0;e<l;e++){let n=2*e;for(let r=0;r<2;r++)i[a+n+r]=t.get(s[c+r],s[c+e]),i[a+2*l+n+r]=t.get(s[c+e],s[u-r]),i[a+4*l+n+r]=t.get(s[u-r],s[u-e]),i[a+6*l+n+r]=t.get(s[u-e],s[c+r])}a+=8*l}return i}static readCode(t,e,n){let r=0;for(let s=e;s<e+n;s++)r<<=1,t[s]&&(r|=1);return r}static readByte(t,e){let n=t.length-e;return n>=8?J.readCode(t,e,8):J.readCode(t,e,n)<<8-n}static convertBoolArrayToByteArray(t){let e=new Uint8Array((t.length+7)/8);for(let n=0;n<e.length;n++)e[n]=J.readByte(t,8*n);return e}totalBitsInLayer(t,e){return((e?88:112)+16*t)*t}}J.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],J.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],J.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],J.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],J.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class tt{constructor(){}static round(t){return NaN===t?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,e,n,r){const s=t-n,i=e-r;return Math.sqrt(s*s+i*i)}static sum(t){let e=0;for(let n=0,r=t.length;n!==r;n++)e+=t[n];return e}}class et{static floatToIntBits(t){return t}}et.MAX_VALUE=Number.MAX_SAFE_INTEGER;class nt{constructor(t,e){this.x=t,this.y=e}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof nt){const e=t;return this.x===e.x&&this.y===e.y}return!1}hashCode(){return 31*et.floatToIntBits(this.x)+et.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const e=this.distance(t[0],t[1]),n=this.distance(t[1],t[2]),r=this.distance(t[0],t[2]);let s,i,o;if(n>=e&&n>=r?(i=t[0],s=t[1],o=t[2]):r>=n&&r>=e?(i=t[1],s=t[0],o=t[2]):(i=t[2],s=t[0],o=t[1]),this.crossProductZ(s,i,o)<0){const t=s;s=o,o=t}t[0]=s,t[1]=i,t[2]=o}static distance(t,e){return tt.distance(t.x,t.y,e.x,e.y)}static crossProductZ(t,e,n){const r=e.x,s=e.y;return(n.x-r)*(t.y-s)-(n.y-s)*(t.x-r)}}class rt{constructor(t,e){this.bits=t,this.points=e}getBits(){return this.bits}getPoints(){return this.points}}class st extends rt{constructor(t,e,n,r,s){super(t,e),this.compact=n,this.nbDatablocks=r,this.nbLayers=s}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class it{constructor(t,e,n,r){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),null==e&&(e=it.INIT_SIZE),null==n&&(n=t.getWidth()/2|0),null==r&&(r=t.getHeight()/2|0);const s=e/2|0;if(this.leftInit=n-s,this.rightInit=n+s,this.upInit=r-s,this.downInit=r+s,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new v}detect(){let t=this.leftInit,e=this.rightInit,n=this.upInit,r=this.downInit,s=!1,i=!0,o=!1,a=!1,l=!1,c=!1,u=!1;const h=this.width,d=this.height;for(;i;){i=!1;let f=!0;for(;(f||!a)&&e<h;)f=this.containsBlackPoint(n,r,e,!1),f?(e++,i=!0,a=!0):a||e++;if(e>=h){s=!0;break}let g=!0;for(;(g||!l)&&r<d;)g=this.containsBlackPoint(t,e,r,!0),g?(r++,i=!0,l=!0):l||r++;if(r>=d){s=!0;break}let p=!0;for(;(p||!c)&&t>=0;)p=this.containsBlackPoint(n,r,t,!1),p?(t--,i=!0,c=!0):c||t--;if(t<0){s=!0;break}let m=!0;for(;(m||!u)&&n>=0;)m=this.containsBlackPoint(t,e,n,!0),m?(n--,i=!0,u=!0):u||n--;if(n<0){s=!0;break}i&&(o=!0)}if(!s&&o){const s=e-t;let i=null;for(let e=1;null===i&&e<s;e++)i=this.getBlackPointOnSegment(t,r-e,t+e,r);if(null==i)throw new v;let o=null;for(let e=1;null===o&&e<s;e++)o=this.getBlackPointOnSegment(t,n+e,t+e,n);if(null==o)throw new v;let a=null;for(let t=1;null===a&&t<s;t++)a=this.getBlackPointOnSegment(e,n+t,e-t,n);if(null==a)throw new v;let l=null;for(let t=1;null===l&&t<s;t++)l=this.getBlackPointOnSegment(e,r-t,e-t,r);if(null==l)throw new v;return this.centerEdges(l,i,a,o)}throw new v}getBlackPointOnSegment(t,e,n,r){const s=tt.round(tt.distance(t,e,n,r)),i=(n-t)/s,o=(r-e)/s,a=this.image;for(let l=0;l<s;l++){const n=tt.round(t+l*i),r=tt.round(e+l*o);if(a.get(n,r))return new nt(n,r)}return null}centerEdges(t,e,n,r){const s=t.getX(),i=t.getY(),o=e.getX(),a=e.getY(),l=n.getX(),c=n.getY(),u=r.getX(),h=r.getY(),d=it.CORR;return s<this.width/2?[new nt(u-d,h+d),new nt(o+d,a+d),new nt(l-d,c-d),new nt(s+d,i-d)]:[new nt(u+d,h+d),new nt(o+d,a-d),new nt(l-d,c+d),new nt(s-d,i-d)]}containsBlackPoint(t,e,n,r){const s=this.image;if(r){for(let i=t;i<=e;i++)if(s.get(i,n))return!0}else for(let i=t;i<=e;i++)if(s.get(n,i))return!0;return!1}}it.INIT_SIZE=10,it.CORR=1;class ot{static checkAndNudgePoints(t,e){const n=t.getWidth(),r=t.getHeight();let s=!0;for(let i=0;i<e.length&&s;i+=2){const t=Math.floor(e[i]),o=Math.floor(e[i+1]);if(t<-1||t>n||o<-1||o>r)throw new v;s=!1,-1===t?(e[i]=0,s=!0):t===n&&(e[i]=n-1,s=!0),-1===o?(e[i+1]=0,s=!0):o===r&&(e[i+1]=r-1,s=!0)}s=!0;for(let i=e.length-2;i>=0&&s;i-=2){const t=Math.floor(e[i]),o=Math.floor(e[i+1]);if(t<-1||t>n||o<-1||o>r)throw new v;s=!1,-1===t?(e[i]=0,s=!0):t===n&&(e[i]=n-1,s=!0),-1===o?(e[i+1]=0,s=!0):o===r&&(e[i+1]=r-1,s=!0)}}}class at{constructor(t,e,n,r,s,i,o,a,l){this.a11=t,this.a21=e,this.a31=n,this.a12=r,this.a22=s,this.a32=i,this.a13=o,this.a23=a,this.a33=l}static quadrilateralToQuadrilateral(t,e,n,r,s,i,o,a,l,c,u,h,d,f,g,p){const m=at.quadrilateralToSquare(t,e,n,r,s,i,o,a);return at.squareToQuadrilateral(l,c,u,h,d,f,g,p).times(m)}transformPoints(t){const e=t.length,n=this.a11,r=this.a12,s=this.a13,i=this.a21,o=this.a22,a=this.a23,l=this.a31,c=this.a32,u=this.a33;for(let h=0;h<e;h+=2){const e=t[h],d=t[h+1],f=s*e+a*d+u;t[h]=(n*e+i*d+l)/f,t[h+1]=(r*e+o*d+c)/f}}transformPointsWithValues(t,e){const n=this.a11,r=this.a12,s=this.a13,i=this.a21,o=this.a22,a=this.a23,l=this.a31,c=this.a32,u=this.a33,h=t.length;for(let d=0;d<h;d++){const h=t[d],f=e[d],g=s*h+a*f+u;t[d]=(n*h+i*f+l)/g,e[d]=(r*h+o*f+c)/g}}static squareToQuadrilateral(t,e,n,r,s,i,o,a){const l=t-n+s-o,c=e-r+i-a;if(0===l&&0===c)return new at(n-t,s-n,t,r-e,i-r,e,0,0,1);{const u=n-s,h=o-s,d=r-i,f=a-i,g=u*f-h*d,p=(l*f-h*c)/g,m=(u*c-l*d)/g;return new at(n-t+p*n,o-t+m*o,t,r-e+p*r,a-e+m*a,e,p,m,1)}}static quadrilateralToSquare(t,e,n,r,s,i,o,a){return at.squareToQuadrilateral(t,e,n,r,s,i,o,a).buildAdjoint()}buildAdjoint(){return new at(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new at(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class lt extends ot{sampleGrid(t,e,n,r,s,i,o,a,l,c,u,h,d,f,g,p,m,w,_){const y=at.quadrilateralToQuadrilateral(r,s,i,o,a,l,c,u,h,d,f,g,p,m,w,_);return this.sampleGridWithTransform(t,e,n,y)}sampleGridWithTransform(t,e,n,r){if(e<=0||n<=0)throw new v;const s=new I(e,n),i=new Float32Array(2*e);for(let a=0;a<n;a++){const e=i.length,n=a+.5;for(let t=0;t<e;t+=2)i[t]=t/2+.5,i[t+1]=n;r.transformPoints(i),ot.checkAndNudgePoints(t,i);try{for(let n=0;n<e;n+=2)t.get(Math.floor(i[n]),Math.floor(i[n+1]))&&s.set(n/2,a)}catch(o){throw new v}}return s}}class ct{static setGridSampler(t){ct.gridSampler=t}static getInstance(){return ct.gridSampler}}ct.gridSampler=new lt;class ut{constructor(t,e){this.x=t,this.y=e}toResultPoint(){return new nt(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ht{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let e=this.getMatrixCenter(),n=this.getBullsEyeCorners(e);if(t){let t=n[0];n[0]=n[2],n[2]=t}this.extractParameters(n);let r=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),s=this.getMatrixCornerPoints(n);return new st(r,s,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!(this.isValidPoint(t[0])&&this.isValidPoint(t[1])&&this.isValidPoint(t[2])&&this.isValidPoint(t[3])))throw new v;let e=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(t[0],t[1],e),this.sampleLine(t[1],t[2],e),this.sampleLine(t[2],t[3],e),this.sampleLine(t[3],t[0],e)]);this.shift=this.getRotation(n,e);let r=0;for(let i=0;i<4;i++){let t=n[(this.shift+i)%4];this.compact?(r<<=7,r+=t>>1&127):(r<<=10,r+=(t>>2&992)+(t>>1&31))}let s=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=1+(s>>6),this.nbDataBlocks=1+(63&s)):(this.nbLayers=1+(s>>11),this.nbDataBlocks=1+(2047&s))}getRotation(t,e){let n=0;t.forEach((t,r,s)=>{n=(t>>e-2<<1)+(1&t)+(n<<3)}),n=((1&n)<<11)+(n>>1);for(let r=0;r<4;r++)if(g.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new v}getCorrectedParameterData(t,e){let n,r;e?(n=7,r=2):(n=10,r=4);let s=n-r,i=new Int32Array(n);for(let l=n-1;l>=0;--l)i[l]=15&t,t>>=4;try{new Q(q.AZTEC_PARAM).decode(i,s)}catch(a){throw new v}let o=0;for(let l=0;l<r;l++)o=(o<<4)+i[l];return o}getBullsEyeCorners(t){let e=t,n=t,r=t,s=t,i=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let t=this.getFirstDifferent(e,i,1,-1),o=this.getFirstDifferent(n,i,1,1),a=this.getFirstDifferent(r,i,-1,1),l=this.getFirstDifferent(s,i,-1,-1);if(this.nbCenterLayers>2){let n=this.distancePoint(l,t)*this.nbCenterLayers/(this.distancePoint(s,e)*(this.nbCenterLayers+2));if(n<.75||n>1.25||!this.isWhiteOrBlackRectangle(t,o,a,l))break}e=t,n=o,r=a,s=l,i=!i}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new v;this.compact=5===this.nbCenterLayers;let o=new nt(e.getX()+.5,e.getY()-.5),a=new nt(n.getX()+.5,n.getY()+.5),l=new nt(r.getX()-.5,r.getY()+.5),c=new nt(s.getX()-.5,s.getY()-.5);return this.expandSquare([o,a,l,c],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,e,n,r;try{let s=new it(this.image).detect();t=s[0],e=s[1],n=s[2],r=s[3]}catch(o){let s=this.image.getWidth()/2,i=this.image.getHeight()/2;t=this.getFirstDifferent(new ut(s+7,i-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new ut(s+7,i+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ut(s-7,i+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new ut(s-7,i-7),!1,-1,-1).toResultPoint()}let s=tt.round((t.getX()+r.getX()+e.getX()+n.getX())/4),i=tt.round((t.getY()+r.getY()+e.getY()+n.getY())/4);try{let o=new it(this.image,15,s,i).detect();t=o[0],e=o[1],n=o[2],r=o[3]}catch(o){t=this.getFirstDifferent(new ut(s+7,i-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new ut(s+7,i+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ut(s-7,i+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new ut(s-7,i-7),!1,-1,-1).toResultPoint()}return s=tt.round((t.getX()+r.getX()+e.getX()+n.getX())/4),i=tt.round((t.getY()+r.getY()+e.getY()+n.getY())/4),new ut(s,i)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,e,n,r,s){let i=ct.getInstance(),o=this.getDimension(),a=o/2-this.nbCenterLayers,l=o/2+this.nbCenterLayers;return i.sampleGrid(t,o,o,a,a,l,a,l,l,a,l,e.getX(),e.getY(),n.getX(),n.getY(),r.getX(),r.getY(),s.getX(),s.getY())}sampleLine(t,e,n){let r=0,s=this.distanceResultPoint(t,e),i=s/n,o=t.getX(),a=t.getY(),l=i*(e.getX()-t.getX())/s,c=i*(e.getY()-t.getY())/s;for(let u=0;u<n;u++)this.image.get(tt.round(o+u*l),tt.round(a+u*c))&&(r|=1<<n-u-1);return r}isWhiteOrBlackRectangle(t,e,n,r){t=new ut(t.getX()-3,t.getY()+3),e=new ut(e.getX()-3,e.getY()-3),n=new ut(n.getX()+3,n.getY()-3),r=new ut(r.getX()+3,r.getY()+3);let s=this.getColor(r,t);if(0===s)return!1;let i=this.getColor(t,e);return i===s&&(i=this.getColor(e,n),i===s&&(i=this.getColor(n,r),i===s))}getColor(t,e){let n=this.distancePoint(t,e),r=(e.getX()-t.getX())/n,s=(e.getY()-t.getY())/n,i=0,o=t.getX(),a=t.getY(),l=this.image.get(t.getX(),t.getY()),c=Math.ceil(n);for(let h=0;h<c;h++)o+=r,a+=s,this.image.get(tt.round(o),tt.round(a))!==l&&i++;let u=i/n;return u>.1&&u<.9?0:u<=.1===l?1:-1}getFirstDifferent(t,e,n,r){let s=t.getX()+n,i=t.getY()+r;for(;this.isValid(s,i)&&this.image.get(s,i)===e;)s+=n,i+=r;for(s-=n,i-=r;this.isValid(s,i)&&this.image.get(s,i)===e;)s+=n;for(s-=n;this.isValid(s,i)&&this.image.get(s,i)===e;)i+=r;return i-=r,new ut(s,i)}expandSquare(t,e,n){let r=n/(2*e),s=t[0].getX()-t[2].getX(),i=t[0].getY()-t[2].getY(),o=(t[0].getX()+t[2].getX())/2,a=(t[0].getY()+t[2].getY())/2,l=new nt(o+r*s,a+r*i),c=new nt(o-r*s,a-r*i);return s=t[1].getX()-t[3].getX(),i=t[1].getY()-t[3].getY(),o=(t[1].getX()+t[3].getX())/2,a=(t[1].getY()+t[3].getY())/2,[l,new nt(o+r*s,a+r*i),c,new nt(o-r*s,a-r*i)]}isValid(t,e){return t>=0&&t<this.image.getWidth()&&e>0&&e<this.image.getHeight()}isValidPoint(t){let e=tt.round(t.getX()),n=tt.round(t.getY());return this.isValid(e,n)}distancePoint(t,e){return tt.distance(t.getX(),t.getY(),e.getX(),e.getY())}distanceResultPoint(t,e){return tt.distance(t.getX(),t.getY(),e.getX(),e.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(g.truncDivision(this.nbLayers-4,8)+1)+15}}class dt{decode(t,e=null){let n=null,r=new ht(t.getBlackMatrix()),s=null,i=null;try{let t=r.detectMirror(!1);s=t.getPoints(),this.reportFoundResultPoints(e,s),i=(new J).decode(t)}catch(c){n=c}if(null==i)try{let t=r.detectMirror(!0);s=t.getPoints(),this.reportFoundResultPoints(e,s),i=(new J).decode(t)}catch(c){if(null!=n)throw n;throw c}let o=new x(i.getText(),i.getRawBytes(),i.getNumBits(),s,L.AZTEC,u.currentTimeMillis()),a=i.getByteSegments();null!=a&&o.putMetadata(G.BYTE_SEGMENTS,a);let l=i.getECLevel();return null!=l&&o.putMetadata(G.ERROR_CORRECTION_LEVEL,l),o}reportFoundResultPoints(t,e){if(null!=t){let n=t.get(w.NEED_RESULT_POINT_CALLBACK);null!=n&&e.forEach((t,e,r)=>{n.foundPossibleResultPoint(t)})}}reset(){}}class ft{decode(t,e){try{return this.doDecode(t,e)}catch(n){if(e&&!0===e.get(w.TRY_HARDER)&&t.isRotateSupported()){const n=t.rotateCounterClockwise(),r=this.doDecode(n,e),s=r.getResultMetadata();let i=270;null!==s&&!0===s.get(G.ORIENTATION)&&(i+=s.get(G.ORIENTATION)%360),r.putMetadata(G.ORIENTATION,i);const o=r.getResultPoints();if(null!==o){const t=n.getHeight();for(let e=0;e<o.length;e++)o[e]=new nt(t-o[e].getY()-1,o[e].getX())}return r}throw new v}}reset(){}doDecode(t,e){const n=t.getWidth(),r=t.getHeight();let s=new p(n);const i=e&&!0===e.get(w.TRY_HARDER),o=Math.max(1,r>>(i?8:5));let a;a=i?r:15;const l=Math.trunc(r/2);for(let h=0;h<a;h++){const i=Math.trunc((h+1)/2),a=l+o*(0==(1&h)?i:-i);if(a<0||a>=r)break;try{s=t.getBlackRow(a,s)}catch(c){continue}for(let t=0;t<2;t++){if(1===t&&(s.reverse(),e&&!0===e.get(w.NEED_RESULT_POINT_CALLBACK))){const t=new Map;e.forEach((e,n)=>t.set(n,e)),t.delete(w.NEED_RESULT_POINT_CALLBACK),e=t}try{const r=this.decodeRow(a,s,e);if(1===t){r.putMetadata(G.ORIENTATION,180);const t=r.getResultPoints();null!==t&&(t[0]=new nt(n-t[0].getX()-1,t[0].getY()),t[1]=new nt(n-t[1].getX()-1,t[1].getY()))}return r}catch(u){}}}throw new v}static recordPattern(t,e,n){const r=n.length;for(let l=0;l<r;l++)n[l]=0;const s=t.getSize();if(e>=s)throw new v;let i=!t.get(e),o=0,a=e;for(;a<s;){if(t.get(a)!==i)n[o]++;else{if(++o===r)break;n[o]=1,i=!i}a++}if(o!==r&&(o!==r-1||a!==s))throw new v}static recordPatternInReverse(t,e,n){let r=n.length,s=t.get(e);for(;e>0&&r>=0;)t.get(--e)!==s&&(r--,s=!s);if(r>=0)throw new v;ft.recordPattern(t,e+1,n)}static patternMatchVariance(t,e,n){const r=t.length;let s=0,i=0;for(let l=0;l<r;l++)s+=t[l],i+=e[l];if(s<i)return Number.POSITIVE_INFINITY;const o=s/i;n*=o;let a=0;for(let l=0;l<r;l++){const r=t[l],s=e[l]*o,i=r>s?r-s:s-r;if(i>n)return Number.POSITIVE_INFINITY;a+=i}return a/s}}class gt extends ft{static findStartPattern(t){const e=t.getSize(),n=t.getNextSet(0);let r=0,s=Int32Array.from([0,0,0,0,0,0]),i=n,o=!1;for(let a=n;a<e;a++)if(t.get(a)!==o)s[r]++;else{if(5===r){let e=gt.MAX_AVG_VARIANCE,n=-1;for(let t=gt.CODE_START_A;t<=gt.CODE_START_C;t++){const r=ft.patternMatchVariance(s,gt.CODE_PATTERNS[t],gt.MAX_INDIVIDUAL_VARIANCE);r<e&&(e=r,n=t)}if(n>=0&&t.isRange(Math.max(0,i-(a-i)/2),i,!1))return Int32Array.from([i,a,n]);i+=s[0]+s[1],s=s.slice(2,s.length-1),s[r-1]=0,s[r]=0,r--}else r++;s[r]=1,o=!o}throw new v}static decodeCode(t,e,n){ft.recordPattern(t,n,e);let r=gt.MAX_AVG_VARIANCE,s=-1;for(let i=0;i<gt.CODE_PATTERNS.length;i++){const t=this.patternMatchVariance(e,gt.CODE_PATTERNS[i],gt.MAX_INDIVIDUAL_VARIANCE);t<r&&(r=t,s=i)}if(s>=0)return s;throw new v}decodeRow(t,e,n){const r=n&&!0===n.get(w.ASSUME_GS1),s=gt.findStartPattern(e),i=s[2];let o=0;const a=new Uint8Array(20);let c;switch(a[o++]=i,i){case gt.CODE_START_A:c=gt.CODE_CODE_A;break;case gt.CODE_START_B:c=gt.CODE_CODE_B;break;case gt.CODE_START_C:c=gt.CODE_CODE_C;break;default:throw new _}let u=!1,h=!1,d="",f=s[0],g=s[1];const p=Int32Array.from([0,0,0,0,0,0]);let m=0,y=0,E=i,C=0,A=!0,S=!1,I=!1;for(;!u;){const t=h;switch(h=!1,m=y,y=gt.decodeCode(e,p,g),a[o++]=y,y!==gt.CODE_STOP&&(A=!0),y!==gt.CODE_STOP&&(C++,E+=C*y),f=g,g+=p.reduce((t,e)=>t+e,0),y){case gt.CODE_START_A:case gt.CODE_START_B:case gt.CODE_START_C:throw new _}switch(c){case gt.CODE_CODE_A:if(y<64)d+=String.fromCharCode(I===S?" ".charCodeAt(0)+y:" ".charCodeAt(0)+y+128),I=!1;else if(y<96)d+=String.fromCharCode(I===S?y-64:y+64),I=!1;else switch(y!==gt.CODE_STOP&&(A=!1),y){case gt.CODE_FNC_1:r&&(d+=0===d.length?"]C1":String.fromCharCode(29));break;case gt.CODE_FNC_2:case gt.CODE_FNC_3:break;case gt.CODE_FNC_4_A:!S&&I?(S=!0,I=!1):S&&I?(S=!1,I=!1):I=!0;break;case gt.CODE_SHIFT:h=!0,c=gt.CODE_CODE_B;break;case gt.CODE_CODE_B:c=gt.CODE_CODE_B;break;case gt.CODE_CODE_C:c=gt.CODE_CODE_C;break;case gt.CODE_STOP:u=!0}break;case gt.CODE_CODE_B:if(y<96)d+=String.fromCharCode(I===S?" ".charCodeAt(0)+y:" ".charCodeAt(0)+y+128),I=!1;else switch(y!==gt.CODE_STOP&&(A=!1),y){case gt.CODE_FNC_1:r&&(d+=0===d.length?"]C1":String.fromCharCode(29));break;case gt.CODE_FNC_2:case gt.CODE_FNC_3:break;case gt.CODE_FNC_4_B:!S&&I?(S=!0,I=!1):S&&I?(S=!1,I=!1):I=!0;break;case gt.CODE_SHIFT:h=!0,c=gt.CODE_CODE_A;break;case gt.CODE_CODE_A:c=gt.CODE_CODE_A;break;case gt.CODE_CODE_C:c=gt.CODE_CODE_C;break;case gt.CODE_STOP:u=!0}break;case gt.CODE_CODE_C:if(y<100)y<10&&(d+="0"),d+=y;else switch(y!==gt.CODE_STOP&&(A=!1),y){case gt.CODE_FNC_1:r&&(d+=0===d.length?"]C1":String.fromCharCode(29));break;case gt.CODE_CODE_A:c=gt.CODE_CODE_A;break;case gt.CODE_CODE_B:c=gt.CODE_CODE_B;break;case gt.CODE_STOP:u=!0}}t&&(c=c===gt.CODE_CODE_A?gt.CODE_CODE_B:gt.CODE_CODE_A)}const b=g-f;if(g=e.getNextUnset(g),!e.isRange(g,Math.min(e.getSize(),g+(g-f)/2),!1))throw new v;if(E-=C*m,E%103!==m)throw new l;const T=d.length;if(0===T)throw new v;T>0&&A&&(d=d.substring(0,c===gt.CODE_CODE_C?T-2:T-1));const R=(s[1]+s[0])/2,N=f+b/2,O=a.length,D=new Uint8Array(O);for(let l=0;l<O;l++)D[l]=a[l];const P=[new nt(R,t),new nt(N,t)];return new x(d,D,0,P,L.CODE_128,(new Date).getTime())}}gt.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],gt.MAX_AVG_VARIANCE=.25,gt.MAX_INDIVIDUAL_VARIANCE=.7,gt.CODE_SHIFT=98,gt.CODE_CODE_C=99,gt.CODE_CODE_B=100,gt.CODE_CODE_A=101,gt.CODE_FNC_1=102,gt.CODE_FNC_2=97,gt.CODE_FNC_3=96,gt.CODE_FNC_4_A=101,gt.CODE_FNC_4_B=100,gt.CODE_START_A=103,gt.CODE_START_B=104,gt.CODE_START_C=105,gt.CODE_STOP=106;class pt extends ft{constructor(t=!1,e=!1){super(),this.usingCheckDigit=t,this.extendedMode=e,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,e,n){let r=this.counters;r.fill(0),this.decodeRowResult="";let s,i,o=pt.findAsteriskPattern(e,r),a=e.getNextSet(o[1]),c=e.getSize();do{pt.recordPattern(e,a,r);let t=pt.toNarrowWidePattern(r);if(t<0)throw new v;s=pt.patternToChar(t),this.decodeRowResult+=s,i=a;for(let e of r)a+=e;a=e.getNextSet(a)}while("*"!==s);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let u,h=0;for(let l of r)h+=l;if(a!==c&&2*(a-i-h)<h)throw new v;if(this.usingCheckDigit){let t=this.decodeRowResult.length-1,e=0;for(let n=0;n<t;n++)e+=pt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(n));if(this.decodeRowResult.charAt(t)!==pt.ALPHABET_STRING.charAt(e%43))throw new l;this.decodeRowResult=this.decodeRowResult.substring(0,t)}if(0===this.decodeRowResult.length)throw new v;u=this.extendedMode?pt.decodeExtended(this.decodeRowResult):this.decodeRowResult;let d=i+h/2;return new x(u,null,0,[new nt((o[1]+o[0])/2,t),new nt(d,t)],L.CODE_39,(new Date).getTime())}static findAsteriskPattern(t,e){let n=t.getSize(),r=t.getNextSet(0),s=0,i=r,o=!1,a=e.length;for(let l=r;l<n;l++)if(t.get(l)!==o)e[s]++;else{if(s===a-1){if(this.toNarrowWidePattern(e)===pt.ASTERISK_ENCODING&&t.isRange(Math.max(0,i-Math.floor((l-i)/2)),i,!1))return[i,l];i+=e[0]+e[1],e.copyWithin(0,2,2+s-1),e[s-1]=0,e[s]=0,s--}else s++;e[s]=1,o=!o}throw new v}static toNarrowWidePattern(t){let e,n=t.length,r=0;do{let s=2147483647;for(let e of t)e<s&&e>r&&(s=e);r=s,e=0;let i=0,o=0;for(let a=0;a<n;a++){let s=t[a];s>r&&(o|=1<<n-1-a,e++,i+=s)}if(3===e){for(let s=0;s<n&&e>0;s++){let n=t[s];if(n>r&&(e--,2*n>=i))return-1}return o}}while(e>3);return-1}static patternToChar(t){for(let e=0;e<pt.CHARACTER_ENCODINGS.length;e++)if(pt.CHARACTER_ENCODINGS[e]===t)return pt.ALPHABET_STRING.charAt(e);if(t===pt.ASTERISK_ENCODING)return"*";throw new v}static decodeExtended(t){let e=t.length,n="";for(let r=0;r<e;r++){let e=t.charAt(r);if("+"===e||"$"===e||"%"===e||"/"===e){let s=t.charAt(r+1),i="\0";switch(e){case"+":if(!(s>="A"&&s<="Z"))throw new _;i=String.fromCharCode(s.charCodeAt(0)+32);break;case"$":if(!(s>="A"&&s<="Z"))throw new _;i=String.fromCharCode(s.charCodeAt(0)-64);break;case"%":if(s>="A"&&s<="E")i=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")i=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")i=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")i=String.fromCharCode(s.charCodeAt(0)+43);else if("U"===s)i="\0";else if("V"===s)i="@";else if("W"===s)i="`";else{if("X"!==s&&"Y"!==s&&"Z"!==s)throw new _;i="\x7f"}break;case"/":if(s>="A"&&s<="O")i=String.fromCharCode(s.charCodeAt(0)-32);else{if("Z"!==s)throw new _;i=":"}}n+=i,r++}else n+=e}return n}}pt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",pt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],pt.ASTERISK_ENCODING=148;class mt extends ft{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,e,n){let r=this.decodeStart(e),s=this.decodeEnd(e),i=new S;mt.decodeMiddle(e,r[1],s[0],i);let o=i.toString(),a=null;null!=n&&(a=n.get(w.ALLOWED_LENGTHS)),null==a&&(a=mt.DEFAULT_ALLOWED_LENGTHS);let l=o.length,c=!1,u=0;for(let d of a){if(l===d){c=!0;break}d>u&&(u=d)}if(!c&&l>u&&(c=!0),!c)throw new _;const h=[new nt(r[1],t),new nt(s[0],t)];return new x(o,null,0,h,L.ITF,(new Date).getTime())}static decodeMiddle(t,e,n,r){let s=new Int32Array(10),i=new Int32Array(5),o=new Int32Array(5);for(s.fill(0),i.fill(0),o.fill(0);e<n;){ft.recordPattern(t,e,s);for(let t=0;t<5;t++){let e=2*t;i[t]=s[e],o[t]=s[e+1]}let n=mt.decodeDigit(i);r.append(n.toString()),n=this.decodeDigit(o),r.append(n.toString()),s.forEach(function(t){e+=t})}}decodeStart(t){let e=mt.skipWhiteSpace(t),n=mt.findGuardPattern(t,e,mt.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(t,n[0]),n}validateQuietZone(t,e){let n=10*this.narrowLineWidth;n=n<e?n:e;for(let r=e-1;n>0&&r>=0&&!t.get(r);r--)n--;if(0!==n)throw new v}static skipWhiteSpace(t){const e=t.getSize(),n=t.getNextSet(0);if(n===e)throw new v;return n}decodeEnd(t){t.reverse();try{let n,r=mt.skipWhiteSpace(t);try{n=mt.findGuardPattern(t,r,mt.END_PATTERN_REVERSED[0])}catch(e){e instanceof v&&(n=mt.findGuardPattern(t,r,mt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,n[0]);let s=n[0];return n[0]=t.getSize()-n[1],n[1]=t.getSize()-s,n}finally{t.reverse()}}static findGuardPattern(t,e,n){let r=n.length,s=new Int32Array(r),i=t.getSize(),o=!1,a=0,l=e;s.fill(0);for(let c=e;c<i;c++)if(t.get(c)!==o)s[a]++;else{if(a===r-1){if(ft.patternMatchVariance(s,n,mt.MAX_INDIVIDUAL_VARIANCE)<mt.MAX_AVG_VARIANCE)return[l,c];l+=s[0]+s[1],u.arraycopy(s,2,s,0,a-1),s[a-1]=0,s[a]=0,a--}else a++;s[a]=1,o=!o}throw new v}static decodeDigit(t){let e=mt.MAX_AVG_VARIANCE,n=-1,r=mt.PATTERNS.length;for(let s=0;s<r;s++){let r=ft.patternMatchVariance(t,mt.PATTERNS[s],mt.MAX_INDIVIDUAL_VARIANCE);r<e?(e=r,n=s):r===e&&(n=-1)}if(n>=0)return n%10;throw new v}}mt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],mt.MAX_AVG_VARIANCE=.38,mt.MAX_INDIVIDUAL_VARIANCE=.5,mt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],mt.START_PATTERN=Int32Array.from([1,1,1,1]),mt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class wt extends ft{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let e,n=!1,r=0,s=Int32Array.from([0,0,0]);for(;!n;){s=Int32Array.from([0,0,0]),e=wt.findGuardPattern(t,r,!1,this.START_END_PATTERN,s);let i=e[0];r=e[1];let o=i-(r-i);o>=0&&(n=t.isRange(o,i,!1))}return e}static checkChecksum(t){return wt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let e=t.length;if(0===e)return!1;let n=parseInt(t.charAt(e-1),10);return wt.getStandardUPCEANChecksum(t.substring(0,e-1))===n}static getStandardUPCEANChecksum(t){let e=t.length,n=0;for(let r=e-1;r>=0;r-=2){let e=t.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9)throw new _;n+=e}n*=3;for(let r=e-2;r>=0;r-=2){let e=t.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9)throw new _;n+=e}return(1e3-n)%10}static decodeEnd(t,e){return wt.findGuardPattern(t,e,!1,wt.START_END_PATTERN,new Int32Array(wt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,e,n,r){return this.findGuardPattern(t,e,n,r,new Int32Array(r.length))}static findGuardPattern(t,e,n,r,s){let i=t.getSize(),o=0,a=e=n?t.getNextUnset(e):t.getNextSet(e),l=r.length,c=n;for(let u=e;u<i;u++)if(t.get(u)!==c)s[o]++;else{if(o===l-1){if(ft.patternMatchVariance(s,r,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE)return Int32Array.from([a,u]);a+=s[0]+s[1];let t=s.slice(2,s.length-1);for(let e=0;e<o-1;e++)s[e]=t[e];s[o-1]=0,s[o]=0,o--}else o++;s[o]=1,c=!c}throw new v}static decodeDigit(t,e,n,r){this.recordPattern(t,n,e);let s=this.MAX_AVG_VARIANCE,i=-1,o=r.length;for(let a=0;a<o;a++){let t=ft.patternMatchVariance(e,r[a],wt.MAX_INDIVIDUAL_VARIANCE);t<s&&(s=t,i=a)}if(i>=0)return i;throw new v}}wt.MAX_AVG_VARIANCE=.48,wt.MAX_INDIVIDUAL_VARIANCE=.7,wt.START_END_PATTERN=Int32Array.from([1,1,1]),wt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),wt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),wt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class _t{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,e,n){let r=this.decodeRowStringBuffer,s=this.decodeMiddle(e,n,r),i=r.toString(),o=_t.parseExtensionString(i),a=[new nt((n[0]+n[1])/2,t),new nt(s,t)],l=new x(i,null,0,a,L.UPC_EAN_EXTENSION,(new Date).getTime());return null!=o&&l.putAllMetadata(o),l}decodeMiddle(t,e,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let s=t.getSize(),i=e[1],o=0;for(let l=0;l<5&&i<s;l++){let e=wt.decodeDigit(t,r,i,wt.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+e%10);for(let t of r)i+=t;e>=10&&(o|=1<<4-l),4!==l&&(i=t.getNextSet(i),i=t.getNextUnset(i))}if(5!==n.length)throw new v;let a=this.determineCheckDigit(o);if(_t.extensionChecksum(n.toString())!==a)throw new v;return i}static extensionChecksum(t){let e=t.length,n=0;for(let r=e-2;r>=0;r-=2)n+=t.charAt(r).charCodeAt(0)-"0".charCodeAt(0);n*=3;for(let r=e-1;r>=0;r-=2)n+=t.charAt(r).charCodeAt(0)-"0".charCodeAt(0);return n*=3,n%10}determineCheckDigit(t){for(let e=0;e<10;e++)if(t===this.CHECK_DIGIT_ENCODINGS[e])return e;throw new v}static parseExtensionString(t){if(5!==t.length)return null;let e=_t.parseExtension5String(t);return null==e?null:new Map([[G.SUGGESTED_PRICE,e]])}static parseExtension5String(t){let e;switch(t.charAt(0)){case"0":e="\xa3";break;case"5":e="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}e="";break;default:e=""}let n=parseInt(t.substring(1)),r=n%100;return e+(n/100).toString()+"."+(r<10?"0"+r:r.toString())}}class yt{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,e,n){let r=this.decodeRowStringBuffer,s=this.decodeMiddle(e,n,r),i=r.toString(),o=yt.parseExtensionString(i),a=[new nt((n[0]+n[1])/2,t),new nt(s,t)],l=new x(i,null,0,a,L.UPC_EAN_EXTENSION,(new Date).getTime());return null!=o&&l.putAllMetadata(o),l}decodeMiddle(t,e,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let s=t.getSize(),i=e[1],o=0;for(let a=0;a<2&&i<s;a++){let e=wt.decodeDigit(t,r,i,wt.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+e%10);for(let t of r)i+=t;e>=10&&(o|=1<<1-a),1!==a&&(i=t.getNextSet(i),i=t.getNextUnset(i))}if(2!==n.length)throw new v;if(parseInt(n.toString())%4!==o)throw new v;return i}static parseExtensionString(t){return 2!==t.length?null:new Map([[G.ISSUE_NUMBER,parseInt(t)]])}}class Et{static decodeRow(t,e,n){let r=wt.findGuardPattern(e,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new _t).decodeRow(t,e,r)}catch(s){return(new yt).decodeRow(t,e,r)}}}Et.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ct extends wt{constructor(){super(),this.decodeRowStringBuffer="",Ct.L_AND_G_PATTERNS=Ct.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let e=Ct.L_PATTERNS[t-10],n=new Int32Array(e.length);for(let t=0;t<e.length;t++)n[t]=e[e.length-t-1];Ct.L_AND_G_PATTERNS[t]=n}}decodeRow(t,e,n){let r=Ct.findStartGuardPattern(e),s=null==n?null:n.get(w.NEED_RESULT_POINT_CALLBACK);if(null!=s){const e=new nt((r[0]+r[1])/2,t);s.foundPossibleResultPoint(e)}let i=this.decodeMiddle(e,r,this.decodeRowStringBuffer),o=i.rowOffset,a=i.resultString;if(null!=s){const e=new nt(o,t);s.foundPossibleResultPoint(e)}let c=Ct.decodeEnd(e,o);if(null!=s){const e=new nt((c[0]+c[1])/2,t);s.foundPossibleResultPoint(e)}let u=c[1],h=u+(u-c[0]);if(h>=e.getSize()||!e.isRange(u,h,!1))throw new v;let d=a.toString();if(d.length<8)throw new _;if(!Ct.checkChecksum(d))throw new l;let f=(r[1]+r[0])/2,g=(c[1]+c[0])/2,p=this.getBarcodeFormat(),m=[new nt(f,t),new nt(g,t)],y=new x(d,null,0,m,p,(new Date).getTime()),E=0;try{let n=Et.decodeRow(t,e,c[1]);y.putMetadata(G.UPC_EAN_EXTENSION,n.getText()),y.putAllMetadata(n.getResultMetadata()),y.addResultPoints(n.getResultPoints()),E=n.getText().length}catch(A){}let C=null==n?null:n.get(w.ALLOWED_EAN_EXTENSIONS);if(null!=C){let t=!1;for(let e in C)if(E.toString()===e){t=!0;break}if(!t)throw new v}return y}static checkChecksum(t){return Ct.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let e=t.length;if(0===e)return!1;let n=parseInt(t.charAt(e-1),10);return Ct.getStandardUPCEANChecksum(t.substring(0,e-1))===n}static getStandardUPCEANChecksum(t){let e=t.length,n=0;for(let r=e-1;r>=0;r-=2){let e=t.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9)throw new _;n+=e}n*=3;for(let r=e-2;r>=0;r-=2){let e=t.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9)throw new _;n+=e}return(1e3-n)%10}static decodeEnd(t,e){return Ct.findGuardPattern(t,e,!1,Ct.START_END_PATTERN,new Int32Array(Ct.START_END_PATTERN.length).fill(0))}}class At extends Ct{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,e,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let s=t.getSize(),i=e[1],o=0;for(let a=0;a<6&&i<s;a++){let e=Ct.decodeDigit(t,r,i,Ct.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+e%10);for(let t of r)i+=t;e>=10&&(o|=1<<5-a)}n=At.determineFirstDigit(n,o),i=Ct.findGuardPattern(t,i,!0,Ct.MIDDLE_PATTERN,new Int32Array(Ct.MIDDLE_PATTERN.length).fill(0))[1];for(let a=0;a<6&&i<s;a++){let e=Ct.decodeDigit(t,r,i,Ct.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+e);for(let t of r)i+=t}return{rowOffset:i,resultString:n}}getBarcodeFormat(){return L.EAN_13}static determineFirstDigit(t,e){for(let n=0;n<10;n++)if(e===this.FIRST_DIGIT_ENCODINGS[n])return String.fromCharCode("0".charCodeAt(0)+n)+t;throw new v}}At.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class St extends Ct{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,e,n){const r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let s=t.getSize(),i=e[1];for(let o=0;o<4&&i<s;o++){let e=Ct.decodeDigit(t,r,i,Ct.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+e);for(let t of r)i+=t}i=Ct.findGuardPattern(t,i,!0,Ct.MIDDLE_PATTERN,new Int32Array(Ct.MIDDLE_PATTERN.length).fill(0))[1];for(let o=0;o<4&&i<s;o++){let e=Ct.decodeDigit(t,r,i,Ct.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+e);for(let t of r)i+=t}return{rowOffset:i,resultString:n}}getBarcodeFormat(){return L.EAN_8}}class It extends Ct{constructor(){super(...arguments),this.ean13Reader=new At}getBarcodeFormat(){return L.UPC_A}decode(t,e){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,e,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,e,n))}decodeMiddle(t,e,n){return this.ean13Reader.decodeMiddle(t,e,n)}maybeReturnResult(t){let e=t.getText();if("0"===e.charAt(0)){let n=new x(e.substring(1),null,null,t.getResultPoints(),L.UPC_A);return null!=t.getResultMetadata()&&n.putAllMetadata(t.getResultMetadata()),n}throw new v}reset(){this.ean13Reader.reset()}}class vt extends Ct{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,e,n){const r=this.decodeMiddleCounters.map(t=>t);r[0]=0,r[1]=0,r[2]=0,r[3]=0;const s=t.getSize();let i=e[1],o=0;for(let a=0;a<6&&i<s;a++){const e=vt.decodeDigit(t,r,i,vt.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+e%10);for(let t of r)i+=t;e>=10&&(o|=1<<5-a)}return vt.determineNumSysAndCheckDigit(new S(n),o),i}decodeEnd(t,e){return vt.findGuardPatternWithoutCounters(t,e,!0,vt.MIDDLE_END_PATTERN)}checkChecksum(t){return Ct.checkChecksum(vt.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,e){for(let n=0;n<=1;n++)for(let r=0;r<10;r++)if(e===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r])return t.insert(0,"0"+n),void t.append("0"+r);throw v.getNotFoundInstance()}getBarcodeFormat(){return L.UPC_E}static convertUPCEtoUPCA(t){const e=t.slice(1,7).split("").map(t=>t.charCodeAt(0)),n=new S;n.append(t.charAt(0));let r=e[5];switch(r){case 0:case 1:case 2:n.appendChars(e,0,2),n.append(r),n.append("0000"),n.appendChars(e,2,3);break;case 3:n.appendChars(e,0,3),n.append("00000"),n.appendChars(e,3,2);break;case 4:n.appendChars(e,0,4),n.append("00000"),n.append(e[4]);break;default:n.appendChars(e,0,5),n.append("0000"),n.append(r)}return t.length>=8&&n.append(t.charAt(7)),n.toString()}}vt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),vt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])];class bt extends ft{constructor(t){super();let e=null==t?null:t.get(w.POSSIBLE_FORMATS),n=[];null!=e&&(e.indexOf(L.EAN_13)>-1?n.push(new At):e.indexOf(L.UPC_A)>-1&&n.push(new It),e.indexOf(L.EAN_8)>-1&&n.push(new St),e.indexOf(L.UPC_E)>-1&&n.push(new vt)),0===n.length&&(n.push(new At),n.push(new St),n.push(new vt)),this.readers=n}decodeRow(t,e,n){for(let s of this.readers)try{const r=s.decodeRow(t,e,n),i=r.getBarcodeFormat()===L.EAN_13&&"0"===r.getText().charAt(0),o=null==n?null:n.get(w.POSSIBLE_FORMATS),a=null==o||o.includes(L.UPC_A);if(i&&a){const t=r.getRawBytes(),e=new x(r.getText().substring(1),t,t.length,r.getResultPoints(),L.UPC_A);return e.putAllMetadata(r.getResultMetadata()),e}return r}catch(r){}throw new v}reset(){for(let t of this.readers)t.reset()}}class Tt extends ft{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,e){for(let n=0;n<e.length;n++)if(ft.patternMatchVariance(t,e[n],Tt.MAX_INDIVIDUAL_VARIANCE)<Tt.MAX_AVG_VARIANCE)return n;throw new v}static count(t){return tt.sum(new Int32Array(t))}static increment(t,e){let n=0,r=e[0];for(let s=1;s<t.length;s++)e[s]>r&&(r=e[s],n=s);t[n]++}static decrement(t,e){let n=0,r=e[0];for(let s=1;s<t.length;s++)e[s]<r&&(r=e[s],n=s);t[n]--}static isFinderPattern(t){let e=t[0]+t[1],n=e/(e+t[2]+t[3]);if(n>=Tt.MIN_FINDER_PATTERN_RATIO&&n<=Tt.MAX_FINDER_PATTERN_RATIO){let e=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;for(let r of t)r>n&&(n=r),r<e&&(e=r);return n<10*e}return!1}}Tt.MAX_AVG_VARIANCE=.2,Tt.MAX_INDIVIDUAL_VARIANCE=.45,Tt.MIN_FINDER_PATTERN_RATIO=9.5/12,Tt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Rt{constructor(t,e){this.value=t,this.checksumPortion=e}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){return t instanceof Rt&&this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Nt{constructor(t,e,n,r,s){this.value=t,this.startEnd=e,this.value=t,this.startEnd=e,this.resultPoints=new Array,this.resultPoints.push(new nt(n,s)),this.resultPoints.push(new nt(r,s))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){return t instanceof Nt&&this.value===t.value}hashCode(){return this.value}}class Ot{constructor(){}static getRSSvalue(t,e,n){let r=0;for(let a of t)r+=a;let s=0,i=0,o=t.length;for(let a=0;a<o-1;a++){let l;for(l=1,i|=1<<a;l<t[a];l++,i&=~(1<<a)){let t=Ot.combins(r-l-1,o-a-2);if(n&&0===i&&r-l-(o-a-1)>=o-a-1&&(t-=Ot.combins(r-l-(o-a),o-a-2)),o-a-1>1){let n=0;for(let t=r-l-(o-a-2);t>e;t--)n+=Ot.combins(r-l-t-1,o-a-3);t-=n*(o-1-a)}else r-l>e&&t--;s+=t}r-=l}return s}static combins(t,e){let n,r;t-e>e?(r=e,n=t-e):(r=t-e,n=e);let s=1,i=1;for(let o=t;o>n;o--)s*=o,i<=r&&(s/=i,i++);for(;i<=r;)s/=i,i++;return s}}class Dt{constructor(t,e){e?this.decodedInformation=null:(this.finished=t,this.decodedInformation=e)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Pt{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class Mt extends Pt{constructor(t,e){super(t),this.value=e}getValue(){return this.value}isFNC1(){return this.value===Mt.FNC1}}Mt.FNC1="$";class Bt extends Pt{constructor(t,e,n){super(t),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=e}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class xt extends Pt{constructor(t,e,n){if(super(t),e<0||e>10||n<0||n>10)throw new _;this.firstDigit=e,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===xt.FNC1}isSecondDigitFNC1(){return this.secondDigit===xt.FNC1}isAnyFNC1(){return this.firstDigit===xt.FNC1||this.secondDigit===xt.FNC1}}xt.FNC1=10;class kt{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new v;let e=t.substring(0,2);for(let s of kt.TWO_DIGIT_DATA_LENGTH)if(s[0]===e)return s[1]===kt.VARIABLE_LENGTH?kt.processVariableAI(2,s[2],t):kt.processFixedAI(2,s[1],t);if(t.length<3)throw new v;let n=t.substring(0,3);for(let s of kt.THREE_DIGIT_DATA_LENGTH)if(s[0]===n)return s[1]===kt.VARIABLE_LENGTH?kt.processVariableAI(3,s[2],t):kt.processFixedAI(3,s[1],t);for(let s of kt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(s[0]===n)return s[1]===kt.VARIABLE_LENGTH?kt.processVariableAI(4,s[2],t):kt.processFixedAI(4,s[1],t);if(t.length<4)throw new v;let r=t.substring(0,4);for(let s of kt.FOUR_DIGIT_DATA_LENGTH)if(s[0]===r)return s[1]===kt.VARIABLE_LENGTH?kt.processVariableAI(4,s[2],t):kt.processFixedAI(4,s[1],t);throw new v}static processFixedAI(t,e,n){if(n.length<t)throw new v;let r=n.substring(0,t);if(n.length<t+e)throw new v;let s=n.substring(t,t+e),i=n.substring(t+e),o="("+r+")"+s,a=kt.parseFieldsInGeneralPurpose(i);return null==a?o:o+a}static processVariableAI(t,e,n){let r,s=n.substring(0,t);r=n.length<t+e?n.length:t+e;let i=n.substring(t,r),o=n.substring(r),a="("+s+")"+i,l=kt.parseFieldsInGeneralPurpose(o);return null==l?a:a+l}}kt.VARIABLE_LENGTH=[],kt.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",kt.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",kt.VARIABLE_LENGTH,20],["22",kt.VARIABLE_LENGTH,29],["30",kt.VARIABLE_LENGTH,8],["37",kt.VARIABLE_LENGTH,8],["90",kt.VARIABLE_LENGTH,30],["91",kt.VARIABLE_LENGTH,30],["92",kt.VARIABLE_LENGTH,30],["93",kt.VARIABLE_LENGTH,30],["94",kt.VARIABLE_LENGTH,30],["95",kt.VARIABLE_LENGTH,30],["96",kt.VARIABLE_LENGTH,30],["97",kt.VARIABLE_LENGTH,3],["98",kt.VARIABLE_LENGTH,30],["99",kt.VARIABLE_LENGTH,30]],kt.THREE_DIGIT_DATA_LENGTH=[["240",kt.VARIABLE_LENGTH,30],["241",kt.VARIABLE_LENGTH,30],["242",kt.VARIABLE_LENGTH,6],["250",kt.VARIABLE_LENGTH,30],["251",kt.VARIABLE_LENGTH,30],["253",kt.VARIABLE_LENGTH,17],["254",kt.VARIABLE_LENGTH,20],["400",kt.VARIABLE_LENGTH,30],["401",kt.VARIABLE_LENGTH,30],["402",17],["403",kt.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",kt.VARIABLE_LENGTH,20],["421",kt.VARIABLE_LENGTH,15],["422",3],["423",kt.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],kt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",kt.VARIABLE_LENGTH,15],["391",kt.VARIABLE_LENGTH,18],["392",kt.VARIABLE_LENGTH,15],["393",kt.VARIABLE_LENGTH,18],["703",kt.VARIABLE_LENGTH,30]],kt.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",kt.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",kt.VARIABLE_LENGTH,20],["8003",kt.VARIABLE_LENGTH,30],["8004",kt.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",kt.VARIABLE_LENGTH,30],["8008",kt.VARIABLE_LENGTH,12],["8018",18],["8020",kt.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",kt.VARIABLE_LENGTH,70],["8200",kt.VARIABLE_LENGTH,70]];class Lt{constructor(t){this.buffer=new S,this.information=t}decodeAllCodes(t,e){let n=e,r=null;for(;;){let e=this.decodeGeneralPurposeField(n,r),s=kt.parseFieldsInGeneralPurpose(e.getNewString());if(null!=s&&t.append(s),r=e.isRemaining()?""+e.getRemainingValue():null,n===e.getNewPosition())break;n=e.getNewPosition()}return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let e=t;e<t+3;++e)if(this.information.get(e))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let e=this.extractNumericValueFromBitArray(t,4);return new xt(this.information.getSize(),0===e?xt.FNC1:e-1,xt.FNC1)}let e=this.extractNumericValueFromBitArray(t,7);return new xt(t+7,(e-8)/11,(e-8)%11)}extractNumericValueFromBitArray(t,e){return Lt.extractNumericValueFromBitArray(this.information,t,e)}static extractNumericValueFromBitArray(t,e,n){let r=0;for(let s=0;s<n;++s)t.get(e+s)&&(r|=1<<n-s-1);return r}decodeGeneralPurposeField(t,e){this.buffer.setLengthToZero(),null!=e&&this.buffer.append(e),this.current.setPosition(t);let n=this.parseBlocks();return null!=n&&n.isRemaining()?new Bt(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Bt(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,e;do{let n=this.current.getPosition();if(this.current.isAlpha()?(e=this.parseAlphaBlock(),t=e.isFinished()):this.current.isIsoIec646()?(e=this.parseIsoIec646Block(),t=e.isFinished()):(e=this.parseNumericBlock(),t=e.isFinished()),n===this.current.getPosition()&&!t)break}while(!t);return e.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let e;return e=t.isSecondDigitFNC1()?new Bt(this.current.getPosition(),this.buffer.toString()):new Bt(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new Dt(!0,e)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let t=new Bt(this.current.getPosition(),this.buffer.toString());return new Dt(!0,t)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Dt(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let t=new Bt(this.current.getPosition(),this.buffer.toString());return new Dt(!0,t)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Dt(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let t=new Bt(this.current.getPosition(),this.buffer.toString());return new Dt(!0,t)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Dt(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(t,7);if(n>=64&&n<116)return!0;if(t+8>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,8);return r>=232&&r<253}decodeIsoIec646(t){let e=this.extractNumericValueFromBitArray(t,5);if(15===e)return new Mt(t+5,Mt.FNC1);if(e>=5&&e<15)return new Mt(t+5,"0"+(e-5));let n,r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<90)return new Mt(t+7,""+(r+1));if(r>=90&&r<116)return new Mt(t+7,""+(r+7));switch(this.extractNumericValueFromBitArray(t,8)){case 232:n="!";break;case 233:n='"';break;case 234:n="%";break;case 235:n="&";break;case 236:n="'";break;case 237:n="(";break;case 238:n=")";break;case 239:n="*";break;case 240:n="+";break;case 241:n=",";break;case 242:n="-";break;case 243:n=".";break;case 244:n="/";break;case 245:n=":";break;case 246:n=";";break;case 247:n="<";break;case 248:n="=";break;case 249:n=">";break;case 250:n="?";break;case 251:n="_";break;case 252:n=" ";break;default:throw new _}return new Mt(t+8,n)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(t,6);return n>=16&&n<63}decodeAlphanumeric(t){let e=this.extractNumericValueFromBitArray(t,5);if(15===e)return new Mt(t+5,Mt.FNC1);if(e>=5&&e<15)return new Mt(t+5,"0"+(e-5));let n,r=this.extractNumericValueFromBitArray(t,6);if(r>=32&&r<58)return new Mt(t+6,""+(r+33));switch(r){case 58:n="*";break;case 59:n=",";break;case 60:n="-";break;case 61:n=".";break;case 62:n="/";break;default:throw new K("Decoding invalid alphanumeric value: "+r)}return new Mt(t+6,n)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let e=0;e<5&&e+t<this.information.getSize();++e)if(2===e){if(!this.information.get(t+2))return!1}else if(this.information.get(t+e))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let e=t;e<t+3;++e)if(this.information.get(e))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let e=0;e<4&&e+t<this.information.getSize();++e)if(this.information.get(t+e))return!1;return!0}}class Ft{constructor(t){this.information=t,this.generalDecoder=new Lt(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ut extends Ft{constructor(t){super(t)}encodeCompressedGtin(t,e){t.append("(01)");let n=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,e,n)}encodeCompressedGtinWithoutAI(t,e,n){for(let r=0;r<4;++r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(e+10*r,10);n/100==0&&t.append("0"),n/10==0&&t.append("0"),t.append(n)}Ut.appendCheckDigit(t,n)}static appendCheckDigit(t,e){let n=0;for(let r=0;r<13;r++){let s=t.charAt(r+e).charCodeAt(0)-"0".charCodeAt(0);n+=0==(1&r)?3*s:s}n=10-n%10,10===n&&(n=0),t.append(n)}}Ut.GTIN_SIZE=40;class Vt extends Ut{constructor(t){super(t)}parseInformation(){let t=new S;t.append("(01)");let e=t.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(Vt.HEADER_SIZE,4);return t.append(n),this.encodeCompressedGtinWithoutAI(t,Vt.HEADER_SIZE+4,e),this.getGeneralDecoder().decodeAllCodes(t,Vt.HEADER_SIZE+44)}}Vt.HEADER_SIZE=4;class Ht extends Ft{constructor(t){super(t)}parseInformation(){let t=new S;return this.getGeneralDecoder().decodeAllCodes(t,Ht.HEADER_SIZE)}}Ht.HEADER_SIZE=5;class jt extends Ut{constructor(t){super(t)}encodeCompressedWeight(t,e,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(e,n);this.addWeightCode(t,r);let s=this.checkWeight(r),i=1e5;for(let o=0;o<5;++o)s/i==0&&t.append("0"),i/=10;t.append(s)}}class zt extends jt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=zt.HEADER_SIZE+jt.GTIN_SIZE+zt.WEIGHT_SIZE)throw new v;let t=new S;return this.encodeCompressedGtin(t,zt.HEADER_SIZE),this.encodeCompressedWeight(t,zt.HEADER_SIZE+jt.GTIN_SIZE,zt.WEIGHT_SIZE),t.toString()}}zt.HEADER_SIZE=5,zt.WEIGHT_SIZE=15;class Gt extends zt{constructor(t){super(t)}addWeightCode(t,e){t.append("(3103)")}checkWeight(t){return t}}class Wt extends zt{constructor(t){super(t)}addWeightCode(t,e){t.append(e<1e4?"(3202)":"(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class Xt extends Ut{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Xt.HEADER_SIZE+Ut.GTIN_SIZE)throw new v;let t=new S;this.encodeCompressedGtin(t,Xt.HEADER_SIZE);let e=this.getGeneralDecoder().extractNumericValueFromBitArray(Xt.HEADER_SIZE+Ut.GTIN_SIZE,Xt.LAST_DIGIT_SIZE);t.append("(392"),t.append(e),t.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField(Xt.HEADER_SIZE+Ut.GTIN_SIZE+Xt.LAST_DIGIT_SIZE,null);return t.append(n.getNewString()),t.toString()}}Xt.HEADER_SIZE=8,Xt.LAST_DIGIT_SIZE=2;class Zt extends Ut{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Zt.HEADER_SIZE+Ut.GTIN_SIZE)throw new v;let t=new S;this.encodeCompressedGtin(t,Zt.HEADER_SIZE);let e=this.getGeneralDecoder().extractNumericValueFromBitArray(Zt.HEADER_SIZE+Ut.GTIN_SIZE,Zt.LAST_DIGIT_SIZE);t.append("(393"),t.append(e),t.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(Zt.HEADER_SIZE+Ut.GTIN_SIZE+Zt.LAST_DIGIT_SIZE,Zt.FIRST_THREE_DIGITS_SIZE);n/100==0&&t.append("0"),n/10==0&&t.append("0"),t.append(n);let r=this.getGeneralDecoder().decodeGeneralPurposeField(Zt.HEADER_SIZE+Ut.GTIN_SIZE+Zt.LAST_DIGIT_SIZE+Zt.FIRST_THREE_DIGITS_SIZE,null);return t.append(r.getNewString()),t.toString()}}Zt.HEADER_SIZE=8,Zt.LAST_DIGIT_SIZE=2,Zt.FIRST_THREE_DIGITS_SIZE=10;class Yt extends jt{constructor(t,e,n){super(t),this.dateCode=n,this.firstAIdigits=e}parseInformation(){if(this.getInformation().getSize()!=Yt.HEADER_SIZE+Yt.GTIN_SIZE+Yt.WEIGHT_SIZE+Yt.DATE_SIZE)throw new v;let t=new S;return this.encodeCompressedGtin(t,Yt.HEADER_SIZE),this.encodeCompressedWeight(t,Yt.HEADER_SIZE+Yt.GTIN_SIZE,Yt.WEIGHT_SIZE),this.encodeCompressedDate(t,Yt.HEADER_SIZE+Yt.GTIN_SIZE+Yt.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,e){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(e,Yt.DATE_SIZE);if(38400==n)return;t.append("("),t.append(this.dateCode),t.append(")");let r=n%32;n/=32;let s=n%12+1;n/=12;let i=n;i/10==0&&t.append("0"),t.append(i),s/10==0&&t.append("0"),t.append(s),r/10==0&&t.append("0"),t.append(r)}addWeightCode(t,e){t.append("("),t.append(this.firstAIdigits),t.append(e/1e5),t.append(")")}checkWeight(t){return t%1e5}}function qt(t){try{if(t.get(1))return new Vt(t);if(!t.get(2))return new Ht(t);switch(Lt.extractNumericValueFromBitArray(t,1,4)){case 4:return new Gt(t);case 5:return new Wt(t)}switch(Lt.extractNumericValueFromBitArray(t,1,5)){case 12:return new Xt(t);case 13:return new Zt(t)}switch(Lt.extractNumericValueFromBitArray(t,1,7)){case 56:return new Yt(t,"310","11");case 57:return new Yt(t,"320","11");case 58:return new Yt(t,"310","13");case 59:return new Yt(t,"320","13");case 60:return new Yt(t,"310","15");case 61:return new Yt(t,"320","15");case 62:return new Yt(t,"310","17");case 63:return new Yt(t,"320","17")}}catch(e){throw console.log(e),new K("unknown decoder: "+t)}}Yt.HEADER_SIZE=8,Yt.WEIGHT_SIZE=20,Yt.DATE_SIZE=16;class $t{constructor(t,e,n,r){this.leftchar=t,this.rightchar=e,this.finderpattern=n,this.maybeLast=r}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(t,e){return t instanceof $t&&$t.equalsOrNull(t.leftchar,e.leftchar)&&$t.equalsOrNull(t.rightchar,e.rightchar)&&$t.equalsOrNull(t.finderpattern,e.finderpattern)}static equalsOrNull(t,e){return null===t?null===e:$t.equals(t,e)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Kt{constructor(t,e,n){this.pairs=t,this.rowNumber=e,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,e){return t instanceof Kt&&this.checkEqualitity(t,e)&&t.wasReversed===e.wasReversed}checkEqualitity(t,e){if(!t||!e)return;let n;return t.forEach((t,r)=>{e.forEach(e=>{t.getLeftChar().getValue()===e.getLeftChar().getValue()&&t.getRightChar().getValue()===e.getRightChar().getValue()&&t.getFinderPatter().getValue()===e.getFinderPatter().getValue()&&(n=!0)})}),n}}class Qt extends Tt{constructor(){super(...arguments),this.pairs=new Array(Qt.MAX_PAIRS),this.rows=new Array,this.startEnd=[2]}decodeRow(t,e,n){this.pairs.length=0,this.startFromEven=!1;try{return Qt.constructResult(this.decodeRow2pairs(t,e))}catch(r){}return this.pairs.length=0,this.startFromEven=!0,Qt.constructResult(this.decodeRow2pairs(t,e))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,e){let n,r=!1;for(;!r;)try{this.pairs.push(this.retrieveNextPair(e,this.pairs,t))}catch(s){if(s instanceof v){if(!this.pairs.length)throw new v;r=!0}}if(this.checkChecksum())return this.pairs;if(n=!!this.rows.length,this.storeRow(t,!1),n){let t=this.checkRowsBoolean(!1);if(null!=t)return t;if(t=this.checkRowsBoolean(!0),null!=t)return t}throw new v}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let e=null;try{e=this.checkRows(new Array,0)}catch(n){console.log(n)}return t&&(this.rows=this.rows.reverse()),e}checkRows(t,e){for(let r=e;r<this.rows.length;r++){let e=this.rows[r];this.pairs.length=0;for(let n of t)this.pairs.push(n.getPairs());if(this.pairs.push(e.getPairs()),!Qt.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let s=new Array(t);s.push(e);try{return this.checkRows(s,r+1)}catch(n){console.log(n)}}throw new v}static isValidSequence(t){for(let e of Qt.FINDER_PATTERN_SEQUENCES){if(t.length>e.length)continue;let n=!0;for(let r=0;r<t.length;r++)if(t[r].getFinderPattern().getValue()!=e[r]){n=!1;break}if(n)return!0}return!1}storeRow(t,e){let n=0,r=!1,s=!1;for(;n<this.rows.length;){let e=this.rows[n];if(e.getRowNumber()>t){s=e.isEquivalent(this.pairs);break}r=e.isEquivalent(this.pairs),n++}s||r||Qt.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new Kt(this.pairs,t,e)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,e){for(let n of e)if(n.getPairs().length!==t.length)for(let e of n.getPairs())for(let n of t)if($t.equals(e,n))break}static isPartialRow(t,e){for(let n of e){let e=!0;for(let r of t){let t=!1;for(let e of n.getPairs())if(r.equals(e)){t=!0;break}if(!t){e=!1;break}}if(e)return!0}return!1}getRows(){return this.rows}static constructResult(t){let e=qt(class{static buildBitArray(t){let e=2*t.length-1;null==t[t.length-1].getRightChar()&&(e-=1);let n=new p(12*e),r=0,s=t[0].getRightChar().getValue();for(let i=11;i>=0;--i)0!=(s&1<<i)&&n.set(r),r++;for(let i=1;i<t.length;++i){let e=t[i],s=e.getLeftChar().getValue();for(let t=11;t>=0;--t)0!=(s&1<<t)&&n.set(r),r++;if(null!=e.getRightChar()){let t=e.getRightChar().getValue();for(let e=11;e>=0;--e)0!=(t&1<<e)&&n.set(r),r++}}return n}}.buildBitArray(t)).parseInformation(),n=t[0].getFinderPattern().getResultPoints(),r=t[t.length-1].getFinderPattern().getResultPoints();return new x(e,null,null,[n[0],n[1],r[0],r[1]],L.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),e=t.getLeftChar(),n=t.getRightChar();if(null==n)return!1;let r=n.getChecksumPortion(),s=2;for(let i=1;i<this.pairs.size();++i){let t=this.pairs.get(i);r+=t.getLeftChar().getChecksumPortion(),s++;let e=t.getRightChar();null!=e&&(r+=e.getChecksumPortion(),s++)}return r%=211,211*(s-4)+r==e.getValue()}static getNextSecondBar(t,e){let n;return t.get(e)?(n=t.getNextUnset(e),n=t.getNextSet(n)):(n=t.getNextSet(e),n=t.getNextUnset(n)),n}retrieveNextPair(t,e,n){let r,s=e.length%2==0;this.startFromEven&&(s=!s);let i=!0,o=-1;do{this.findNextPair(t,e,o),r=this.parseFoundFinderPattern(t,n,s),null==r?o=Qt.getNextSecondBar(t,this.startEnd[0]):i=!1}while(i);let a,l=this.decodeDataCharacter(t,r,s,!0);if(!this.isEmptyPair(e)&&e[e.length-1].mustBeLast())throw new v;try{a=this.decodeDataCharacter(t,r,s,!1)}catch(c){a=null,console.log(c)}return new $t(l,a,r,!0)}isEmptyPair(t){return 0===t.length}findNextPair(t,e,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let s,i=t.getSize();s=n>=0?n:this.isEmptyPair(e)?0:e[e.length-1].getFinderPattern().getStartEnd()[1];let o=e.length%2!=0;this.startFromEven&&(o=!o);let a=!1;for(;s<i&&(a=!t.get(s),a);)s++;let l=0,c=s;for(let u=s;u<i;u++)if(t.get(u)!=a)r[l]++;else{if(3==l){if(o&&Qt.reverseCounters(r),Qt.isFinderPattern(r))return this.startEnd[0]=c,void(this.startEnd[1]=u);o&&Qt.reverseCounters(r),c+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,l--}else l++;r[l]=1,a=!a}throw new v}static reverseCounters(t){let e=t.length;for(let n=0;n<e/2;++n){let r=t[n];t[n]=t[e-n-1],t[e-n-1]=r}}parseFoundFinderPattern(t,e,n){let r,s,i;if(n){let e=this.startEnd[0]-1;for(;e>=0&&!t.get(e);)e--;e++,r=this.startEnd[0]-e,s=e,i=this.startEnd[1]}else s=this.startEnd[0],i=t.getNextUnset(this.startEnd[1]+1),r=i-this.startEnd[1];let o,a=this.getDecodeFinderCounters();u.arraycopy(a,0,a,1,a.length-1),a[0]=r;try{o=this.parseFinderValue(a,Qt.FINDER_PATTERNS)}catch(l){return null}return new Nt(o,[s,i],s,i,e)}decodeDataCharacter(t,e,n,r){let s=this.getDataCharacterCounters();for(let C=0;C<s.length;C++)s[C]=0;if(r)Qt.recordPatternInReverse(t,e.getStartEnd()[0],s);else{Qt.recordPattern(t,e.getStartEnd()[1],s);for(let t=0,e=s.length-1;t<e;t++,e--){let n=s[t];s[t]=s[e],s[e]=n}}let i=tt.sum(new Int32Array(s))/17,o=(e.getStartEnd()[1]-e.getStartEnd()[0])/15;if(Math.abs(i-o)/o>.3)throw new v;let a=this.getOddCounts(),l=this.getEvenCounts(),c=this.getOddRoundingErrors(),u=this.getEvenRoundingErrors();for(let C=0;C<s.length;C++){let t=1*s[C]/i,e=t+.5;if(e<1){if(t<.3)throw new v;e=1}else if(e>8){if(t>8.7)throw new v;e=8}let n=C/2;0==(1&C)?(a[n]=e,c[n]=t-e):(l[n]=e,u[n]=t-e)}this.adjustOddEvenCounts(17);let h=4*e.getValue()+(n?0:2)+(r?0:1)-1,d=0,f=0;for(let C=a.length-1;C>=0;C--)Qt.isNotA1left(e,n,r)&&(f+=a[C]*Qt.WEIGHTS[h][2*C]),d+=a[C];let g=0;for(let C=l.length-1;C>=0;C--)Qt.isNotA1left(e,n,r)&&(g+=l[C]*Qt.WEIGHTS[h][2*C+1]);let p=f+g;if(0!=(1&d)||d>13||d<4)throw new v;let m=(13-d)/2,w=Qt.SYMBOL_WIDEST[m],_=9-w,y=Ot.getRSSvalue(a,w,!0),E=Ot.getRSSvalue(l,_,!1);return new Rt(y*Qt.EVEN_TOTAL_SUBSET[m]+E+Qt.GSUM[m],p)}static isNotA1left(t,e,n){return!(0==t.getValue()&&e&&n)}adjustOddEvenCounts(t){let e=tt.sum(new Int32Array(this.getOddCounts())),n=tt.sum(new Int32Array(this.getEvenCounts())),r=!1,s=!1;e>13?s=!0:e<4&&(r=!0);let i=!1,o=!1;n>13?o=!0:n<4&&(i=!0);let a=e+n-t,l=1==(1&e),c=0==(1&n);if(1==a)if(l){if(c)throw new v;s=!0}else{if(!c)throw new v;o=!0}else if(-1==a)if(l){if(c)throw new v;r=!0}else{if(!c)throw new v;i=!0}else{if(0!=a)throw new v;if(l){if(!c)throw new v;e<n?(r=!0,o=!0):(s=!0,i=!0)}else if(c)throw new v}if(r){if(s)throw new v;Qt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&Qt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),i){if(o)throw new v;Qt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}o&&Qt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Qt.SYMBOL_WIDEST=[7,5,4,3,1],Qt.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Qt.GSUM=[0,348,1388,2948,3988],Qt.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Qt.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Qt.FINDER_PAT_A=0,Qt.FINDER_PAT_B=1,Qt.FINDER_PAT_C=2,Qt.FINDER_PAT_D=3,Qt.FINDER_PAT_E=4,Qt.FINDER_PAT_F=5,Qt.FINDER_PATTERN_SEQUENCES=[[Qt.FINDER_PAT_A,Qt.FINDER_PAT_A],[Qt.FINDER_PAT_A,Qt.FINDER_PAT_B,Qt.FINDER_PAT_B],[Qt.FINDER_PAT_A,Qt.FINDER_PAT_C,Qt.FINDER_PAT_B,Qt.FINDER_PAT_D],[Qt.FINDER_PAT_A,Qt.FINDER_PAT_E,Qt.FINDER_PAT_B,Qt.FINDER_PAT_D,Qt.FINDER_PAT_C],[Qt.FINDER_PAT_A,Qt.FINDER_PAT_E,Qt.FINDER_PAT_B,Qt.FINDER_PAT_D,Qt.FINDER_PAT_D,Qt.FINDER_PAT_F],[Qt.FINDER_PAT_A,Qt.FINDER_PAT_E,Qt.FINDER_PAT_B,Qt.FINDER_PAT_D,Qt.FINDER_PAT_E,Qt.FINDER_PAT_F,Qt.FINDER_PAT_F],[Qt.FINDER_PAT_A,Qt.FINDER_PAT_A,Qt.FINDER_PAT_B,Qt.FINDER_PAT_B,Qt.FINDER_PAT_C,Qt.FINDER_PAT_C,Qt.FINDER_PAT_D,Qt.FINDER_PAT_D],[Qt.FINDER_PAT_A,Qt.FINDER_PAT_A,Qt.FINDER_PAT_B,Qt.FINDER_PAT_B,Qt.FINDER_PAT_C,Qt.FINDER_PAT_C,Qt.FINDER_PAT_D,Qt.FINDER_PAT_E,Qt.FINDER_PAT_E],[Qt.FINDER_PAT_A,Qt.FINDER_PAT_A,Qt.FINDER_PAT_B,Qt.FINDER_PAT_B,Qt.FINDER_PAT_C,Qt.FINDER_PAT_C,Qt.FINDER_PAT_D,Qt.FINDER_PAT_E,Qt.FINDER_PAT_F,Qt.FINDER_PAT_F],[Qt.FINDER_PAT_A,Qt.FINDER_PAT_A,Qt.FINDER_PAT_B,Qt.FINDER_PAT_B,Qt.FINDER_PAT_C,Qt.FINDER_PAT_D,Qt.FINDER_PAT_D,Qt.FINDER_PAT_E,Qt.FINDER_PAT_E,Qt.FINDER_PAT_F,Qt.FINDER_PAT_F]],Qt.MAX_PAIRS=11;class Jt extends Rt{constructor(t,e,n){super(t,e),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class te extends Tt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,e,n){const r=this.decodePair(e,!1,t,n);te.addOrTally(this.possibleLeftPairs,r),e.reverse();let s=this.decodePair(e,!0,t,n);te.addOrTally(this.possibleRightPairs,s),e.reverse();for(let i of this.possibleLeftPairs)if(i.getCount()>1)for(let t of this.possibleRightPairs)if(t.getCount()>1&&te.checkChecksum(i,t))return te.constructResult(i,t);throw new v}static addOrTally(t,e){if(null==e)return;let n=!1;for(let r of t)if(r.getValue()===e.getValue()){r.incrementCount(),n=!0;break}n||t.push(e)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,e){let n=4537077*t.getValue()+e.getValue(),r=new String(n).toString(),s=new S;for(let l=13-r.length;l>0;l--)s.append("0");s.append(r);let i=0;for(let l=0;l<13;l++){let t=s.charAt(l).charCodeAt(0)-"0".charCodeAt(0);i+=0==(1&l)?3*t:t}i=10-i%10,10===i&&(i=0),s.append(i.toString());let o=t.getFinderPattern().getResultPoints(),a=e.getFinderPattern().getResultPoints();return new x(s.toString(),null,0,[o[0],o[1],a[0],a[1]],L.RSS_14,(new Date).getTime())}static checkChecksum(t,e){let n=(t.getChecksumPortion()+16*e.getChecksumPortion())%79,r=9*t.getFinderPattern().getValue()+e.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r}decodePair(t,e,n,r){try{let s=this.findFinderPattern(t,e),i=this.parseFoundFinderPattern(t,n,e,s),o=null==r?null:r.get(w.NEED_RESULT_POINT_CALLBACK);if(null!=o){let r=(s[0]+s[1])/2;e&&(r=t.getSize()-1-r),o.foundPossibleResultPoint(new nt(r,n))}let a=this.decodeDataCharacter(t,i,!0),l=this.decodeDataCharacter(t,i,!1);return new Jt(1597*a.getValue()+l.getValue(),a.getChecksumPortion()+4*l.getChecksumPortion(),i)}catch(s){return null}}decodeDataCharacter(t,e,n){let r=this.getDataCharacterCounters();for(let p=0;p<r.length;p++)r[p]=0;if(n)ft.recordPatternInReverse(t,e.getStartEnd()[0],r);else{ft.recordPattern(t,e.getStartEnd()[1]+1,r);for(let t=0,e=r.length-1;t<e;t++,e--){let n=r[t];r[t]=r[e],r[e]=n}}let s=n?16:15,i=tt.sum(new Int32Array(r))/s,o=this.getOddCounts(),a=this.getEvenCounts(),l=this.getOddRoundingErrors(),c=this.getEvenRoundingErrors();for(let p=0;p<r.length;p++){let t=r[p]/i,e=Math.floor(t+.5);e<1?e=1:e>8&&(e=8);let n=Math.floor(p/2);0==(1&p)?(o[n]=e,l[n]=t-e):(a[n]=e,c[n]=t-e)}this.adjustOddEvenCounts(n,s);let u=0,h=0;for(let p=o.length-1;p>=0;p--)h*=9,h+=o[p],u+=o[p];let d=0,f=0;for(let p=a.length-1;p>=0;p--)d*=9,d+=a[p],f+=a[p];let g=h+3*d;if(n){if(0!=(1&u)||u>12||u<4)throw new v;let t=(12-u)/2,e=te.OUTSIDE_ODD_WIDEST[t],n=9-e,r=Ot.getRSSvalue(o,e,!1),s=Ot.getRSSvalue(a,n,!0);return new Rt(r*te.OUTSIDE_EVEN_TOTAL_SUBSET[t]+s+te.OUTSIDE_GSUM[t],g)}{if(0!=(1&f)||f>10||f<4)throw new v;let t=(10-f)/2,e=te.INSIDE_ODD_WIDEST[t],n=9-e,r=Ot.getRSSvalue(o,e,!0),s=Ot.getRSSvalue(a,n,!1);return new Rt(s*te.INSIDE_ODD_TOTAL_SUBSET[t]+r+te.INSIDE_GSUM[t],g)}}findFinderPattern(t,e){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let r=t.getSize(),s=!1,i=0;for(;i<r&&(s=!t.get(i),e!==s);)i++;let o=0,a=i;for(let l=i;l<r;l++)if(t.get(l)!==s)n[o]++;else{if(3===o){if(Tt.isFinderPattern(n))return[a,l];a+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,o--}else o++;n[o]=1,s=!s}throw new v}parseFoundFinderPattern(t,e,n,r){let s=t.get(r[0]),i=r[0]-1;for(;i>=0&&s!==t.get(i);)i--;i++;const o=r[0]-i,a=this.getDecodeFinderCounters(),l=new Int32Array(a.length);u.arraycopy(a,0,l,1,a.length-1),l[0]=o;const c=this.parseFinderValue(l,te.FINDER_PATTERNS);let h=i,d=r[1];return n&&(h=t.getSize()-1-h,d=t.getSize()-1-d),new Nt(c,[i,r[1]],h,d,e)}adjustOddEvenCounts(t,e){let n=tt.sum(new Int32Array(this.getOddCounts())),r=tt.sum(new Int32Array(this.getEvenCounts())),s=!1,i=!1,o=!1,a=!1;t?(n>12?i=!0:n<4&&(s=!0),r>12?a=!0:r<4&&(o=!0)):(n>11?i=!0:n<5&&(s=!0),r>10?a=!0:r<4&&(o=!0));let l=n+r-e,c=(1&n)==(t?1:0),u=1==(1&r);if(1===l)if(c){if(u)throw new v;i=!0}else{if(!u)throw new v;a=!0}else if(-1===l)if(c){if(u)throw new v;s=!0}else{if(!u)throw new v;o=!0}else{if(0!==l)throw new v;if(c){if(!u)throw new v;n<r?(s=!0,a=!0):(i=!0,o=!0)}else if(u)throw new v}if(s){if(i)throw new v;Tt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&Tt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(a)throw new v;Tt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&Tt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}te.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],te.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],te.OUTSIDE_GSUM=[0,161,961,2015,2715],te.INSIDE_GSUM=[0,336,1036,1516],te.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],te.INSIDE_ODD_WIDEST=[2,4,6,8],te.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ee extends ft{constructor(t){super(),this.readers=[];const e=t?t.get(w.POSSIBLE_FORMATS):null,n=t&&void 0!==t.get(w.ASSUME_CODE_39_CHECK_DIGIT);e&&((e.includes(L.EAN_13)||e.includes(L.UPC_A)||e.includes(L.EAN_8)||e.includes(L.UPC_E))&&this.readers.push(new bt(t)),e.includes(L.CODE_39)&&this.readers.push(new pt(n)),e.includes(L.CODE_128)&&this.readers.push(new gt),e.includes(L.ITF)&&this.readers.push(new mt),e.includes(L.RSS_14)&&this.readers.push(new te),e.includes(L.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),this.readers.push(new Qt))),0===this.readers.length&&(this.readers.push(new bt(t)),this.readers.push(new pt),this.readers.push(new bt(t)),this.readers.push(new gt),this.readers.push(new mt),this.readers.push(new te))}decodeRow(t,e,n){for(let s=0;s<this.readers.length;s++)try{return this.readers[s].decodeRow(t,e,n)}catch(r){}throw new v}reset(){this.readers.forEach(t=>t.reset())}}class ne{constructor(t,e,n){this.ecCodewords=t,this.ecBlocks=[e],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class re{constructor(t,e){this.count=t,this.dataCodewords=e}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class se{constructor(t,e,n,r,s,i){this.versionNumber=t,this.symbolSizeRows=e,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=s,this.ecBlocks=i;let o=0;const a=i.getECCodewords(),l=i.getECBlocks();for(let c of l)o+=c.getCount()*(c.getDataCodewords()+a);this.totalCodewords=o}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,e){if(0!=(1&t)||0!=(1&e))throw new _;for(let n of se.VERSIONS)if(n.symbolSizeRows===t&&n.symbolSizeColumns===e)return n;throw new _}toString(){return""+this.versionNumber}static buildVersions(){return[new se(1,10,10,8,8,new ne(5,new re(1,3))),new se(2,12,12,10,10,new ne(7,new re(1,5))),new se(3,14,14,12,12,new ne(10,new re(1,8))),new se(4,16,16,14,14,new ne(12,new re(1,12))),new se(5,18,18,16,16,new ne(14,new re(1,18))),new se(6,20,20,18,18,new ne(18,new re(1,22))),new se(7,22,22,20,20,new ne(20,new re(1,30))),new se(8,24,24,22,22,new ne(24,new re(1,36))),new se(9,26,26,24,24,new ne(28,new re(1,44))),new se(10,32,32,14,14,new ne(36,new re(1,62))),new se(11,36,36,16,16,new ne(42,new re(1,86))),new se(12,40,40,18,18,new ne(48,new re(1,114))),new se(13,44,44,20,20,new ne(56,new re(1,144))),new se(14,48,48,22,22,new ne(68,new re(1,174))),new se(15,52,52,24,24,new ne(42,new re(2,102))),new se(16,64,64,14,14,new ne(56,new re(2,140))),new se(17,72,72,16,16,new ne(36,new re(4,92))),new se(18,80,80,18,18,new ne(48,new re(4,114))),new se(19,88,88,20,20,new ne(56,new re(4,144))),new se(20,96,96,22,22,new ne(68,new re(4,174))),new se(21,104,104,24,24,new ne(56,new re(6,136))),new se(22,120,120,18,18,new ne(68,new re(6,175))),new se(23,132,132,20,20,new ne(62,new re(8,163))),new se(24,144,144,22,22,new ne(62,new re(8,156),new re(2,155))),new se(25,8,18,6,16,new ne(7,new re(1,5))),new se(26,8,32,6,14,new ne(11,new re(1,10))),new se(27,12,26,10,24,new ne(14,new re(1,16))),new se(28,12,36,10,16,new ne(18,new re(1,22))),new se(29,16,36,14,16,new ne(24,new re(1,32))),new se(30,16,48,14,22,new ne(28,new re(1,49)))]}}se.VERSIONS=se.buildVersions();class ie{constructor(t){const e=t.getHeight();if(e<8||e>144||0!=(1&e))throw new _;this.version=ie.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new I(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const e=t.getHeight(),n=t.getWidth();return se.getVersionForDimensions(e,n)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let e=0,n=4,r=0;const s=this.mappingBitMatrix.getHeight(),i=this.mappingBitMatrix.getWidth();let o=!1,a=!1,l=!1,c=!1;do{if(n!==s||0!==r||o)if(n!==s-2||0!==r||0==(3&i)||a)if(n!==s+4||2!==r||0!=(7&i)||l)if(n!==s-2||0!==r||4!=(7&i)||c){do{n<s&&r>=0&&!this.readMappingMatrix.get(r,n)&&(t[e++]=255&this.readUtah(n,r,s,i)),n-=2,r+=2}while(n>=0&&r<i);n+=1,r+=3;do{n>=0&&r<i&&!this.readMappingMatrix.get(r,n)&&(t[e++]=255&this.readUtah(n,r,s,i)),n+=2,r-=2}while(n<s&&r>=0);n+=3,r+=1}else t[e++]=255&this.readCorner4(s,i),n-=2,r+=2,c=!0;else t[e++]=255&this.readCorner3(s,i),n-=2,r+=2,l=!0;else t[e++]=255&this.readCorner2(s,i),n-=2,r+=2,a=!0;else t[e++]=255&this.readCorner1(s,i),n-=2,r+=2,o=!0}while(n<s||r<i);if(e!==this.version.getTotalCodewords())throw new _;return t}readModule(t,e,n,r){return t<0&&(t+=n,e+=4-(n+4&7)),e<0&&(e+=r,t+=4-(r+4&7)),this.readMappingMatrix.set(e,t),this.mappingBitMatrix.get(e,t)}readUtah(t,e,n,r){let s=0;return this.readModule(t-2,e-2,n,r)&&(s|=1),s<<=1,this.readModule(t-2,e-1,n,r)&&(s|=1),s<<=1,this.readModule(t-1,e-2,n,r)&&(s|=1),s<<=1,this.readModule(t-1,e-1,n,r)&&(s|=1),s<<=1,this.readModule(t-1,e,n,r)&&(s|=1),s<<=1,this.readModule(t,e-2,n,r)&&(s|=1),s<<=1,this.readModule(t,e-1,n,r)&&(s|=1),s<<=1,this.readModule(t,e,n,r)&&(s|=1),s}readCorner1(t,e){let n=0;return this.readModule(t-1,0,t,e)&&(n|=1),n<<=1,this.readModule(t-1,1,t,e)&&(n|=1),n<<=1,this.readModule(t-1,2,t,e)&&(n|=1),n<<=1,this.readModule(0,e-2,t,e)&&(n|=1),n<<=1,this.readModule(0,e-1,t,e)&&(n|=1),n<<=1,this.readModule(1,e-1,t,e)&&(n|=1),n<<=1,this.readModule(2,e-1,t,e)&&(n|=1),n<<=1,this.readModule(3,e-1,t,e)&&(n|=1),n}readCorner2(t,e){let n=0;return this.readModule(t-3,0,t,e)&&(n|=1),n<<=1,this.readModule(t-2,0,t,e)&&(n|=1),n<<=1,this.readModule(t-1,0,t,e)&&(n|=1),n<<=1,this.readModule(0,e-4,t,e)&&(n|=1),n<<=1,this.readModule(0,e-3,t,e)&&(n|=1),n<<=1,this.readModule(0,e-2,t,e)&&(n|=1),n<<=1,this.readModule(0,e-1,t,e)&&(n|=1),n<<=1,this.readModule(1,e-1,t,e)&&(n|=1),n}readCorner3(t,e){let n=0;return this.readModule(t-1,0,t,e)&&(n|=1),n<<=1,this.readModule(t-1,e-1,t,e)&&(n|=1),n<<=1,this.readModule(0,e-3,t,e)&&(n|=1),n<<=1,this.readModule(0,e-2,t,e)&&(n|=1),n<<=1,this.readModule(0,e-1,t,e)&&(n|=1),n<<=1,this.readModule(1,e-3,t,e)&&(n|=1),n<<=1,this.readModule(1,e-2,t,e)&&(n|=1),n<<=1,this.readModule(1,e-1,t,e)&&(n|=1),n}readCorner4(t,e){let n=0;return this.readModule(t-3,0,t,e)&&(n|=1),n<<=1,this.readModule(t-2,0,t,e)&&(n|=1),n<<=1,this.readModule(t-1,0,t,e)&&(n|=1),n<<=1,this.readModule(0,e-2,t,e)&&(n|=1),n<<=1,this.readModule(0,e-1,t,e)&&(n|=1),n<<=1,this.readModule(1,e-1,t,e)&&(n|=1),n<<=1,this.readModule(2,e-1,t,e)&&(n|=1),n<<=1,this.readModule(3,e-1,t,e)&&(n|=1),n}extractDataRegion(t){const e=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(t.getHeight()!==e)throw new o("Dimension of bitMatrix must match the version size");const r=this.version.getDataRegionSizeRows(),s=this.version.getDataRegionSizeColumns(),i=e/r|0,a=n/s|0,l=new I(a*s,i*r);for(let o=0;o<i;++o){const e=o*r;for(let n=0;n<a;++n){const i=n*s;for(let a=0;a<r;++a){const c=o*(r+2)+1+a,u=e+a;for(let e=0;e<s;++e)t.get(n*(s+2)+1+e,c)&&l.set(i+e,u)}}}return l}}class oe{constructor(t,e){this.numDataCodewords=t,this.codewords=e}static getDataBlocks(t,e){const n=e.getECBlocks();let r=0;const s=n.getECBlocks();for(let o of s)r+=o.getCount();const i=new Array(r);let a=0;for(let o of s)for(let t=0;t<o.getCount();t++){const t=o.getDataCodewords(),e=n.getECCodewords()+t;i[a++]=new oe(t,new Uint8Array(e))}const l=i[0].codewords.length-n.getECCodewords(),c=l-1;let u=0;for(let o=0;o<c;o++)for(let e=0;e<a;e++)i[e].codewords[o]=t[u++];const h=24===e.getVersionNumber(),d=h?8:a;for(let o=0;o<d;o++)i[o].codewords[l-1]=t[u++];const f=i[0].codewords.length;for(let o=l;o<f;o++)for(let e=0;e<a;e++){const n=h?(e+8)%a:e;i[n].codewords[h&&n>7?o-1:o]=t[u++]}if(u!==t.length)throw new o;return i}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ae{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new o(""+t);let e=0,n=this.bitOffset,r=this.byteOffset;const s=this.bytes;if(n>0){const i=8-n,o=t<i?t:i,a=i-o;e=(s[r]&255>>8-o<<a)>>a,t-=o,n+=o,8===n&&(n=0,r++)}if(t>0){for(;t>=8;)e=e<<8|255&s[r],r++,t-=8;if(t>0){const i=8-t;e=e<<t|(s[r]&255>>i<<i)>>i,n+=t}}return this.bitOffset=n,this.byteOffset=r,e}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}!function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"}(U||(U={}));class le{static decode(t){const e=new ae(t),n=new S,r=new S,s=new Array;let i=U.ASCII_ENCODE;do{if(i===U.ASCII_ENCODE)i=this.decodeAsciiSegment(e,n,r);else{switch(i){case U.C40_ENCODE:this.decodeC40Segment(e,n);break;case U.TEXT_ENCODE:this.decodeTextSegment(e,n);break;case U.ANSIX12_ENCODE:this.decodeAnsiX12Segment(e,n);break;case U.EDIFACT_ENCODE:this.decodeEdifactSegment(e,n);break;case U.BASE256_ENCODE:this.decodeBase256Segment(e,n,s);break;default:throw new _}i=U.ASCII_ENCODE}}while(i!==U.PAD_ENCODE&&e.available()>0);return r.length()>0&&n.append(r.toString()),new W(t,n.toString(),0===s.length?null:s,null)}static decodeAsciiSegment(t,e,n){let r=!1;do{let s=t.readBits(8);if(0===s)throw new _;if(s<=128)return r&&(s+=128),e.append(String.fromCharCode(s-1)),U.ASCII_ENCODE;if(129===s)return U.PAD_ENCODE;if(s<=229){const t=s-130;t<10&&e.append("0"),e.append(""+t)}else switch(s){case 230:return U.C40_ENCODE;case 231:return U.BASE256_ENCODE;case 232:e.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:r=!0;break;case 236:e.append("[)>\x1e05\x1d"),n.insert(0,"\x1e\x04");break;case 237:e.append("[)>\x1e06\x1d"),n.insert(0,"\x1e\x04");break;case 238:return U.ANSIX12_ENCODE;case 239:return U.TEXT_ENCODE;case 240:return U.EDIFACT_ENCODE;case 241:break;default:if(254!==s||0!==t.available())throw new _}}while(t.available()>0);return U.ASCII_ENCODE}static decodeC40Segment(t,e){let n=!1;const r=[];let s=0;do{if(8===t.available())return;const i=t.readBits(8);if(254===i)return;this.parseTwoBytes(i,t.readBits(8),r);for(let t=0;t<3;t++){const i=r[t];switch(s){case 0:if(i<3)s=i+1;else{if(!(i<this.C40_BASIC_SET_CHARS.length))throw new _;{const t=this.C40_BASIC_SET_CHARS[i];n?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),n=!1):e.append(t)}}break;case 1:n?(e.append(String.fromCharCode(i+128)),n=!1):e.append(String.fromCharCode(i)),s=0;break;case 2:if(i<this.C40_SHIFT2_SET_CHARS.length){const t=this.C40_SHIFT2_SET_CHARS[i];n?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),n=!1):e.append(t)}else switch(i){case 27:e.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new _}s=0;break;case 3:n?(e.append(String.fromCharCode(i+224)),n=!1):e.append(String.fromCharCode(i+96)),s=0;break;default:throw new _}}}while(t.available()>0)}static decodeTextSegment(t,e){let n=!1,r=[],s=0;do{if(8===t.available())return;const i=t.readBits(8);if(254===i)return;this.parseTwoBytes(i,t.readBits(8),r);for(let t=0;t<3;t++){const i=r[t];switch(s){case 0:if(i<3)s=i+1;else{if(!(i<this.TEXT_BASIC_SET_CHARS.length))throw new _;{const t=this.TEXT_BASIC_SET_CHARS[i];n?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),n=!1):e.append(t)}}break;case 1:n?(e.append(String.fromCharCode(i+128)),n=!1):e.append(String.fromCharCode(i)),s=0;break;case 2:if(i<this.TEXT_SHIFT2_SET_CHARS.length){const t=this.TEXT_SHIFT2_SET_CHARS[i];n?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),n=!1):e.append(t)}else switch(i){case 27:e.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new _}s=0;break;case 3:if(!(i<this.TEXT_SHIFT3_SET_CHARS.length))throw new _;{const t=this.TEXT_SHIFT3_SET_CHARS[i];n?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),n=!1):e.append(t),s=0}break;default:throw new _}}}while(t.available()>0)}static decodeAnsiX12Segment(t,e){const n=[];do{if(8===t.available())return;const r=t.readBits(8);if(254===r)return;this.parseTwoBytes(r,t.readBits(8),n);for(let t=0;t<3;t++){const r=n[t];switch(r){case 0:e.append("\r");break;case 1:e.append("*");break;case 2:e.append(">");break;case 3:e.append(" ");break;default:if(r<14)e.append(String.fromCharCode(r+44));else{if(!(r<40))throw new _;e.append(String.fromCharCode(r+51))}}}}while(t.available()>0)}static parseTwoBytes(t,e,n){let r=(t<<8)+e-1,s=Math.floor(r/1600);n[0]=s,r-=1600*s,s=Math.floor(r/40),n[1]=s,n[2]=r-40*s}static decodeEdifactSegment(t,e){do{if(t.available()<=16)return;for(let n=0;n<4;n++){let n=t.readBits(6);if(31===n){const e=8-t.getBitOffset();return void(8!==e&&t.readBits(e))}0==(32&n)&&(n|=64),e.append(String.fromCharCode(n))}}while(t.available()>0)}static decodeBase256Segment(t,e,n){let r=1+t.getByteOffset();const s=this.unrandomize255State(t.readBits(8),r++);let i;if(i=0===s?t.available()/8|0:s<250?s:250*(s-249)+this.unrandomize255State(t.readBits(8),r++),i<0)throw new _;const o=new Uint8Array(i);for(let l=0;l<i;l++){if(t.available()<8)throw new _;o[l]=this.unrandomize255State(t.readBits(8),r++)}n.push(o);try{e.append(C.decode(o,A.ISO88591))}catch(a){throw new K("Platform does not support required encoding: "+a.message)}}static unrandomize255State(t,e){const n=t-(149*e%255+1);return n>=0?n:n+256}}le.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],le.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],le.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],le.TEXT_SHIFT2_SET_CHARS=le.C40_SHIFT2_SET_CHARS,le.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class ce{constructor(){this.rsDecoder=new Q(q.DATA_MATRIX_FIELD_256)}decode(t){const e=new ie(t),n=e.getVersion(),r=e.readCodewords(),s=oe.getDataBlocks(r,n);let i=0;for(let l of s)i+=l.getNumDataCodewords();const o=new Uint8Array(i),a=s.length;for(let l=0;l<a;l++){const t=s[l],e=t.getCodewords(),n=t.getNumDataCodewords();this.correctErrors(e,n);for(let r=0;r<n;r++)o[r*a+l]=e[r]}return le.decode(o)}correctErrors(t,e){const n=new Int32Array(t);try{this.rsDecoder.decode(n,t.length-e)}catch(r){throw new l}for(let s=0;s<e;s++)t[s]=n[s]}}class ue{constructor(t){this.image=t,this.rectangleDetector=new it(this.image)}detect(){const t=this.rectangleDetector.detect();let e=this.detectSolid1(t);if(e=this.detectSolid2(e),e[3]=this.correctTopRight(e),!e[3])throw new v;e=this.shiftToModuleCenter(e);const n=e[0],r=e[1],s=e[2],i=e[3];let o=this.transitionsBetween(n,i)+1,a=this.transitionsBetween(s,i)+1;1==(1&o)&&(o+=1),1==(1&a)&&(a+=1),4*o<7*a&&4*a<7*o&&(o=a=Math.max(o,a));let l=ue.sampleGrid(this.image,n,r,s,i,o,a);return new rt(l,[n,r,s,i])}static shiftPoint(t,e,n){let r=(e.getX()-t.getX())/(n+1),s=(e.getY()-t.getY())/(n+1);return new nt(t.getX()+r,t.getY()+s)}static moveAway(t,e,n){let r=t.getX(),s=t.getY();return r<e?r-=1:r+=1,s<n?s-=1:s+=1,new nt(r,s)}detectSolid1(t){let e=t[0],n=t[1],r=t[3],s=t[2],i=this.transitionsBetween(e,n),o=this.transitionsBetween(n,r),a=this.transitionsBetween(r,s),l=this.transitionsBetween(s,e),c=i,u=[s,e,n,r];return c>o&&(c=o,u[0]=e,u[1]=n,u[2]=r,u[3]=s),c>a&&(c=a,u[0]=n,u[1]=r,u[2]=s,u[3]=e),c>l&&(u[0]=r,u[1]=s,u[2]=e,u[3]=n),u}detectSolid2(t){let e=t[0],n=t[1],r=t[2],s=t[3],i=this.transitionsBetween(e,s),o=ue.shiftPoint(n,r,4*(i+1)),a=ue.shiftPoint(r,n,4*(i+1));return this.transitionsBetween(o,e)<this.transitionsBetween(a,s)?(t[0]=e,t[1]=n,t[2]=r,t[3]=s):(t[0]=n,t[1]=r,t[2]=s,t[3]=e),t}correctTopRight(t){let e=t[0],n=t[1],r=t[2],s=t[3],i=this.transitionsBetween(e,s),o=this.transitionsBetween(n,s),a=ue.shiftPoint(e,n,4*(o+1)),l=ue.shiftPoint(r,n,4*(i+1));i=this.transitionsBetween(a,s),o=this.transitionsBetween(l,s);let c=new nt(s.getX()+(r.getX()-n.getX())/(i+1),s.getY()+(r.getY()-n.getY())/(i+1)),u=new nt(s.getX()+(e.getX()-n.getX())/(o+1),s.getY()+(e.getY()-n.getY())/(o+1));return this.isValid(c)?this.isValid(u)?this.transitionsBetween(a,c)+this.transitionsBetween(l,c)>this.transitionsBetween(a,u)+this.transitionsBetween(l,u)?c:u:c:this.isValid(u)?u:null}shiftToModuleCenter(t){let e=t[0],n=t[1],r=t[2],s=t[3],i=this.transitionsBetween(e,s)+1,o=this.transitionsBetween(r,s)+1,a=ue.shiftPoint(e,n,4*o),l=ue.shiftPoint(r,n,4*i);i=this.transitionsBetween(a,s)+1,o=this.transitionsBetween(l,s)+1,1==(1&i)&&(i+=1),1==(1&o)&&(o+=1);let c,u,h=(e.getX()+n.getX()+r.getX()+s.getX())/4,d=(e.getY()+n.getY()+r.getY()+s.getY())/4;return e=ue.moveAway(e,h,d),n=ue.moveAway(n,h,d),r=ue.moveAway(r,h,d),s=ue.moveAway(s,h,d),a=ue.shiftPoint(e,n,4*o),a=ue.shiftPoint(a,s,4*i),c=ue.shiftPoint(n,e,4*o),c=ue.shiftPoint(c,r,4*i),l=ue.shiftPoint(r,s,4*o),l=ue.shiftPoint(l,n,4*i),u=ue.shiftPoint(s,r,4*o),u=ue.shiftPoint(u,e,4*i),[a,c,l,u]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,e,n,r,s,i,o){return ct.getInstance().sampleGrid(t,i,o,.5,.5,i-.5,.5,i-.5,o-.5,.5,o-.5,e.getX(),e.getY(),s.getX(),s.getY(),r.getX(),r.getY(),n.getX(),n.getY())}transitionsBetween(t,e){let n=Math.trunc(t.getX()),r=Math.trunc(t.getY()),s=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.abs(i-r)>Math.abs(s-n);if(o){let t=n;n=r,r=t,t=s,s=i,i=t}let a=Math.abs(s-n),l=Math.abs(i-r),c=-a/2,u=r<i?1:-1,h=n<s?1:-1,d=0,f=this.image.get(o?r:n,o?n:r);for(let g=n,p=r;g!==s;g+=h){let t=this.image.get(o?p:g,o?g:p);if(t!==f&&(d++,f=t),c+=l,c>0){if(p===i)break;p+=u,c-=a}}return d}}class he{constructor(){this.decoder=new ce}decode(t,e=null){let n,r;if(null!=e&&e.has(w.PURE_BARCODE)){const e=he.extractPureBits(t.getBlackMatrix());n=this.decoder.decode(e),r=he.NO_POINTS}else{const e=new ue(t.getBlackMatrix()).detect();n=this.decoder.decode(e.getBits()),r=e.getPoints()}const s=n.getRawBytes(),i=new x(n.getText(),s,8*s.length,r,L.DATA_MATRIX,u.currentTimeMillis()),o=n.getByteSegments();null!=o&&i.putMetadata(G.BYTE_SEGMENTS,o);const a=n.getECLevel();return null!=a&&i.putMetadata(G.ERROR_CORRECTION_LEVEL,a),i}reset(){}static extractPureBits(t){const e=t.getTopLeftOnBit(),n=t.getBottomRightOnBit();if(null==e||null==n)throw new v;const r=this.moduleSize(e,t);let s=e[1],i=e[0];const o=(n[0]-i+1)/r,a=(n[1]-s+1)/r;if(o<=0||a<=0)throw new v;const l=r/2;s+=l,i+=l;const c=new I(o,a);for(let u=0;u<a;u++){const e=s+u*r;for(let n=0;n<o;n++)t.get(i+n*r,e)&&c.set(n,u)}return c}static moduleSize(t,e){const n=e.getWidth();let r=t[0];const s=t[1];for(;r<n&&e.get(r,s);)r++;if(r===n)throw new v;const i=r-t[0];if(0===i)throw new v;return i}}he.NO_POINTS=[],function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"}(V||(V={}));class de{constructor(t,e,n){this.value=t,this.stringValue=e,this.bits=n,de.FOR_BITS.set(n,this),de.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return de.L;case"M":return de.M;case"Q":return de.Q;case"H":return de.H;default:throw new i(t+"not available")}}toString(){return this.stringValue}equals(t){return t instanceof de&&this.value===t.value}static forBits(t){if(t<0||t>=de.FOR_BITS.size)throw new o;return de.FOR_BITS.get(t)}}de.FOR_BITS=new Map,de.FOR_VALUE=new Map,de.L=new de(V.L,"L",1),de.M=new de(V.M,"M",0),de.Q=new de(V.Q,"Q",3),de.H=new de(V.H,"H",2);class fe{constructor(t){this.errorCorrectionLevel=de.forBits(t>>3&3),this.dataMask=7&t}static numBitsDiffering(t,e){return g.bitCount(t^e)}static decodeFormatInformation(t,e){const n=fe.doDecodeFormatInformation(t,e);return null!==n?n:fe.doDecodeFormatInformation(t^fe.FORMAT_INFO_MASK_QR,e^fe.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,e){let n=Number.MAX_SAFE_INTEGER,r=0;for(const s of fe.FORMAT_INFO_DECODE_LOOKUP){const i=s[0];if(i===t||i===e)return new fe(s[1]);let o=fe.numBitsDiffering(t,i);o<n&&(r=s[1],n=o),t!==e&&(o=fe.numBitsDiffering(e,i),o<n&&(r=s[1],n=o))}return n<=3?new fe(r):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){return t instanceof fe&&this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}fe.FORMAT_INFO_MASK_QR=21522,fe.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ge{constructor(t,...e){this.ecCodewordsPerBlock=t,this.ecBlocks=e}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const e=this.ecBlocks;for(const n of e)t+=n.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class pe{constructor(t,e){this.count=t,this.dataCodewords=e}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class me{constructor(t,e,...n){this.versionNumber=t,this.alignmentPatternCenters=e,this.ecBlocks=n;let r=0;const s=n[0].getECCodewordsPerBlock(),i=n[0].getECBlocks();for(const o of i)r+=o.getCount()*(o.getDataCodewords()+s);this.totalCodewords=r}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!=1)throw new _;try{return this.getVersionForNumber((t-17)/4)}catch(e){throw new _}}static getVersionForNumber(t){if(t<1||t>40)throw new o;return me.VERSIONS[t-1]}static decodeVersionInformation(t){let e=Number.MAX_SAFE_INTEGER,n=0;for(let r=0;r<me.VERSION_DECODE_INFO.length;r++){const s=me.VERSION_DECODE_INFO[r];if(s===t)return me.getVersionForNumber(r+7);const i=fe.numBitsDiffering(t,s);i<e&&(n=r+7,e=i)}return e<=3?me.getVersionForNumber(n):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),e=new I(t);e.setRegion(0,0,9,9),e.setRegion(t-8,0,8,9),e.setRegion(0,t-8,9,8);const n=this.alignmentPatternCenters.length;for(let r=0;r<n;r++){const t=this.alignmentPatternCenters[r]-2;for(let s=0;s<n;s++)0===r&&(0===s||s===n-1)||r===n-1&&0===s||e.setRegion(this.alignmentPatternCenters[s]-2,t,5,5)}return e.setRegion(6,9,1,t-17),e.setRegion(9,6,t-17,1),this.versionNumber>6&&(e.setRegion(t-11,0,3,6),e.setRegion(0,t-11,6,3)),e}toString(){return""+this.versionNumber}}me.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),me.VERSIONS=[new me(1,new Int32Array(0),new ge(7,new pe(1,19)),new ge(10,new pe(1,16)),new ge(13,new pe(1,13)),new ge(17,new pe(1,9))),new me(2,Int32Array.from([6,18]),new ge(10,new pe(1,34)),new ge(16,new pe(1,28)),new ge(22,new pe(1,22)),new ge(28,new pe(1,16))),new me(3,Int32Array.from([6,22]),new ge(15,new pe(1,55)),new ge(26,new pe(1,44)),new ge(18,new pe(2,17)),new ge(22,new pe(2,13))),new me(4,Int32Array.from([6,26]),new ge(20,new pe(1,80)),new ge(18,new pe(2,32)),new ge(26,new pe(2,24)),new ge(16,new pe(4,9))),new me(5,Int32Array.from([6,30]),new ge(26,new pe(1,108)),new ge(24,new pe(2,43)),new ge(18,new pe(2,15),new pe(2,16)),new ge(22,new pe(2,11),new pe(2,12))),new me(6,Int32Array.from([6,34]),new ge(18,new pe(2,68)),new ge(16,new pe(4,27)),new ge(24,new pe(4,19)),new ge(28,new pe(4,15))),new me(7,Int32Array.from([6,22,38]),new ge(20,new pe(2,78)),new ge(18,new pe(4,31)),new ge(18,new pe(2,14),new pe(4,15)),new ge(26,new pe(4,13),new pe(1,14))),new me(8,Int32Array.from([6,24,42]),new ge(24,new pe(2,97)),new ge(22,new pe(2,38),new pe(2,39)),new ge(22,new pe(4,18),new pe(2,19)),new ge(26,new pe(4,14),new pe(2,15))),new me(9,Int32Array.from([6,26,46]),new ge(30,new pe(2,116)),new ge(22,new pe(3,36),new pe(2,37)),new ge(20,new pe(4,16),new pe(4,17)),new ge(24,new pe(4,12),new pe(4,13))),new me(10,Int32Array.from([6,28,50]),new ge(18,new pe(2,68),new pe(2,69)),new ge(26,new pe(4,43),new pe(1,44)),new ge(24,new pe(6,19),new pe(2,20)),new ge(28,new pe(6,15),new pe(2,16))),new me(11,Int32Array.from([6,30,54]),new ge(20,new pe(4,81)),new ge(30,new pe(1,50),new pe(4,51)),new ge(28,new pe(4,22),new pe(4,23)),new ge(24,new pe(3,12),new pe(8,13))),new me(12,Int32Array.from([6,32,58]),new ge(24,new pe(2,92),new pe(2,93)),new ge(22,new pe(6,36),new pe(2,37)),new ge(26,new pe(4,20),new pe(6,21)),new ge(28,new pe(7,14),new pe(4,15))),new me(13,Int32Array.from([6,34,62]),new ge(26,new pe(4,107)),new ge(22,new pe(8,37),new pe(1,38)),new ge(24,new pe(8,20),new pe(4,21)),new ge(22,new pe(12,11),new pe(4,12))),new me(14,Int32Array.from([6,26,46,66]),new ge(30,new pe(3,115),new pe(1,116)),new ge(24,new pe(4,40),new pe(5,41)),new ge(20,new pe(11,16),new pe(5,17)),new ge(24,new pe(11,12),new pe(5,13))),new me(15,Int32Array.from([6,26,48,70]),new ge(22,new pe(5,87),new pe(1,88)),new ge(24,new pe(5,41),new pe(5,42)),new ge(30,new pe(5,24),new pe(7,25)),new ge(24,new pe(11,12),new pe(7,13))),new me(16,Int32Array.from([6,26,50,74]),new ge(24,new pe(5,98),new pe(1,99)),new ge(28,new pe(7,45),new pe(3,46)),new ge(24,new pe(15,19),new pe(2,20)),new ge(30,new pe(3,15),new pe(13,16))),new me(17,Int32Array.from([6,30,54,78]),new ge(28,new pe(1,107),new pe(5,108)),new ge(28,new pe(10,46),new pe(1,47)),new ge(28,new pe(1,22),new pe(15,23)),new ge(28,new pe(2,14),new pe(17,15))),new me(18,Int32Array.from([6,30,56,82]),new ge(30,new pe(5,120),new pe(1,121)),new ge(26,new pe(9,43),new pe(4,44)),new ge(28,new pe(17,22),new pe(1,23)),new ge(28,new pe(2,14),new pe(19,15))),new me(19,Int32Array.from([6,30,58,86]),new ge(28,new pe(3,113),new pe(4,114)),new ge(26,new pe(3,44),new pe(11,45)),new ge(26,new pe(17,21),new pe(4,22)),new ge(26,new pe(9,13),new pe(16,14))),new me(20,Int32Array.from([6,34,62,90]),new ge(28,new pe(3,107),new pe(5,108)),new ge(26,new pe(3,41),new pe(13,42)),new ge(30,new pe(15,24),new pe(5,25)),new ge(28,new pe(15,15),new pe(10,16))),new me(21,Int32Array.from([6,28,50,72,94]),new ge(28,new pe(4,116),new pe(4,117)),new ge(26,new pe(17,42)),new ge(28,new pe(17,22),new pe(6,23)),new ge(30,new pe(19,16),new pe(6,17))),new me(22,Int32Array.from([6,26,50,74,98]),new ge(28,new pe(2,111),new pe(7,112)),new ge(28,new pe(17,46)),new ge(30,new pe(7,24),new pe(16,25)),new ge(24,new pe(34,13))),new me(23,Int32Array.from([6,30,54,78,102]),new ge(30,new pe(4,121),new pe(5,122)),new ge(28,new pe(4,47),new pe(14,48)),new ge(30,new pe(11,24),new pe(14,25)),new ge(30,new pe(16,15),new pe(14,16))),new me(24,Int32Array.from([6,28,54,80,106]),new ge(30,new pe(6,117),new pe(4,118)),new ge(28,new pe(6,45),new pe(14,46)),new ge(30,new pe(11,24),new pe(16,25)),new ge(30,new pe(30,16),new pe(2,17))),new me(25,Int32Array.from([6,32,58,84,110]),new ge(26,new pe(8,106),new pe(4,107)),new ge(28,new pe(8,47),new pe(13,48)),new ge(30,new pe(7,24),new pe(22,25)),new ge(30,new pe(22,15),new pe(13,16))),new me(26,Int32Array.from([6,30,58,86,114]),new ge(28,new pe(10,114),new pe(2,115)),new ge(28,new pe(19,46),new pe(4,47)),new ge(28,new pe(28,22),new pe(6,23)),new ge(30,new pe(33,16),new pe(4,17))),new me(27,Int32Array.from([6,34,62,90,118]),new ge(30,new pe(8,122),new pe(4,123)),new ge(28,new pe(22,45),new pe(3,46)),new ge(30,new pe(8,23),new pe(26,24)),new ge(30,new pe(12,15),new pe(28,16))),new me(28,Int32Array.from([6,26,50,74,98,122]),new ge(30,new pe(3,117),new pe(10,118)),new ge(28,new pe(3,45),new pe(23,46)),new ge(30,new pe(4,24),new pe(31,25)),new ge(30,new pe(11,15),new pe(31,16))),new me(29,Int32Array.from([6,30,54,78,102,126]),new ge(30,new pe(7,116),new pe(7,117)),new ge(28,new pe(21,45),new pe(7,46)),new ge(30,new pe(1,23),new pe(37,24)),new ge(30,new pe(19,15),new pe(26,16))),new me(30,Int32Array.from([6,26,52,78,104,130]),new ge(30,new pe(5,115),new pe(10,116)),new ge(28,new pe(19,47),new pe(10,48)),new ge(30,new pe(15,24),new pe(25,25)),new ge(30,new pe(23,15),new pe(25,16))),new me(31,Int32Array.from([6,30,56,82,108,134]),new ge(30,new pe(13,115),new pe(3,116)),new ge(28,new pe(2,46),new pe(29,47)),new ge(30,new pe(42,24),new pe(1,25)),new ge(30,new pe(23,15),new pe(28,16))),new me(32,Int32Array.from([6,34,60,86,112,138]),new ge(30,new pe(17,115)),new ge(28,new pe(10,46),new pe(23,47)),new ge(30,new pe(10,24),new pe(35,25)),new ge(30,new pe(19,15),new pe(35,16))),new me(33,Int32Array.from([6,30,58,86,114,142]),new ge(30,new pe(17,115),new pe(1,116)),new ge(28,new pe(14,46),new pe(21,47)),new ge(30,new pe(29,24),new pe(19,25)),new ge(30,new pe(11,15),new pe(46,16))),new me(34,Int32Array.from([6,34,62,90,118,146]),new ge(30,new pe(13,115),new pe(6,116)),new ge(28,new pe(14,46),new pe(23,47)),new ge(30,new pe(44,24),new pe(7,25)),new ge(30,new pe(59,16),new pe(1,17))),new me(35,Int32Array.from([6,30,54,78,102,126,150]),new ge(30,new pe(12,121),new pe(7,122)),new ge(28,new pe(12,47),new pe(26,48)),new ge(30,new pe(39,24),new pe(14,25)),new ge(30,new pe(22,15),new pe(41,16))),new me(36,Int32Array.from([6,24,50,76,102,128,154]),new ge(30,new pe(6,121),new pe(14,122)),new ge(28,new pe(6,47),new pe(34,48)),new ge(30,new pe(46,24),new pe(10,25)),new ge(30,new pe(2,15),new pe(64,16))),new me(37,Int32Array.from([6,28,54,80,106,132,158]),new ge(30,new pe(17,122),new pe(4,123)),new ge(28,new pe(29,46),new pe(14,47)),new ge(30,new pe(49,24),new pe(10,25)),new ge(30,new pe(24,15),new pe(46,16))),new me(38,Int32Array.from([6,32,58,84,110,136,162]),new ge(30,new pe(4,122),new pe(18,123)),new ge(28,new pe(13,46),new pe(32,47)),new ge(30,new pe(48,24),new pe(14,25)),new ge(30,new pe(42,15),new pe(32,16))),new me(39,Int32Array.from([6,26,54,82,110,138,166]),new ge(30,new pe(20,117),new pe(4,118)),new ge(28,new pe(40,47),new pe(7,48)),new ge(30,new pe(43,24),new pe(22,25)),new ge(30,new pe(10,15),new pe(67,16))),new me(40,Int32Array.from([6,30,58,86,114,142,170]),new ge(30,new pe(19,118),new pe(6,119)),new ge(28,new pe(18,47),new pe(31,48)),new ge(30,new pe(34,24),new pe(34,25)),new ge(30,new pe(20,15),new pe(61,16)))],function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"}(H||(H={}));class we{constructor(t,e){this.value=t,this.isMasked=e}unmaskBitMatrix(t,e){for(let n=0;n<e;n++)for(let r=0;r<e;r++)this.isMasked(n,r)&&t.flip(r,n)}}we.values=new Map([[H.DATA_MASK_000,new we(H.DATA_MASK_000,(t,e)=>0==(t+e&1))],[H.DATA_MASK_001,new we(H.DATA_MASK_001,(t,e)=>0==(1&t))],[H.DATA_MASK_010,new we(H.DATA_MASK_010,(t,e)=>e%3==0)],[H.DATA_MASK_011,new we(H.DATA_MASK_011,(t,e)=>(t+e)%3==0)],[H.DATA_MASK_100,new we(H.DATA_MASK_100,(t,e)=>0==(Math.floor(t/2)+Math.floor(e/3)&1))],[H.DATA_MASK_101,new we(H.DATA_MASK_101,(t,e)=>t*e%6==0)],[H.DATA_MASK_110,new we(H.DATA_MASK_110,(t,e)=>t*e%6<3)],[H.DATA_MASK_111,new we(H.DATA_MASK_111,(t,e)=>0==(t+e+t*e%3&1))]]);class _e{constructor(t){const e=t.getHeight();if(e<21||1!=(3&e))throw new _;this.bitMatrix=t}readFormatInformation(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;let t=0;for(let s=0;s<6;s++)t=this.copyBit(s,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let s=5;s>=0;s--)t=this.copyBit(8,s,t);const e=this.bitMatrix.getHeight();let n=0;const r=e-7;for(let s=e-1;s>=r;s--)n=this.copyBit(8,s,n);for(let s=e-8;s<e;s++)n=this.copyBit(s,8,n);if(this.parsedFormatInfo=fe.decodeFormatInformation(t,n),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new _}readVersion(){if(null!=this.parsedVersion)return this.parsedVersion;const t=this.bitMatrix.getHeight(),e=Math.floor((t-17)/4);if(e<=6)return me.getVersionForNumber(e);let n=0;const r=t-11;for(let i=5;i>=0;i--)for(let e=t-9;e>=r;e--)n=this.copyBit(e,i,n);let s=me.decodeVersionInformation(n);if(null!==s&&s.getDimensionForVersion()===t)return this.parsedVersion=s,s;n=0;for(let i=5;i>=0;i--)for(let e=t-9;e>=r;e--)n=this.copyBit(i,e,n);if(s=me.decodeVersionInformation(n),null!==s&&s.getDimensionForVersion()===t)return this.parsedVersion=s,s;throw new _}copyBit(t,e,n){return(this.isMirror?this.bitMatrix.get(e,t):this.bitMatrix.get(t,e))?n<<1|1:n<<1}readCodewords(){const t=this.readFormatInformation(),e=this.readVersion(),n=we.values.get(t.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);const s=e.buildFunctionPattern();let i=!0;const o=new Uint8Array(e.getTotalCodewords());let a=0,l=0,c=0;for(let u=r-1;u>0;u-=2){6===u&&u--;for(let t=0;t<r;t++){const e=i?r-1-t:t;for(let t=0;t<2;t++)s.get(u-t,e)||(c++,l<<=1,this.bitMatrix.get(u-t,e)&&(l|=1),8===c&&(o[a++]=l,c=0,l=0))}i=!i}if(a!==e.getTotalCodewords())throw new _;return o}remask(){if(null===this.parsedFormatInfo)return;const t=we.values[this.parsedFormatInfo.getDataMask()],e=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,e)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let e=0,n=t.getWidth();e<n;e++)for(let r=e+1,s=t.getHeight();r<s;r++)t.get(e,r)!==t.get(r,e)&&(t.flip(r,e),t.flip(e,r))}}class ye{constructor(t,e){this.numDataCodewords=t,this.codewords=e}static getDataBlocks(t,e,n){if(t.length!==e.getTotalCodewords())throw new o;const r=e.getECBlocksForLevel(n);let s=0;const i=r.getECBlocks();for(const o of i)s+=o.getCount();const a=new Array(s);let l=0;for(const o of i)for(let t=0;t<o.getCount();t++){const t=o.getDataCodewords(),e=r.getECCodewordsPerBlock()+t;a[l++]=new ye(t,new Uint8Array(e))}const c=a[0].codewords.length;let u=a.length-1;for(;u>=0&&a[u].codewords.length!==c;)u--;u++;const h=c-r.getECCodewordsPerBlock();let d=0;for(let o=0;o<h;o++)for(let e=0;e<l;e++)a[e].codewords[o]=t[d++];for(let o=u;o<l;o++)a[o].codewords[h]=t[d++];const f=a[0].codewords.length;for(let o=h;o<f;o++)for(let e=0;e<l;e++)a[e].codewords[e<u?o:o+1]=t[d++];return a}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}!function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"}(j||(j={}));class Ee{constructor(t,e,n,r){this.value=t,this.stringValue=e,this.characterCountBitsForVersions=n,this.bits=r,Ee.FOR_BITS.set(r,this),Ee.FOR_VALUE.set(t,this)}static forBits(t){const e=Ee.FOR_BITS.get(t);if(void 0===e)throw new o;return e}getCharacterCountBits(t){const e=t.getVersionNumber();let n;return n=e<=9?0:e<=26?1:2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(t){return t instanceof Ee&&this.value===t.value}toString(){return this.stringValue}}Ee.FOR_BITS=new Map,Ee.FOR_VALUE=new Map,Ee.TERMINATOR=new Ee(j.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ee.NUMERIC=new Ee(j.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ee.ALPHANUMERIC=new Ee(j.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ee.STRUCTURED_APPEND=new Ee(j.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ee.BYTE=new Ee(j.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ee.ECI=new Ee(j.ECI,"ECI",Int32Array.from([0,0,0]),7),Ee.KANJI=new Ee(j.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ee.FNC1_FIRST_POSITION=new Ee(j.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ee.FNC1_SECOND_POSITION=new Ee(j.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ee.HANZI=new Ee(j.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Ce{static decode(t,e,n,r){const s=new ae(t);let i=new S;const o=new Array;let a=-1,l=-1;try{let t,n=null,c=!1;do{if(s.available()<4)t=Ee.TERMINATOR;else{const e=s.readBits(4);t=Ee.forBits(e)}switch(t){case Ee.TERMINATOR:break;case Ee.FNC1_FIRST_POSITION:case Ee.FNC1_SECOND_POSITION:c=!0;break;case Ee.STRUCTURED_APPEND:if(s.available()<16)throw new _;a=s.readBits(8),l=s.readBits(8);break;case Ee.ECI:const u=Ce.parseECIValue(s);if(n=y.getCharacterSetECIByValue(u),null===n)throw new _;break;case Ee.HANZI:const h=s.readBits(4),d=s.readBits(t.getCharacterCountBits(e));h===Ce.GB2312_SUBSET&&Ce.decodeHanziSegment(s,i,d);break;default:const f=s.readBits(t.getCharacterCountBits(e));switch(t){case Ee.NUMERIC:Ce.decodeNumericSegment(s,i,f);break;case Ee.ALPHANUMERIC:Ce.decodeAlphanumericSegment(s,i,f,c);break;case Ee.BYTE:Ce.decodeByteSegment(s,i,f,n,o,r);break;case Ee.KANJI:Ce.decodeKanjiSegment(s,i,f);break;default:throw new _}}}while(t!==Ee.TERMINATOR)}catch(c){throw new _}return new W(t,i.toString(),0===o.length?null:o,null===n?null:n.toString(),a,l)}static decodeHanziSegment(t,e,n){if(13*n>t.available())throw new _;const r=new Uint8Array(2*n);let s=0;for(;n>0;){const e=t.readBits(13);let i=e/96<<8&4294967295|e%96;i+=i<959?41377:42657,r[s]=i>>8&255,r[s+1]=255&i,s+=2,n--}try{e.append(C.decode(r,A.GB2312))}catch(i){throw new _(i)}}static decodeKanjiSegment(t,e,n){if(13*n>t.available())throw new _;const r=new Uint8Array(2*n);let s=0;for(;n>0;){const e=t.readBits(13);let i=e/192<<8&4294967295|e%192;i+=i<7936?33088:49472,r[s]=i>>8,r[s+1]=i,s+=2,n--}try{e.append(C.decode(r,A.SHIFT_JIS))}catch(i){throw new _(i)}}static decodeByteSegment(t,e,n,r,s,i){if(8*n>t.available())throw new _;const o=new Uint8Array(n);for(let c=0;c<n;c++)o[c]=t.readBits(8);let a;a=null===r?A.guessEncoding(o,i):r.getName();try{e.append(C.decode(o,a))}catch(l){throw new _(l)}s.push(o)}static toAlphaNumericChar(t){if(t>=Ce.ALPHANUMERIC_CHARS.length)throw new _;return Ce.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,e,n,r){const s=e.length();for(;n>1;){if(t.available()<11)throw new _;const r=t.readBits(11);e.append(Ce.toAlphaNumericChar(Math.floor(r/45))),e.append(Ce.toAlphaNumericChar(r%45)),n-=2}if(1===n){if(t.available()<6)throw new _;e.append(Ce.toAlphaNumericChar(t.readBits(6)))}if(r)for(let i=s;i<e.length();i++)"%"===e.charAt(i)&&(i<e.length()-1&&"%"===e.charAt(i+1)?e.deleteCharAt(i+1):e.setCharAt(i,String.fromCharCode(29)))}static decodeNumericSegment(t,e,n){for(;n>=3;){if(t.available()<10)throw new _;const r=t.readBits(10);if(r>=1e3)throw new _;e.append(Ce.toAlphaNumericChar(Math.floor(r/100))),e.append(Ce.toAlphaNumericChar(Math.floor(r/10)%10)),e.append(Ce.toAlphaNumericChar(r%10)),n-=3}if(2===n){if(t.available()<7)throw new _;const n=t.readBits(7);if(n>=100)throw new _;e.append(Ce.toAlphaNumericChar(Math.floor(n/10))),e.append(Ce.toAlphaNumericChar(n%10))}else if(1===n){if(t.available()<4)throw new _;const n=t.readBits(4);if(n>=10)throw new _;e.append(Ce.toAlphaNumericChar(n))}}static parseECIValue(t){const e=t.readBits(8);if(0==(128&e))return 127&e;if(128==(192&e))return(63&e)<<8&4294967295|t.readBits(8);if(192==(224&e))return(31&e)<<16&4294967295|t.readBits(16);throw new _}}Ce.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Ce.GB2312_SUBSET=1;class Ae{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||null===t||t.length<3)return;const e=t[0];t[0]=t[2],t[2]=e}}class Se{constructor(){this.rsDecoder=new Q(q.QR_CODE_FIELD_256)}decodeBooleanArray(t,e){return this.decodeBitMatrix(I.parseFromBooleanArray(t),e)}decodeBitMatrix(t,e){const n=new _e(t);let r=null;try{return this.decodeBitMatrixParser(n,e)}catch(s){r=s}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const t=this.decodeBitMatrixParser(n,e);return t.setOther(new Ae(!0)),t}catch(s){if(null!==r)throw r;throw s}}decodeBitMatrixParser(t,e){const n=t.readVersion(),r=t.readFormatInformation().getErrorCorrectionLevel(),s=t.readCodewords(),i=ye.getDataBlocks(s,n,r);let o=0;for(const c of i)o+=c.getNumDataCodewords();const a=new Uint8Array(o);let l=0;for(const c of i){const t=c.getCodewords(),e=c.getNumDataCodewords();this.correctErrors(t,e);for(let n=0;n<e;n++)a[l++]=t[n]}return Ce.decode(a,n,r,e)}correctErrors(t,e){const n=new Int32Array(t);try{this.rsDecoder.decode(n,t.length-e)}catch(r){throw new l}for(let s=0;s<e;s++)t[s]=n[s]}}class Ie extends nt{constructor(t,e,n){super(t,e),this.estimatedModuleSize=n}aboutEquals(t,e,n){if(Math.abs(e-this.getY())<=t&&Math.abs(n-this.getX())<=t){const e=Math.abs(t-this.estimatedModuleSize);return e<=1||e<=this.estimatedModuleSize}return!1}combineEstimate(t,e,n){const r=(this.getX()+e)/2,s=(this.getY()+t)/2;return new Ie(r,s,(this.estimatedModuleSize+n)/2)}}class ve{constructor(t,e,n,r,s,i,o){this.image=t,this.startX=e,this.startY=n,this.width=r,this.height=s,this.moduleSize=i,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,e=this.height,n=t+this.width,r=this.startY+e/2,s=new Int32Array(3),i=this.image;for(let o=0;o<e;o++){const e=r+(0==(1&o)?Math.floor((o+1)/2):-Math.floor((o+1)/2));s[0]=0,s[1]=0,s[2]=0;let a=t;for(;a<n&&!i.get(a,e);)a++;let l=0;for(;a<n;){if(i.get(a,e))if(1===l)s[1]++;else if(2===l){if(this.foundPatternCross(s)){const t=this.handlePossibleCenter(s,e,a);if(null!==t)return t}s[0]=s[2],s[1]=1,s[2]=0,l=1}else s[++l]++;else 1===l&&l++,s[l]++;a++}if(this.foundPatternCross(s)){const t=this.handlePossibleCenter(s,e,n);if(null!==t)return t}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new v}static centerFromEnd(t,e){return e-t[2]-t[1]/2}foundPatternCross(t){const e=this.moduleSize,n=e/2;for(let r=0;r<3;r++)if(Math.abs(e-t[r])>=n)return!1;return!0}crossCheckVertical(t,e,n,r){const s=this.image,i=s.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;let a=t;for(;a>=0&&s.get(e,a)&&o[1]<=n;)o[1]++,a--;if(a<0||o[1]>n)return NaN;for(;a>=0&&!s.get(e,a)&&o[0]<=n;)o[0]++,a--;if(o[0]>n)return NaN;for(a=t+1;a<i&&s.get(e,a)&&o[1]<=n;)o[1]++,a++;if(a===i||o[1]>n)return NaN;for(;a<i&&!s.get(e,a)&&o[2]<=n;)o[2]++,a++;return o[2]>n||5*Math.abs(o[0]+o[1]+o[2]-r)>=2*r?NaN:this.foundPatternCross(o)?ve.centerFromEnd(o,a):NaN}handlePossibleCenter(t,e,n){const r=t[0]+t[1]+t[2],s=ve.centerFromEnd(t,n),i=this.crossCheckVertical(e,s,2*t[1],r);if(!isNaN(i)){const e=(t[0]+t[1]+t[2])/3;for(const t of this.possibleCenters)if(t.aboutEquals(e,i,s))return t.combineEstimate(i,s,e);const n=new Ie(s,i,e);this.possibleCenters.push(n),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(n)}return null}}class be extends nt{constructor(t,e,n,r){super(t,e),this.estimatedModuleSize=n,this.count=r,void 0===r&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,e,n){if(Math.abs(e-this.getY())<=t&&Math.abs(n-this.getX())<=t){const e=Math.abs(t-this.estimatedModuleSize);return e<=1||e<=this.estimatedModuleSize}return!1}combineEstimate(t,e,n){const r=this.count+1,s=(this.count*this.getX()+e)/r,i=(this.count*this.getY()+t)/r;return new be(s,i,(this.count*this.estimatedModuleSize+n)/r,r)}}class Te{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Re{constructor(t,e){this.image=t,this.resultPointCallback=e,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=e}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const e=null!=t&&void 0!==t.get(w.TRY_HARDER),n=null!=t&&void 0!==t.get(w.PURE_BARCODE),r=this.image,s=r.getHeight(),i=r.getWidth();let o=Math.floor(3*s/(4*Re.MAX_MODULES));(o<Re.MIN_SKIP||e)&&(o=Re.MIN_SKIP);let a=!1;const l=new Int32Array(5);for(let u=o-1;u<s&&!a;u+=o){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;let t=0;for(let e=0;e<i;e++)if(r.get(e,u))1==(1&t)&&t++,l[t]++;else if(0==(1&t))if(4===t)if(Re.foundPatternCross(l)){if(!0!==this.handlePossibleCenter(l,u,e,n)){l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,t=3;continue}if(o=2,!0===this.hasSkipped)a=this.haveMultiplyConfirmedCenters();else{const t=this.findRowSkip();t>l[2]&&(u+=t-l[2]-o,e=i-1)}t=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,t=3;else l[++t]++;else l[t]++;Re.foundPatternCross(l)&&!0===this.handlePossibleCenter(l,u,i,n)&&(o=l[0],this.hasSkipped&&(a=this.haveMultiplyConfirmedCenters()))}const c=this.selectBestPatterns();return nt.orderBestPatterns(c),new Te(c)}static centerFromEnd(t,e){return e-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let e=0;for(let s=0;s<5;s++){const n=t[s];if(0===n)return!1;e+=n}if(e<7)return!1;const n=e/7,r=n/2;return Math.abs(n-t[0])<r&&Math.abs(n-t[1])<r&&Math.abs(3*n-t[2])<3*r&&Math.abs(n-t[3])<r&&Math.abs(n-t[4])<r}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,e,n,r){const s=this.getCrossCheckStateCount();let i=0;const o=this.image;for(;t>=i&&e>=i&&o.get(e-i,t-i);)s[2]++,i++;if(t<i||e<i)return!1;for(;t>=i&&e>=i&&!o.get(e-i,t-i)&&s[1]<=n;)s[1]++,i++;if(t<i||e<i||s[1]>n)return!1;for(;t>=i&&e>=i&&o.get(e-i,t-i)&&s[0]<=n;)s[0]++,i++;if(s[0]>n)return!1;const a=o.getHeight(),l=o.getWidth();for(i=1;t+i<a&&e+i<l&&o.get(e+i,t+i);)s[2]++,i++;if(t+i>=a||e+i>=l)return!1;for(;t+i<a&&e+i<l&&!o.get(e+i,t+i)&&s[3]<n;)s[3]++,i++;if(t+i>=a||e+i>=l||s[3]>=n)return!1;for(;t+i<a&&e+i<l&&o.get(e+i,t+i)&&s[4]<n;)s[4]++,i++;return!(s[4]>=n)&&Math.abs(s[0]+s[1]+s[2]+s[3]+s[4]-r)<2*r&&Re.foundPatternCross(s)}crossCheckVertical(t,e,n,r){const s=this.image,i=s.getHeight(),o=this.getCrossCheckStateCount();let a=t;for(;a>=0&&s.get(e,a);)o[2]++,a--;if(a<0)return NaN;for(;a>=0&&!s.get(e,a)&&o[1]<=n;)o[1]++,a--;if(a<0||o[1]>n)return NaN;for(;a>=0&&s.get(e,a)&&o[0]<=n;)o[0]++,a--;if(o[0]>n)return NaN;for(a=t+1;a<i&&s.get(e,a);)o[2]++,a++;if(a===i)return NaN;for(;a<i&&!s.get(e,a)&&o[3]<n;)o[3]++,a++;if(a===i||o[3]>=n)return NaN;for(;a<i&&s.get(e,a)&&o[4]<n;)o[4]++,a++;return o[4]>=n||5*Math.abs(o[0]+o[1]+o[2]+o[3]+o[4]-r)>=2*r?NaN:Re.foundPatternCross(o)?Re.centerFromEnd(o,a):NaN}crossCheckHorizontal(t,e,n,r){const s=this.image,i=s.getWidth(),o=this.getCrossCheckStateCount();let a=t;for(;a>=0&&s.get(a,e);)o[2]++,a--;if(a<0)return NaN;for(;a>=0&&!s.get(a,e)&&o[1]<=n;)o[1]++,a--;if(a<0||o[1]>n)return NaN;for(;a>=0&&s.get(a,e)&&o[0]<=n;)o[0]++,a--;if(o[0]>n)return NaN;for(a=t+1;a<i&&s.get(a,e);)o[2]++,a++;if(a===i)return NaN;for(;a<i&&!s.get(a,e)&&o[3]<n;)o[3]++,a++;if(a===i||o[3]>=n)return NaN;for(;a<i&&s.get(a,e)&&o[4]<n;)o[4]++,a++;return o[4]>=n||5*Math.abs(o[0]+o[1]+o[2]+o[3]+o[4]-r)>=r?NaN:Re.foundPatternCross(o)?Re.centerFromEnd(o,a):NaN}handlePossibleCenter(t,e,n,r){const s=t[0]+t[1]+t[2]+t[3]+t[4];let i=Re.centerFromEnd(t,n),o=this.crossCheckVertical(e,Math.floor(i),t[2],s);if(!isNaN(o)&&(i=this.crossCheckHorizontal(Math.floor(i),Math.floor(o),t[2],s),!isNaN(i)&&(!r||this.crossCheckDiagonal(Math.floor(o),Math.floor(i),t[2],s)))){const t=s/7;let e=!1;const n=this.possibleCenters;for(let r=0,s=n.length;r<s;r++){const s=n[r];if(s.aboutEquals(t,o,i)){n[r]=s.combineEstimate(o,i,t),e=!0;break}}if(!e){const e=new be(i,o,t);n.push(e),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(e)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let t=null;for(const e of this.possibleCenters)if(e.getCount()>=Re.CENTER_QUORUM){if(null!=t)return this.hasSkipped=!0,Math.floor((Math.abs(t.getX()-e.getX())-Math.abs(t.getY()-e.getY()))/2);t=e}return 0}haveMultiplyConfirmedCenters(){let t=0,e=0;const n=this.possibleCenters.length;for(const i of this.possibleCenters)i.getCount()>=Re.CENTER_QUORUM&&(t++,e+=i.getEstimatedModuleSize());if(t<3)return!1;const r=e/n;let s=0;for(const i of this.possibleCenters)s+=Math.abs(i.getEstimatedModuleSize()-r);return s<=.05*e}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new v;const e=this.possibleCenters;let n;if(t>3){let r=0,s=0;for(const t of this.possibleCenters){const e=t.getEstimatedModuleSize();r+=e,s+=e*e}n=r/t;let i=Math.sqrt(s/t-n*n);e.sort((t,e)=>{const r=Math.abs(e.getEstimatedModuleSize()-n),s=Math.abs(t.getEstimatedModuleSize()-n);return r<s?-1:r>s?1:0});const o=Math.max(.2*n,i);for(let t=0;t<e.length&&e.length>3;t++)Math.abs(e[t].getEstimatedModuleSize()-n)>o&&(e.splice(t,1),t--)}if(e.length>3){let t=0;for(const n of e)t+=n.getEstimatedModuleSize();n=t/e.length,e.sort((t,e)=>{if(e.getCount()===t.getCount()){const r=Math.abs(e.getEstimatedModuleSize()-n),s=Math.abs(t.getEstimatedModuleSize()-n);return r<s?1:r>s?-1:0}return e.getCount()-t.getCount()}),e.splice(3)}return[e[0],e[1],e[2]]}}Re.CENTER_QUORUM=2,Re.MIN_SKIP=3,Re.MAX_MODULES=57;class Ne{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=null==t?null:t.get(w.NEED_RESULT_POINT_CALLBACK);const e=new Re(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(e)}processFinderPatternInfo(t){const e=t.getTopLeft(),n=t.getTopRight(),r=t.getBottomLeft(),s=this.calculateModuleSize(e,n,r);if(s<1)throw new v("No pattern found in proccess finder.");const i=Ne.computeDimension(e,n,r,s),o=me.getProvisionalVersionForDimension(i),a=o.getDimensionForVersion()-7;let l=null;if(o.getAlignmentPatternCenters().length>0){const t=n.getX()-e.getX()+r.getX(),i=n.getY()-e.getY()+r.getY(),o=1-3/a,c=Math.floor(e.getX()+o*(t-e.getX())),u=Math.floor(e.getY()+o*(i-e.getY()));for(let e=4;e<=16;e<<=1)try{l=this.findAlignmentInRegion(s,c,u,e);break}catch(d){if(!(d instanceof v))throw d}}const c=Ne.createTransform(e,n,r,l,i),u=Ne.sampleGrid(this.image,c,i);let h;return h=null===l?[r,e,n]:[r,e,n,l],new rt(u,h)}static createTransform(t,e,n,r,s){const i=s-3.5;let o,a,l,c;return null!==r?(o=r.getX(),a=r.getY(),l=i-3,c=l):(o=e.getX()-t.getX()+n.getX(),a=e.getY()-t.getY()+n.getY(),l=i,c=i),at.quadrilateralToQuadrilateral(3.5,3.5,i,3.5,l,c,3.5,i,t.getX(),t.getY(),e.getX(),e.getY(),o,a,n.getX(),n.getY())}static sampleGrid(t,e,n){return ct.getInstance().sampleGridWithTransform(t,n,n,e)}static computeDimension(t,e,n,r){const s=tt.round(nt.distance(t,e)/r),i=tt.round(nt.distance(t,n)/r);let o=Math.floor((s+i)/2)+7;switch(3&o){case 0:o++;break;case 2:o--;break;case 3:throw new v("Dimensions could be not found.")}return o}calculateModuleSize(t,e,n){return(this.calculateModuleSizeOneWay(t,e)+this.calculateModuleSizeOneWay(t,n))/2}calculateModuleSizeOneWay(t,e){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14}sizeOfBlackWhiteBlackRunBothWays(t,e,n,r){let s=this.sizeOfBlackWhiteBlackRun(t,e,n,r),i=1,o=t-(n-t);o<0?(i=t/(t-o),o=0):o>=this.image.getWidth()&&(i=(this.image.getWidth()-1-t)/(o-t),o=this.image.getWidth()-1);let a=Math.floor(e-(r-e)*i);return i=1,a<0?(i=e/(e-a),a=0):a>=this.image.getHeight()&&(i=(this.image.getHeight()-1-e)/(a-e),a=this.image.getHeight()-1),o=Math.floor(t+(o-t)*i),s+=this.sizeOfBlackWhiteBlackRun(t,e,o,a),s-1}sizeOfBlackWhiteBlackRun(t,e,n,r){const s=Math.abs(r-e)>Math.abs(n-t);if(s){let s=t;t=e,e=s,s=n,n=r,r=s}const i=Math.abs(n-t),o=Math.abs(r-e);let a=-i/2;const l=t<n?1:-1,c=e<r?1:-1;let u=0;const h=n+l;for(let d=t,f=e;d!==h;d+=l){if(1===u===this.image.get(s?f:d,s?d:f)){if(2===u)return tt.distance(d,f,t,e);u++}if(a+=o,a>0){if(f===r)break;f+=c,a-=i}}return 2===u?tt.distance(n+l,r,t,e):NaN}findAlignmentInRegion(t,e,n,r){const s=Math.floor(r*t),i=Math.max(0,e-s),o=Math.min(this.image.getWidth()-1,e+s);if(o-i<3*t)throw new v("Alignment top exceeds estimated module size.");const a=Math.max(0,n-s),l=Math.min(this.image.getHeight()-1,n+s);if(l-a<3*t)throw new v("Alignment bottom exceeds estimated module size.");return new ve(this.image,i,a,o-i,l-a,t,this.resultPointCallback).find()}}class Oe{constructor(){this.decoder=new Se}getDecoder(){return this.decoder}decode(t,e){let n,r;if(null!=e&&void 0!==e.get(w.PURE_BARCODE)){const s=Oe.extractPureBits(t.getBlackMatrix());n=this.decoder.decodeBitMatrix(s,e),r=Oe.NO_POINTS}else{const s=new Ne(t.getBlackMatrix()).detect(e);n=this.decoder.decodeBitMatrix(s.getBits(),e),r=s.getPoints()}n.getOther()instanceof Ae&&n.getOther().applyMirroredCorrection(r);const s=new x(n.getText(),n.getRawBytes(),void 0,r,L.QR_CODE,void 0),i=n.getByteSegments();null!==i&&s.putMetadata(G.BYTE_SEGMENTS,i);const o=n.getECLevel();return null!==o&&s.putMetadata(G.ERROR_CORRECTION_LEVEL,o),n.hasStructuredAppend()&&(s.putMetadata(G.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),s.putMetadata(G.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),s}reset(){}static extractPureBits(t){const e=t.getTopLeftOnBit(),n=t.getBottomRightOnBit();if(null===e||null===n)throw new v;const r=this.moduleSize(e,t);let s=e[1],i=n[1],o=e[0],a=n[0];if(o>=a||s>=i)throw new v;if(i-s!=a-o&&(a=o+(i-s),a>=t.getWidth()))throw new v;const l=Math.round((a-o+1)/r),c=Math.round((i-s+1)/r);if(l<=0||c<=0)throw new v;if(c!==l)throw new v;const u=Math.floor(r/2);s+=u,o+=u;const h=o+Math.floor((l-1)*r)-a;if(h>0){if(h>u)throw new v;o-=h}const d=s+Math.floor((c-1)*r)-i;if(d>0){if(d>u)throw new v;s-=d}const f=new I(l,c);for(let g=0;g<c;g++){const e=s+Math.floor(g*r);for(let n=0;n<l;n++)t.get(o+Math.floor(n*r),e)&&f.set(n,g)}return f}static moduleSize(t,e){const n=e.getHeight(),r=e.getWidth();let s=t[0],i=t[1],o=!0,a=0;for(;s<r&&i<n;){if(o!==e.get(s,i)){if(5==++a)break;o=!o}s++,i++}if(s===r||i===n)throw new v;return(s-t[0])/7}}Oe.NO_POINTS=new Array;class De{PDF417Common(){}static getBitCountSum(t){return tt.sum(t)}static toIntArray(t){if(null==t||!t.length)return De.EMPTY_INT_ARRAY;const e=new Int32Array(t.length);let n=0;for(const r of t)e[n++]=r;return e}static getCodeword(t){const e=f.binarySearch(De.SYMBOL_TABLE,262143&t);return e<0?-1:(De.CODEWORD_TABLE[e]-1)%De.NUMBER_OF_CODEWORDS}}De.NUMBER_OF_CODEWORDS=929,De.MAX_CODEWORDS_IN_BARCODE=De.NUMBER_OF_CODEWORDS-1,De.MIN_ROWS_IN_BARCODE=3,De.MAX_ROWS_IN_BARCODE=90,De.MODULES_IN_CODEWORD=17,De.MODULES_IN_STOP_PATTERN=18,De.BARS_IN_MODULE=8,De.EMPTY_INT_ARRAY=new Int32Array([]),De.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),De.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Pe{constructor(t,e){this.bits=t,this.points=e}getBits(){return this.bits}getPoints(){return this.points}}class Me{static detectMultiple(t,e,n){let r=t.getBlackMatrix(),s=Me.detect(n,r);return s.length||(r=r.clone(),r.rotate180(),s=Me.detect(n,r)),new Pe(r,s)}static detect(t,e){const n=new Array;let r=0,s=0,i=!1;for(;r<e.getHeight();){const o=Me.findVertices(e,r,s);if(null!=o[0]||null!=o[3]){if(i=!0,n.push(o),!t)break;null!=o[2]?(s=Math.trunc(o[2].getX()),r=Math.trunc(o[2].getY())):(s=Math.trunc(o[4].getX()),r=Math.trunc(o[4].getY()))}else{if(!i)break;i=!1,s=0;for(const t of n)null!=t[1]&&(r=Math.trunc(Math.max(r,t[1].getY()))),null!=t[3]&&(r=Math.max(r,Math.trunc(t[3].getY())));r+=Me.ROW_STEP}}return n}static findVertices(t,e,n){const r=t.getHeight(),s=t.getWidth(),i=new Array(8);return Me.copyToResult(i,Me.findRowsWithPattern(t,r,s,e,n,Me.START_PATTERN),Me.INDEXES_START_PATTERN),null!=i[4]&&(n=Math.trunc(i[4].getX()),e=Math.trunc(i[4].getY())),Me.copyToResult(i,Me.findRowsWithPattern(t,r,s,e,n,Me.STOP_PATTERN),Me.INDEXES_STOP_PATTERN),i}static copyToResult(t,e,n){for(let r=0;r<n.length;r++)t[n[r]]=e[r]}static findRowsWithPattern(t,e,n,r,s,i){const o=new Array(4);let a=!1;const l=new Int32Array(i.length);for(;r<e;r+=Me.ROW_STEP){let e=Me.findGuardPattern(t,s,r,n,!1,i,l);if(null!=e){for(;r>0;){const o=Me.findGuardPattern(t,s,--r,n,!1,i,l);if(null==o){r++;break}e=o}o[0]=new nt(e[0],r),o[1]=new nt(e[1],r),a=!0;break}}let c=r+1;if(a){let r=0,s=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);for(;c<e;c++){const e=Me.findGuardPattern(t,s[0],c,n,!1,i,l);if(null!=e&&Math.abs(s[0]-e[0])<Me.MAX_PATTERN_DRIFT&&Math.abs(s[1]-e[1])<Me.MAX_PATTERN_DRIFT)s=e,r=0;else{if(r>Me.SKIPPED_ROW_COUNT_MAX)break;r++}}c-=r+1,o[2]=new nt(s[0],c),o[3]=new nt(s[1],c)}return c-r<Me.BARCODE_MIN_HEIGHT&&f.fill(o,null),o}static findGuardPattern(t,e,n,r,s,i,o){f.fillWithin(o,0,o.length,0);let a=e,l=0;for(;t.get(a,n)&&a>0&&l++<Me.MAX_PIXEL_DRIFT;)a--;let c=a,h=0,d=i.length;for(let f=s;c<r;c++)if(t.get(c,n)!==f)o[h]++;else{if(h===d-1){if(Me.patternMatchVariance(o,i,Me.MAX_INDIVIDUAL_VARIANCE)<Me.MAX_AVG_VARIANCE)return new Int32Array([a,c]);a+=o[0]+o[1],u.arraycopy(o,2,o,0,h-1),o[h-1]=0,o[h]=0,h--}else h++;o[h]=1,f=!f}return h===d-1&&Me.patternMatchVariance(o,i,Me.MAX_INDIVIDUAL_VARIANCE)<Me.MAX_AVG_VARIANCE?new Int32Array([a,c-1]):null}static patternMatchVariance(t,e,n){let r=t.length,s=0,i=0;for(let l=0;l<r;l++)s+=t[l],i+=e[l];if(s<i)return 1/0;let o=s/i;n*=o;let a=0;for(let l=0;l<r;l++){let r=t[l],s=e[l]*o,i=r>s?r-s:s-r;if(i>n)return 1/0;a+=i}return a/s}}Me.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Me.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Me.MAX_AVG_VARIANCE=.42,Me.MAX_INDIVIDUAL_VARIANCE=.8,Me.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Me.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Me.MAX_PIXEL_DRIFT=3,Me.MAX_PATTERN_DRIFT=5,Me.SKIPPED_ROW_COUNT_MAX=25,Me.ROW_STEP=5,Me.BARCODE_MIN_HEIGHT=10;class Be{constructor(t,e){if(0===e.length)throw new o;this.field=t;let n=e.length;if(n>1&&0===e[0]){let t=1;for(;t<n&&0===e[t];)t++;t===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-t),u.arraycopy(e,t,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(0===t)return this.getCoefficient(0);if(1===t){let t=0;for(let e of this.coefficients)t=this.field.add(t,e);return t}let e=this.coefficients[0],n=this.coefficients.length;for(let r=1;r<n;r++)e=this.field.add(this.field.multiply(t,e),this.coefficients[r]);return e}add(t){if(!this.field.equals(t.field))throw new o("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let e=this.coefficients,n=t.coefficients;if(e.length>n.length){let t=e;e=n,n=t}let r=new Int32Array(n.length),s=n.length-e.length;u.arraycopy(n,0,r,0,s);for(let i=s;i<n.length;i++)r[i]=this.field.add(e[i-s],n[i]);return new Be(this.field,r)}subtract(t){if(!this.field.equals(t.field))throw new o("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof Be?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new o("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new Be(this.field,new Int32Array([0]));let e=this.coefficients,n=e.length,r=t.coefficients,s=r.length,i=new Int32Array(n+s-1);for(let o=0;o<n;o++){let t=e[o];for(let e=0;e<s;e++)i[o+e]=this.field.add(i[o+e],this.field.multiply(t,r[e]))}return new Be(this.field,i)}negative(){let t=this.coefficients.length,e=new Int32Array(t);for(let n=0;n<t;n++)e[n]=this.field.subtract(0,this.coefficients[n]);return new Be(this.field,e)}multiplyScalar(t){if(0===t)return new Be(this.field,new Int32Array([0]));if(1===t)return this;let e=this.coefficients.length,n=new Int32Array(e);for(let r=0;r<e;r++)n[r]=this.field.multiply(this.coefficients[r],t);return new Be(this.field,n)}multiplyByMonomial(t,e){if(t<0)throw new o;if(0===e)return new Be(this.field,new Int32Array([0]));let n=this.coefficients.length,r=new Int32Array(n+t);for(let s=0;s<n;s++)r[s]=this.field.multiply(this.coefficients[s],e);return new Be(this.field,r)}toString(){let t=new S;for(let e=this.getDegree();e>=0;e--){let n=this.getCoefficient(e);0!==n&&(n<0?(t.append(" - "),n=-n):t.length()>0&&t.append(" + "),0!==e&&1===n||t.append(n),0!==e&&(1===e?t.append("x"):(t.append("x^"),t.append(e))))}return t.toString()}}class xe extends class{add(t,e){return(t+e)%this.modulus}subtract(t,e){return(this.modulus+t-e)%this.modulus}exp(t){return this.expTable[t]}log(t){if(0===t)throw new o;return this.logTable[t]}inverse(t){if(0===t)throw new Y;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,e){return 0===t||0===e?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}{constructor(t,e){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let n=1;for(let r=0;r<t;r++)this.expTable[r]=n,n=n*e%t;for(let r=0;r<t-1;r++)this.logTable[this.expTable[r]]=r;this.zero=new Be(this,new Int32Array([0])),this.one=new Be(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,e){if(t<0)throw new o;if(0===e)return this.zero;let n=new Int32Array(t+1);return n[0]=e,new Be(this,n)}}xe.PDF417_GF=new xe(De.NUMBER_OF_CODEWORDS,3);class ke{constructor(){this.field=xe.PDF417_GF}decode(t,e,n){let r=new Be(this.field,t),s=new Int32Array(e),i=!1;for(let l=e;l>0;l--){let t=r.evaluateAt(this.field.exp(l));s[e-l]=t,0!==t&&(i=!0)}if(!i)return 0;let o=this.field.getOne();if(null!=n)for(const l of n){let e=this.field.exp(t.length-1-l),n=new Be(this.field,new Int32Array([this.field.subtract(0,e),1]));o=o.multiply(n)}let a=new Be(this.field,s),c=this.runEuclideanAlgorithm(this.field.buildMonomial(e,1),a,e),u=c[0],h=c[1],d=this.findErrorLocations(u),f=this.findErrorMagnitudes(h,u,d);for(let g=0;g<d.length;g++){let e=t.length-1-this.field.log(d[g]);if(e<0)throw l.getChecksumInstance();t[e]=this.field.subtract(t[e],f[g])}return d.length}runEuclideanAlgorithm(t,e,n){if(t.getDegree()<e.getDegree()){let n=t;t=e,e=n}let r=t,s=e,i=this.field.getZero(),o=this.field.getOne();for(;s.getDegree()>=Math.round(n/2);){let t=r,e=i;if(r=s,i=o,r.isZero())throw l.getChecksumInstance();s=t;let n=this.field.getZero(),a=r.getCoefficient(r.getDegree()),c=this.field.inverse(a);for(;s.getDegree()>=r.getDegree()&&!s.isZero();){let t=s.getDegree()-r.getDegree(),e=this.field.multiply(s.getCoefficient(s.getDegree()),c);n=n.add(this.field.buildMonomial(t,e)),s=s.subtract(r.multiplyByMonomial(t,e))}o=n.multiply(i).subtract(e).negative()}let a=o.getCoefficient(0);if(0===a)throw l.getChecksumInstance();let c=this.field.inverse(a);return[o.multiply(c),s.multiply(c)]}findErrorLocations(t){let e=t.getDegree(),n=new Int32Array(e),r=0;for(let s=1;s<this.field.getSize()&&r<e;s++)0===t.evaluateAt(s)&&(n[r]=this.field.inverse(s),r++);if(r!==e)throw l.getChecksumInstance();return n}findErrorMagnitudes(t,e,n){let r=e.getDegree(),s=new Int32Array(r);for(let l=1;l<=r;l++)s[r-l]=this.field.multiply(l,e.getCoefficient(l));let i=new Be(this.field,s),o=n.length,a=new Int32Array(o);for(let l=0;l<o;l++){let e=this.field.inverse(n[l]),r=this.field.subtract(0,t.evaluateAt(e)),s=this.field.inverse(i.evaluateAt(e));a[l]=this.field.multiply(r,s)}return a}}class Le{constructor(t,e,n,r,s){t instanceof Le?this.constructor_2(t):this.constructor_1(t,e,n,r,s)}constructor_1(t,e,n,r,s){const i=null==e||null==n,o=null==r||null==s;if(i&&o)throw new v;i?(e=new nt(0,r.getY()),n=new nt(0,s.getY())):o&&(r=new nt(t.getWidth()-1,e.getY()),s=new nt(t.getWidth()-1,n.getY())),this.image=t,this.topLeft=e,this.bottomLeft=n,this.topRight=r,this.bottomRight=s,this.minX=Math.trunc(Math.min(e.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),s.getX())),this.minY=Math.trunc(Math.min(e.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),s.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,e){return null==t?e:null==e?t:new Le(t.image,t.topLeft,t.bottomLeft,e.topRight,e.bottomRight)}addMissingRows(t,e,n){let r=this.topLeft,s=this.bottomLeft,i=this.topRight,o=this.bottomRight;if(t>0){let e=n?this.topLeft:this.topRight,s=Math.trunc(e.getY()-t);s<0&&(s=0);let o=new nt(e.getX(),s);n?r=o:i=o}if(e>0){let t=n?this.bottomLeft:this.bottomRight,r=Math.trunc(t.getY()+e);r>=this.image.getHeight()&&(r=this.image.getHeight()-1);let i=new nt(t.getX(),r);n?s=i:o=i}return new Le(this.image,r,s,i,o)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Fe{constructor(t,e,n,r){this.columnCount=t,this.errorCorrectionLevel=r,this.rowCountUpperPart=e,this.rowCountLowerPart=n,this.rowCount=e+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ue{constructor(){this.buffer=""}static form(t,e){let n=-1;return t.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(t,r,s,i,o,a){if("%%"===t)return"%";if(void 0===e[++n])return;t=i?parseInt(i.substr(1)):void 0;let l,c=o?parseInt(o.substr(1)):void 0;switch(a){case"s":l=e[n];break;case"c":l=e[n][0];break;case"f":l=parseFloat(e[n]).toFixed(t);break;case"p":l=parseFloat(e[n]).toPrecision(t);break;case"e":l=parseFloat(e[n]).toExponential(t);break;case"x":l=parseInt(e[n]).toString(c||16);break;case"d":l=parseFloat(parseInt(e[n],c||10).toPrecision(t)).toFixed(0)}l="object"==typeof l?JSON.stringify(l):(+l).toString(c);let u=parseInt(s),h=s&&s[0]+""=="0"?"0":" ";for(;l.length<u;)l=void 0!==r?l+h:h+l;return l})}format(t,...e){this.buffer+=Ue.form(t,e)}toString(){return this.buffer}}class Ve{constructor(t){this.boundingBox=new Le(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let e=this.getCodeword(t);if(null!=e)return e;for(let n=1;n<Ve.MAX_NEARBY_DISTANCE;n++){let r=this.imageRowToCodewordIndex(t)-n;if(r>=0&&(e=this.codewords[r],null!=e))return e;if(r=this.imageRowToCodewordIndex(t)+n,r<this.codewords.length&&(e=this.codewords[r],null!=e))return e}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,e){this.codewords[this.imageRowToCodewordIndex(t)]=e}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new Ue;let e=0;for(const n of this.codewords)null!=n?t.format("%3d: %3d|%3d%n",e++,n.getRowNumber(),n.getValue()):t.format("%3d:    |   %n",e++);return t.toString()}}Ve.MAX_NEARBY_DISTANCE=5;class He{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let e=this.values.get(t);null==e&&(e=0),e++,this.values.set(t,e)}getValue(){let t=-1,e=new Array;for(const[n,r]of this.values.entries()){const s={getKey:()=>n,getValue:()=>r};s.getValue()>t?(t=s.getValue(),e=[],e.push(s.getKey())):s.getValue()===t&&e.push(s.getKey())}return De.toIntArray(e)}getConfidence(t){return this.values.get(t)}}class je extends Ve{constructor(t,e){super(t),this._isLeft=e}setRowNumbers(){for(let t of this.getCodewords())null!=t&&t.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let e=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(e,t);let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),s=this._isLeft?n.getBottomLeft():n.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(r.getY())),o=this.imageRowToCodewordIndex(Math.trunc(s.getY())),a=-1,l=1,c=0;for(let u=i;u<o;u++){if(null==e[u])continue;let n=e[u],r=n.getRowNumber()-a;if(0===r)c++;else if(1===r)l=Math.max(l,c),c=1,a=n.getRowNumber();else if(r<0||n.getRowNumber()>=t.getRowCount()||r>u)e[u]=null;else{let t;t=l>2?(l-2)*r:r;let s=t>=u;for(let n=1;n<=t&&!s;n++)s=null!=e[u-n];s?e[u]=null:(a=n.getRowNumber(),c=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(null==t)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let e=new Int32Array(t.getRowCount());for(let n of this.getCodewords())if(null!=n){let t=n.getRowNumber();if(t>=e.length)continue;e[t]++}return e}adjustIncompleteIndicatorColumnRowNumbers(t){let e=this.getBoundingBox(),n=this._isLeft?e.getTopLeft():e.getTopRight(),r=this._isLeft?e.getBottomLeft():e.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(n.getY())),i=this.imageRowToCodewordIndex(Math.trunc(r.getY())),o=this.getCodewords(),a=-1;for(let l=s;l<i;l++){if(null==o[l])continue;let e=o[l];e.setRowNumberAsRowIndicatorColumn();let n=e.getRowNumber()-a;0===n||(1===n?a=e.getRowNumber():e.getRowNumber()>=t.getRowCount()?o[l]=null:a=e.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),e=new He,n=new He,r=new He,s=new He;for(let o of t){if(null==o)continue;o.setRowNumberAsRowIndicatorColumn();let t=o.getValue()%30,i=o.getRowNumber();switch(this._isLeft||(i+=2),i%3){case 0:n.setValue(3*t+1);break;case 1:s.setValue(t/3),r.setValue(t%3);break;case 2:e.setValue(t+1)}}if(0===e.getValue().length||0===n.getValue().length||0===r.getValue().length||0===s.getValue().length||e.getValue()[0]<1||n.getValue()[0]+r.getValue()[0]<De.MIN_ROWS_IN_BARCODE||n.getValue()[0]+r.getValue()[0]>De.MAX_ROWS_IN_BARCODE)return null;let i=new Fe(e.getValue()[0],n.getValue()[0],r.getValue()[0],s.getValue()[0]);return this.removeIncorrectCodewords(t,i),i}removeIncorrectCodewords(t,e){for(let n=0;n<t.length;n++){let r=t[n];if(null==t[n])continue;let s=r.getValue()%30,i=r.getRowNumber();if(i>e.getRowCount())t[n]=null;else switch(this._isLeft||(i+=2),i%3){case 0:3*s+1!==e.getRowCountUpperPart()&&(t[n]=null);break;case 1:Math.trunc(s/3)===e.getErrorCorrectionLevel()&&s%3===e.getRowCountLowerPart()||(t[n]=null);break;case 2:s+1!==e.getColumnCount()&&(t[n]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class ze{constructor(t,e){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=e,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t,e=De.MAX_CODEWORDS_IN_BARCODE;do{t=e,e=this.adjustRowNumbersAndGetCount()}while(e>0&&e<t);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){null!=t&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(0===t)return 0;for(let e=1;e<this.barcodeColumnCount+1;e++){let t=this.detectionResultColumns[e].getCodewords();for(let n=0;n<t.length;n++)null!=t[n]&&(t[n].hasValidRowNumber()||this.adjustRowNumbers(e,n,t))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let t=this.detectionResultColumns[0].getCodewords(),e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++)if(null!=t[n]&&null!=e[n]&&t[n].getRowNumber()===e[n].getRowNumber())for(let e=1;e<=this.barcodeColumnCount;e++){let r=this.detectionResultColumns[e].getCodewords()[n];null!=r&&(r.setRowNumber(t[n].getRowNumber()),r.hasValidRowNumber()||(this.detectionResultColumns[e].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let t=0,e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++){if(null==e[n])continue;let r=e[n].getRowNumber(),s=0;for(let e=this.barcodeColumnCount+1;e>0&&s<this.ADJUST_ROW_NUMBER_SKIP;e--){let i=this.detectionResultColumns[e].getCodewords()[n];null!=i&&(s=ze.adjustRowNumberIfValid(r,s,i),i.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let t=0,e=this.detectionResultColumns[0].getCodewords();for(let n=0;n<e.length;n++){if(null==e[n])continue;let r=e[n].getRowNumber(),s=0;for(let e=1;e<this.barcodeColumnCount+1&&s<this.ADJUST_ROW_NUMBER_SKIP;e++){let i=this.detectionResultColumns[e].getCodewords()[n];null!=i&&(s=ze.adjustRowNumberIfValid(r,s,i),i.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,e,n){return null==n||n.hasValidRowNumber()||(n.isValidRowNumber(t)?(n.setRowNumber(t),e=0):++e),e}adjustRowNumbers(t,e,n){let r=n[e],s=this.detectionResultColumns[t-1].getCodewords(),i=s;null!=this.detectionResultColumns[t+1]&&(i=this.detectionResultColumns[t+1].getCodewords());let o=new Array(14);o[2]=s[e],o[3]=i[e],e>0&&(o[0]=n[e-1],o[4]=s[e-1],o[5]=i[e-1]),e>1&&(o[8]=n[e-2],o[10]=s[e-2],o[11]=i[e-2]),e<n.length-1&&(o[1]=n[e+1],o[6]=s[e+1],o[7]=i[e+1]),e<n.length-2&&(o[9]=n[e+2],o[12]=s[e+2],o[13]=i[e+2]);for(let a of o)if(ze.adjustRowNumber(r,a))return}static adjustRowNumber(t,e){return!(null==e||!e.hasValidRowNumber()||e.getBucket()!==t.getBucket()||(t.setRowNumber(e.getRowNumber()),0))}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,e){this.detectionResultColumns[t]=e}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];null==t&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let e=new Ue;for(let n=0;n<t.getCodewords().length;n++){e.format("CW %3d:",n);for(let t=0;t<this.barcodeColumnCount+2;t++){if(null==this.detectionResultColumns[t]){e.format("    |   ");continue}let r=this.detectionResultColumns[t].getCodewords()[n];null!=r?e.format(" %3d|%3d",r.getRowNumber(),r.getValue()):e.format("    |   ")}e.format("%n")}return e.toString()}}class Ge{constructor(t,e,n,r){this.rowNumber=Ge.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(e),this.bucket=Math.trunc(n),this.value=Math.trunc(r)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==Ge.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}Ge.BARCODE_ROW_UNKNOWN=-1;class We{static initialize(){for(let t=0;t<De.SYMBOL_TABLE.length;t++){let e=De.SYMBOL_TABLE[t],n=1&e;for(let r=0;r<De.BARS_IN_MODULE;r++){let s=0;for(;(1&e)===n;)s+=1,e>>=1;n=1&e,We.RATIOS_TABLE[t]||(We.RATIOS_TABLE[t]=new Array(De.BARS_IN_MODULE)),We.RATIOS_TABLE[t][De.BARS_IN_MODULE-r-1]=Math.fround(s/De.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let e=We.getDecodedCodewordValue(We.sampleBitCounts(t));return-1!==e?e:We.getClosestDecodedValue(t)}static sampleBitCounts(t){let e=tt.sum(t),n=new Int32Array(De.BARS_IN_MODULE),r=0,s=0;for(let i=0;i<De.MODULES_IN_CODEWORD;i++)s+t[r]<=e/(2*De.MODULES_IN_CODEWORD)+i*e/De.MODULES_IN_CODEWORD&&(s+=t[r],r++),n[r]++;return n}static getDecodedCodewordValue(t){let e=We.getBitValue(t);return-1===De.getCodeword(e)?-1:e}static getBitValue(t){let e=0;for(let n=0;n<t.length;n++)for(let r=0;r<t[n];r++)e=e<<1|(n%2==0?1:0);return Math.trunc(e)}static getClosestDecodedValue(t){let e=tt.sum(t),n=new Array(De.BARS_IN_MODULE);if(e>1)for(let i=0;i<n.length;i++)n[i]=Math.fround(t[i]/e);let r=et.MAX_VALUE,s=-1;this.bSymbolTableReady||We.initialize();for(let i=0;i<We.RATIOS_TABLE.length;i++){let t=0,e=We.RATIOS_TABLE[i];for(let s=0;s<De.BARS_IN_MODULE;s++){let i=Math.fround(e[s]-n[s]);if(t+=Math.fround(i*i),t>=r)break}t<r&&(r=t,s=De.SYMBOL_TABLE[i])}return s}}We.bSymbolTableReady=!1,We.RATIOS_TABLE=new Array(De.SYMBOL_TABLE.length).map(t=>new Array(De.BARS_IN_MODULE));class Xe{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class Ze{static parseLong(t,e){return parseInt(t,e)}}class Ye extends s{}Ye.kind="NullPointerException";class qe extends s{}class $e extends class{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,e,n){if(null==t)throw new Ye;if(e<0||e>t.length||n<0||e+n>t.length||e+n<0)throw new h;if(0!==n)for(let r=0;r<n;r++)this.write(t[e+r])}flush(){}close(){}}{constructor(t=32){if(super(),this.count=0,t<0)throw new o("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let e=this.buf.length<<1;if(e-t<0&&(e=t),e<0){if(t<0)throw new qe;e=g.MAX_VALUE}this.buf=f.copyOfUint8Array(this.buf,e)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,e,n){if(e<0||e>t.length||n<0||e+n-t.length>0)throw new h;this.ensureCapacity(this.count+n),u.arraycopy(t,e,this.buf,this.count,n),this.count+=n}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return f.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?"string"==typeof t?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}function Ke(){if("undefined"!=typeof window)return window.BigInt||null;if("undefined"!=typeof global)return global.BigInt||null;if("undefined"!=typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Qe;function Je(t){if(void 0===Qe&&(Qe=Ke()),null===Qe)throw new Error("BigInt is not supported!");return Qe(t)}!function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(z||(z={}));class tn{static decode(t,e){let n=new S(""),r=y.ISO8859_1;n.enableDecoding(r);let s=1,i=t[s++],o=new Xe;for(;s<t[0];){switch(i){case tn.TEXT_COMPACTION_MODE_LATCH:s=tn.textCompaction(t,s,n);break;case tn.BYTE_COMPACTION_MODE_LATCH:case tn.BYTE_COMPACTION_MODE_LATCH_6:s=tn.byteCompaction(i,t,r,s,n);break;case tn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[s++]);break;case tn.NUMERIC_COMPACTION_MODE_LATCH:s=tn.numericCompaction(t,s,n);break;case tn.ECI_CHARSET:y.getCharacterSetECIByValue(t[s++]);break;case tn.ECI_GENERAL_PURPOSE:s+=2;break;case tn.ECI_USER_DEFINED:s++;break;case tn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:s=tn.decodeMacroBlock(t,s,o);break;case tn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case tn.MACRO_PDF417_TERMINATOR:throw new _;default:s--,s=tn.textCompaction(t,s,n)}if(!(s<t.length))throw _.getFormatInstance();i=t[s++]}if(0===n.length())throw _.getFormatInstance();let a=new W(null,n.toString(),null,e);return a.setOther(o),a}static decodeMacroBlock(t,e,n){if(e+tn.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw _.getFormatInstance();let r=new Int32Array(tn.NUMBER_OF_SEQUENCE_CODEWORDS);for(let o=0;o<tn.NUMBER_OF_SEQUENCE_CODEWORDS;o++,e++)r[o]=t[e];n.setSegmentIndex(g.parseInt(tn.decodeBase900toBase10(r,tn.NUMBER_OF_SEQUENCE_CODEWORDS)));let s=new S;e=tn.textCompaction(t,e,s),n.setFileId(s.toString());let i=-1;for(t[e]===tn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(i=e+1);e<t[0];)switch(t[e]){case tn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t[++e]){case tn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let r=new S;e=tn.textCompaction(t,e+1,r),n.setFileName(r.toString());break;case tn.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let s=new S;e=tn.textCompaction(t,e+1,s),n.setSender(s.toString());break;case tn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let i=new S;e=tn.textCompaction(t,e+1,i),n.setAddressee(i.toString());break;case tn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let o=new S;e=tn.numericCompaction(t,e+1,o),n.setSegmentCount(g.parseInt(o.toString()));break;case tn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let a=new S;e=tn.numericCompaction(t,e+1,a),n.setTimestamp(Ze.parseLong(a.toString()));break;case tn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let l=new S;e=tn.numericCompaction(t,e+1,l),n.setChecksum(g.parseInt(l.toString()));break;case tn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let c=new S;e=tn.numericCompaction(t,e+1,c),n.setFileSize(Ze.parseLong(c.toString()));break;default:throw _.getFormatInstance()}break;case tn.MACRO_PDF417_TERMINATOR:e++,n.setLastSegment(!0);break;default:throw _.getFormatInstance()}if(-1!==i){let r=e-i;n.isLastSegment()&&r--,n.setOptionalData(f.copyOfRange(t,i,i+r))}return e}static textCompaction(t,e,n){let r=new Int32Array(2*(t[0]-e)),s=new Int32Array(2*(t[0]-e)),i=0,o=!1;for(;e<t[0]&&!o;){let n=t[e++];if(n<tn.TEXT_COMPACTION_MODE_LATCH)r[i]=n/30,r[i+1]=n%30,i+=2;else switch(n){case tn.TEXT_COMPACTION_MODE_LATCH:r[i++]=tn.TEXT_COMPACTION_MODE_LATCH;break;case tn.BYTE_COMPACTION_MODE_LATCH:case tn.BYTE_COMPACTION_MODE_LATCH_6:case tn.NUMERIC_COMPACTION_MODE_LATCH:case tn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case tn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case tn.MACRO_PDF417_TERMINATOR:e--,o=!0;break;case tn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r[i]=tn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,n=t[e++],s[i]=n,i++}}return tn.decodeTextCompaction(r,s,i,n),e}static decodeTextCompaction(t,e,n,r){let s=z.ALPHA,i=z.ALPHA,o=0;for(;o<n;){let n=t[o],a="";switch(s){case z.ALPHA:if(n<26)a=String.fromCharCode(65+n);else switch(n){case 26:a=" ";break;case tn.LL:s=z.LOWER;break;case tn.ML:s=z.MIXED;break;case tn.PS:i=s,s=z.PUNCT_SHIFT;break;case tn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[o]);break;case tn.TEXT_COMPACTION_MODE_LATCH:s=z.ALPHA}break;case z.LOWER:if(n<26)a=String.fromCharCode(97+n);else switch(n){case 26:a=" ";break;case tn.AS:i=s,s=z.ALPHA_SHIFT;break;case tn.ML:s=z.MIXED;break;case tn.PS:i=s,s=z.PUNCT_SHIFT;break;case tn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[o]);break;case tn.TEXT_COMPACTION_MODE_LATCH:s=z.ALPHA}break;case z.MIXED:if(n<tn.PL)a=tn.MIXED_CHARS[n];else switch(n){case tn.PL:s=z.PUNCT;break;case 26:a=" ";break;case tn.LL:s=z.LOWER;break;case tn.AL:s=z.ALPHA;break;case tn.PS:i=s,s=z.PUNCT_SHIFT;break;case tn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[o]);break;case tn.TEXT_COMPACTION_MODE_LATCH:s=z.ALPHA}break;case z.PUNCT:if(n<tn.PAL)a=tn.PUNCT_CHARS[n];else switch(n){case tn.PAL:s=z.ALPHA;break;case tn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[o]);break;case tn.TEXT_COMPACTION_MODE_LATCH:s=z.ALPHA}break;case z.ALPHA_SHIFT:if(s=i,n<26)a=String.fromCharCode(65+n);else switch(n){case 26:a=" ";break;case tn.TEXT_COMPACTION_MODE_LATCH:s=z.ALPHA}break;case z.PUNCT_SHIFT:if(s=i,n<tn.PAL)a=tn.PUNCT_CHARS[n];else switch(n){case tn.PAL:s=z.ALPHA;break;case tn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[o]);break;case tn.TEXT_COMPACTION_MODE_LATCH:s=z.ALPHA}}""!==a&&r.append(a),o++}}static byteCompaction(t,e,n,r,s){let i=new $e,o=0,a=0,l=!1;switch(t){case tn.BYTE_COMPACTION_MODE_LATCH:let t=new Int32Array(6),n=e[r++];for(;r<e[0]&&!l;)switch(t[o++]=n,a=900*a+n,n=e[r++],n){case tn.TEXT_COMPACTION_MODE_LATCH:case tn.BYTE_COMPACTION_MODE_LATCH:case tn.NUMERIC_COMPACTION_MODE_LATCH:case tn.BYTE_COMPACTION_MODE_LATCH_6:case tn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case tn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case tn.MACRO_PDF417_TERMINATOR:r--,l=!0;break;default:if(o%5==0&&o>0){for(let t=0;t<6;++t)i.write(Number(Je(a)>>Je(8*(5-t))));a=0,o=0}}r===e[0]&&n<tn.TEXT_COMPACTION_MODE_LATCH&&(t[o++]=n);for(let e=0;e<o;e++)i.write(t[e]);break;case tn.BYTE_COMPACTION_MODE_LATCH_6:for(;r<e[0]&&!l;){let t=e[r++];if(t<tn.TEXT_COMPACTION_MODE_LATCH)o++,a=900*a+t;else switch(t){case tn.TEXT_COMPACTION_MODE_LATCH:case tn.BYTE_COMPACTION_MODE_LATCH:case tn.NUMERIC_COMPACTION_MODE_LATCH:case tn.BYTE_COMPACTION_MODE_LATCH_6:case tn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case tn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case tn.MACRO_PDF417_TERMINATOR:r--,l=!0}if(o%5==0&&o>0){for(let t=0;t<6;++t)i.write(Number(Je(a)>>Je(8*(5-t))));a=0,o=0}}}return s.append(C.decode(i.toByteArray(),n)),r}static numericCompaction(t,e,n){let r=0,s=!1,i=new Int32Array(tn.MAX_NUMERIC_CODEWORDS);for(;e<t[0]&&!s;){let o=t[e++];if(e===t[0]&&(s=!0),o<tn.TEXT_COMPACTION_MODE_LATCH)i[r]=o,r++;else switch(o){case tn.TEXT_COMPACTION_MODE_LATCH:case tn.BYTE_COMPACTION_MODE_LATCH:case tn.BYTE_COMPACTION_MODE_LATCH_6:case tn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case tn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case tn.MACRO_PDF417_TERMINATOR:e--,s=!0}(r%tn.MAX_NUMERIC_CODEWORDS==0||o===tn.NUMERIC_COMPACTION_MODE_LATCH||s)&&r>0&&(n.append(tn.decodeBase900toBase10(i,r)),r=0)}return e}static decodeBase900toBase10(t,e){let n=Je(0);for(let s=0;s<e;s++)n+=tn.EXP900[e-s-1]*Je(t[s]);let r=n.toString();if("1"!==r.charAt(0))throw new _;return r.substring(1)}}tn.TEXT_COMPACTION_MODE_LATCH=900,tn.BYTE_COMPACTION_MODE_LATCH=901,tn.NUMERIC_COMPACTION_MODE_LATCH=902,tn.BYTE_COMPACTION_MODE_LATCH_6=924,tn.ECI_USER_DEFINED=925,tn.ECI_GENERAL_PURPOSE=926,tn.ECI_CHARSET=927,tn.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,tn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,tn.MACRO_PDF417_TERMINATOR=922,tn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,tn.MAX_NUMERIC_CODEWORDS=15,tn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,tn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,tn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,tn.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,tn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,tn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,tn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,tn.PL=25,tn.LL=27,tn.AS=27,tn.ML=28,tn.AL=28,tn.PS=29,tn.PAL=29,tn.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",tn.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",tn.EXP900=Ke()?function(){let t=[];t[0]=Je(1);let e=Je(900);t[1]=e;for(let n=2;n<16;n++)t[n]=t[n-1]*e;return t}():[],tn.NUMBER_OF_SEQUENCE_CODEWORDS=2;class en{constructor(){}static decode(t,e,n,r,s,i,o){let a,l=new Le(t,e,n,r,s),c=null,u=null;for(let f=!0;;f=!1){if(null!=e&&(c=en.getRowIndicatorColumn(t,l,e,!0,i,o)),null!=r&&(u=en.getRowIndicatorColumn(t,l,r,!1,i,o)),a=en.merge(c,u),null==a)throw v.getNotFoundInstance();let n=a.getBoundingBox();if(!f||null==n||!(n.getMinY()<l.getMinY()||n.getMaxY()>l.getMaxY()))break;l=n}a.setBoundingBox(l);let h=a.getBarcodeColumnCount()+1;a.setDetectionResultColumn(0,c),a.setDetectionResultColumn(h,u);let d=null!=c;for(let f=1;f<=h;f++){let e,n=d?f:h-f;if(void 0!==a.getDetectionResultColumn(n))continue;e=0===n||n===h?new je(l,0===n):new Ve(l),a.setDetectionResultColumn(n,e);let r=-1,s=r;for(let c=l.getMinY();c<=l.getMaxY();c++){if(r=en.getStartColumn(a,n,c,d),r<0||r>l.getMaxX()){if(-1===s)continue;r=s}let u=en.detectCodeword(t,l.getMinX(),l.getMaxX(),d,r,c,i,o);null!=u&&(e.setCodeword(c,u),s=r,i=Math.min(i,u.getWidth()),o=Math.max(o,u.getWidth()))}}return en.createDecoderResult(a)}static merge(t,e){if(null==t&&null==e)return null;let n=en.getBarcodeMetadata(t,e);if(null==n)return null;let r=Le.merge(en.adjustBoundingBox(t),en.adjustBoundingBox(e));return new ze(n,r)}static adjustBoundingBox(t){if(null==t)return null;let e=t.getRowHeights();if(null==e)return null;let n=en.getMax(e),r=0;for(let o of e)if(r+=n-o,o>0)break;let s=t.getCodewords();for(let o=0;r>0&&null==s[o];o++)r--;let i=0;for(let o=e.length-1;o>=0&&(i+=n-e[o],!(e[o]>0));o--);for(let o=s.length-1;i>0&&null==s[o];o--)i--;return t.getBoundingBox().addMissingRows(r,i,t.isLeft())}static getMax(t){let e=-1;for(let n of t)e=Math.max(e,n);return e}static getBarcodeMetadata(t,e){let n,r;return null==t||null==(n=t.getBarcodeMetadata())?null==e?null:e.getBarcodeMetadata():null==e||null==(r=e.getBarcodeMetadata())?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n}static getRowIndicatorColumn(t,e,n,r,s,i){let o=new je(e,r);for(let a=0;a<2;a++){let l=0===a?1:-1,c=Math.trunc(Math.trunc(n.getX()));for(let a=Math.trunc(Math.trunc(n.getY()));a<=e.getMaxY()&&a>=e.getMinY();a+=l){let e=en.detectCodeword(t,0,t.getWidth(),r,c,a,s,i);null!=e&&(o.setCodeword(a,e),c=r?e.getStartX():e.getEndX())}}return o}static adjustCodewordCount(t,e){let n=e[0][1],r=n.getValue(),s=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-en.getNumberOfECCodeWords(t.getBarcodeECLevel());if(0===r.length){if(s<1||s>De.MAX_CODEWORDS_IN_BARCODE)throw v.getNotFoundInstance();n.setValue(s)}else r[0]!==s&&n.setValue(s)}static createDecoderResult(t){let e=en.createBarcodeMatrix(t);en.adjustCodewordCount(t,e);let n=new Array,r=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),s=[],i=new Array;for(let a=0;a<t.getBarcodeRowCount();a++)for(let o=0;o<t.getBarcodeColumnCount();o++){let l=e[a][o+1].getValue(),c=a*t.getBarcodeColumnCount()+o;0===l.length?n.push(c):1===l.length?r[c]=l[0]:(i.push(c),s.push(l))}let o=new Array(s.length);for(let a=0;a<o.length;a++)o[a]=s[a];return en.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),r,De.toIntArray(n),De.toIntArray(i),o)}static createDecoderResultFromAmbiguousValues(t,e,n,r,s){let i=new Int32Array(r.length),o=100;for(;o-- >0;){for(let t=0;t<i.length;t++)e[r[t]]=s[t][i[t]];try{return en.decodeCodewords(e,t,n)}catch(a){if(!(a instanceof l))throw a}if(0===i.length)throw l.getChecksumInstance();for(let t=0;t<i.length;t++){if(i[t]<s[t].length-1){i[t]++;break}if(i[t]=0,t===i.length-1)throw l.getChecksumInstance()}}throw l.getChecksumInstance()}static createBarcodeMatrix(t){let e=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let r=0;r<e.length;r++)for(let t=0;t<e[r].length;t++)e[r][t]=new He;let n=0;for(let r of t.getDetectionResultColumns()){if(null!=r)for(let t of r.getCodewords())if(null!=t){let r=t.getRowNumber();if(r>=0){if(r>=e.length)continue;e[r][n].setValue(t.getValue())}}n++}return e}static isValidBarcodeColumn(t,e){return e>=0&&e<=t.getBarcodeColumnCount()+1}static getStartColumn(t,e,n,r){let s=r?1:-1,i=null;if(en.isValidBarcodeColumn(t,e-s)&&(i=t.getDetectionResultColumn(e-s).getCodeword(n)),null!=i)return r?i.getEndX():i.getStartX();if(i=t.getDetectionResultColumn(e).getCodewordNearby(n),null!=i)return r?i.getStartX():i.getEndX();if(en.isValidBarcodeColumn(t,e-s)&&(i=t.getDetectionResultColumn(e-s).getCodewordNearby(n)),null!=i)return r?i.getEndX():i.getStartX();let o=0;for(;en.isValidBarcodeColumn(t,e-s);){e-=s;for(let n of t.getDetectionResultColumn(e).getCodewords())if(null!=n)return(r?n.getEndX():n.getStartX())+s*o*(n.getEndX()-n.getStartX());o++}return r?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,e,n,r,s,i,o,a){s=en.adjustCodewordStartColumn(t,e,n,r,s,i);let l,c=en.getModuleBitCount(t,e,n,r,s,i);if(null==c)return null;let u=tt.sum(c);if(r)l=s+u;else{for(let t=0;t<c.length/2;t++){let e=c[t];c[t]=c[c.length-1-t],c[c.length-1-t]=e}l=s,s=l-u}if(!en.checkCodewordSkew(u,o,a))return null;let h=We.getDecodedValue(c),d=De.getCodeword(h);return-1===d?null:new Ge(s,l,en.getCodewordBucketNumber(h),d)}static getModuleBitCount(t,e,n,r,s,i){let o=s,a=new Int32Array(8),l=0,c=r?1:-1,u=r;for(;(r?o<n:o>=e)&&l<a.length;)t.get(o,i)===u?(a[l]++,o+=c):(l++,u=!u);return l===a.length||o===(r?n:e)&&l===a.length-1?a:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,e,n,r,s,i){let o=s,a=r?-1:1;for(let l=0;l<2;l++){for(;(r?o>=e:o<n)&&r===t.get(o,i);){if(Math.abs(s-o)>en.CODEWORD_SKEW_SIZE)return s;o+=a}a=-a,r=!r}return o}static checkCodewordSkew(t,e,n){return e-en.CODEWORD_SKEW_SIZE<=t&&t<=n+en.CODEWORD_SKEW_SIZE}static decodeCodewords(t,e,n){if(0===t.length)throw _.getFormatInstance();let r=1<<e+1,s=en.correctErrors(t,n,r);en.verifyCodewordCount(t,r);let i=tn.decode(t,""+e);return i.setErrorsCorrected(s),i.setErasures(n.length),i}static correctErrors(t,e,n){if(null!=e&&e.length>n/2+en.MAX_ERRORS||n<0||n>en.MAX_EC_CODEWORDS)throw l.getChecksumInstance();return en.errorCorrection.decode(t,n,e)}static verifyCodewordCount(t,e){if(t.length<4)throw _.getFormatInstance();let n=t[0];if(n>t.length)throw _.getFormatInstance();if(0===n){if(!(e<t.length))throw _.getFormatInstance();t[0]=t.length-e}}static getBitCountForCodeword(t){let e=new Int32Array(8),n=0,r=e.length-1;for(;!((1&t)!==n&&(n=1&t,r--,r<0));)e[r]++,t>>=1;return e}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return en.getCodewordBucketNumber(en.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let e=new Ue;for(let n=0;n<t.length;n++){e.format("Row %2d: ",n);for(let r=0;r<t[n].length;r++){let s=t[n][r];0===s.getValue().length?e.format("        ",null):e.format("%4d(%2d)",s.getValue()[0],s.getConfidence(s.getValue()[0]))}e.format("%n")}return e.toString()}}en.CODEWORD_SKEW_SIZE=2,en.MAX_ERRORS=3,en.MAX_EC_CODEWORDS=512,en.errorCorrection=new ke;class nn{decode(t,e=null){let n=nn.decode(t,e,!1);if(null==n||0===n.length||null==n[0])throw v.getNotFoundInstance();return n[0]}decodeMultiple(t,e=null){try{return nn.decode(t,e,!0)}catch(n){if(n instanceof _||n instanceof l)throw v.getNotFoundInstance();throw n}}static decode(t,e,n){const r=new Array,s=Me.detectMultiple(t,e,n);for(const i of s.getPoints()){const t=en.decode(s.getBits(),i[4],i[5],i[6],i[7],nn.getMinCodewordWidth(i),nn.getMaxCodewordWidth(i)),e=new x(t.getText(),t.getRawBytes(),void 0,i,L.PDF_417);e.putMetadata(G.ERROR_CORRECTION_LEVEL,t.getECLevel());const n=t.getOther();null!=n&&e.putMetadata(G.PDF417_EXTRA_METADATA,n),r.push(e)}return r.map(t=>t)}static getMaxWidth(t,e){return null==t||null==e?0:Math.trunc(Math.abs(t.getX()-e.getX()))}static getMinWidth(t,e){return null==t||null==e?g.MAX_VALUE:Math.trunc(Math.abs(t.getX()-e.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(nn.getMaxWidth(t[0],t[4]),nn.getMaxWidth(t[6],t[2])*De.MODULES_IN_CODEWORD/De.MODULES_IN_STOP_PATTERN),Math.max(nn.getMaxWidth(t[1],t[5]),nn.getMaxWidth(t[7],t[3])*De.MODULES_IN_CODEWORD/De.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(nn.getMinWidth(t[0],t[4]),nn.getMinWidth(t[6],t[2])*De.MODULES_IN_CODEWORD/De.MODULES_IN_STOP_PATTERN),Math.min(nn.getMinWidth(t[1],t[5]),nn.getMinWidth(t[7],t[3])*De.MODULES_IN_CODEWORD/De.MODULES_IN_STOP_PATTERN)))}reset(){}}class rn extends s{}rn.kind="ReaderException";class sn{decode(t,e){return this.setHints(e),this.decodeInternal(t)}decodeWithState(t){return null==this.readers&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const e=null!=t&&void 0!==t.get(w.TRY_HARDER),n=null==t?null:t.get(w.POSSIBLE_FORMATS),r=new Array;if(null!=n){const s=n.some(t=>t===L.UPC_A||t===L.UPC_E||t===L.EAN_13||t===L.EAN_8||t===L.CODABAR||t===L.CODE_39||t===L.CODE_93||t===L.CODE_128||t===L.ITF||t===L.RSS_14||t===L.RSS_EXPANDED);s&&!e&&r.push(new ee(t)),n.includes(L.QR_CODE)&&r.push(new Oe),n.includes(L.DATA_MATRIX)&&r.push(new he),n.includes(L.AZTEC)&&r.push(new dt),n.includes(L.PDF_417)&&r.push(new nn),s&&e&&r.push(new ee(t))}0===r.length&&(e||r.push(new ee(t)),r.push(new Oe),r.push(new he),r.push(new dt),r.push(new nn),e&&r.push(new ee(t))),this.readers=r}reset(){if(null!==this.readers)for(const t of this.readers)t.reset()}decodeInternal(t){if(null===this.readers)throw new rn("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(t,this.hints)}catch(e){if(e instanceof rn)continue}throw new v("No MultiFormat Readers were able to detect the code.")}}var on;!function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.MIN_SIZE=3]="MIN_SIZE",t[t.MAX_SIZE=4]="MAX_SIZE",t[t.MARGIN=5]="MARGIN",t[t.PDF417_COMPACT=6]="PDF417_COMPACT",t[t.PDF417_COMPACTION=7]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=9]="AZTEC_LAYERS",t[t.QR_VERSION=10]="QR_VERSION"}(on||(on={}));var an=on;class ln{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new Z(t,Int32Array.from([1])))}buildGenerator(t){const e=this.cachedGenerators;if(t>=e.length){let n=e[e.length-1];const r=this.field;for(let s=e.length;s<=t;s++){const t=n.multiply(new Z(r,Int32Array.from([1,r.exp(s-1+r.getGeneratorBase())])));e.push(t),n=t}}return e[t]}encode(t,e){if(0===e)throw new o("No error correction bytes");const n=t.length-e;if(n<=0)throw new o("No data bytes provided");const r=this.buildGenerator(e),s=new Int32Array(n);u.arraycopy(t,0,s,0,n);let i=new Z(this.field,s);i=i.multiplyByMonomial(e,1);const a=i.divide(r)[1].getCoefficients(),l=e-a.length;for(let o=0;o<l;o++)t[n+o]=0;u.arraycopy(a,0,t,n+l,a.length)}}class cn{constructor(){}static applyMaskPenaltyRule1(t){return cn.applyMaskPenaltyRule1Internal(t,!0)+cn.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let e=0;const n=t.getArray(),r=t.getWidth(),s=t.getHeight();for(let i=0;i<s-1;i++){const t=n[i];for(let s=0;s<r-1;s++){const r=t[s];r===t[s+1]&&r===n[i+1][s]&&r===n[i+1][s+1]&&e++}}return cn.N2*e}static applyMaskPenaltyRule3(t){let e=0;const n=t.getArray(),r=t.getWidth(),s=t.getHeight();for(let i=0;i<s;i++)for(let t=0;t<r;t++){const o=n[i];t+6<r&&1===o[t]&&0===o[t+1]&&1===o[t+2]&&1===o[t+3]&&1===o[t+4]&&0===o[t+5]&&1===o[t+6]&&(cn.isWhiteHorizontal(o,t-4,t)||cn.isWhiteHorizontal(o,t+7,t+11))&&e++,i+6<s&&1===n[i][t]&&0===n[i+1][t]&&1===n[i+2][t]&&1===n[i+3][t]&&1===n[i+4][t]&&0===n[i+5][t]&&1===n[i+6][t]&&(cn.isWhiteVertical(n,t,i-4,i)||cn.isWhiteVertical(n,t,i+7,i+11))&&e++}return e*cn.N3}static isWhiteHorizontal(t,e,n){e=Math.max(e,0),n=Math.min(n,t.length);for(let r=e;r<n;r++)if(1===t[r])return!1;return!0}static isWhiteVertical(t,e,n,r){n=Math.max(n,0),r=Math.min(r,t.length);for(let s=n;s<r;s++)if(1===t[s][e])return!1;return!0}static applyMaskPenaltyRule4(t){let e=0;const n=t.getArray(),r=t.getWidth(),s=t.getHeight();for(let o=0;o<s;o++){const t=n[o];for(let n=0;n<r;n++)1===t[n]&&e++}const i=t.getHeight()*t.getWidth();return Math.floor(10*Math.abs(2*e-i)/i)*cn.N4}static getDataMaskBit(t,e,n){let r,s;switch(t){case 0:r=n+e&1;break;case 1:r=1&n;break;case 2:r=e%3;break;case 3:r=(n+e)%3;break;case 4:r=Math.floor(n/2)+Math.floor(e/3)&1;break;case 5:s=n*e,r=(1&s)+s%3;break;case 6:s=n*e,r=(1&s)+s%3&1;break;case 7:s=n*e,r=s%3+(n+e&1)&1;break;default:throw new o("Invalid mask pattern: "+t)}return 0===r}static applyMaskPenaltyRule1Internal(t,e){let n=0;const r=e?t.getHeight():t.getWidth(),s=e?t.getWidth():t.getHeight(),i=t.getArray();for(let o=0;o<r;o++){let t=0,r=-1;for(let a=0;a<s;a++){const s=e?i[o][a]:i[a][o];s===r?t++:(t>=5&&(n+=cn.N1+(t-5)),t=1,r=s)}t>=5&&(n+=cn.N1+(t-5))}return n}}cn.N1=3,cn.N2=3,cn.N3=40,cn.N4=10;class un{constructor(t,e){this.width=t,this.height=e;const n=new Array(e);for(let r=0;r!==e;r++)n[r]=new Uint8Array(t);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(t,e){return this.bytes[e][t]}getArray(){return this.bytes}setNumber(t,e,n){this.bytes[e][t]=n}setBoolean(t,e,n){this.bytes[e][t]=n?1:0}clear(t){for(const e of this.bytes)f.fill(e,t)}equals(t){if(!(t instanceof un))return!1;const e=t;if(this.width!==e.width)return!1;if(this.height!==e.height)return!1;for(let n=0,r=this.height;n<r;++n){const t=this.bytes[n],r=e.bytes[n];for(let e=0,n=this.width;e<n;++e)if(t[e]!==r[e])return!1}return!0}toString(){const t=new S;for(let e=0,n=this.height;e<n;++e){const n=this.bytes[e];for(let e=0,r=this.width;e<r;++e)switch(n[e]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ")}t.append("\n")}return t.toString()}}class hn{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new S;return t.append("<<\n"),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append("\n ecLevel: "),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append("\n version: "),t.append(this.version?this.version.toString():"null"),t.append("\n maskPattern: "),t.append(this.maskPattern.toString()),this.matrix?(t.append("\n matrix:\n"),t.append(this.matrix.toString())):t.append("\n matrix: null\n"),t.append(">>\n"),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<hn.NUM_MASK_PATTERNS}}hn.NUM_MASK_PATTERNS=8;class dn extends s{}dn.kind="WriterException";class fn{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,e,n,r,s){fn.clearMatrix(s),fn.embedBasicPatterns(n,s),fn.embedTypeInfo(e,r,s),fn.maybeEmbedVersionInfo(n,s),fn.embedDataBits(t,r,s)}static embedBasicPatterns(t,e){fn.embedPositionDetectionPatternsAndSeparators(e),fn.embedDarkDotAtLeftBottomCorner(e),fn.maybeEmbedPositionAdjustmentPatterns(t,e),fn.embedTimingPatterns(e)}static embedTypeInfo(t,e,n){const r=new p;fn.makeTypeInfoBits(t,e,r);for(let s=0,i=r.getSize();s<i;++s){const t=r.get(r.getSize()-1-s),e=fn.TYPE_INFO_COORDINATES[s];if(n.setBoolean(e[0],e[1],t),s<8){const e=n.getWidth()-s-1;n.setBoolean(e,8,t)}else{const e=8,r=n.getHeight()-7+(s-8);n.setBoolean(e,r,t)}}}static maybeEmbedVersionInfo(t,e){if(t.getVersionNumber()<7)return;const n=new p;fn.makeVersionInfoBits(t,n);let r=17;for(let s=0;s<6;++s)for(let t=0;t<3;++t){const i=n.get(r);r--,e.setBoolean(s,e.getHeight()-11+t,i),e.setBoolean(e.getHeight()-11+t,s,i)}}static embedDataBits(t,e,n){let r=0,s=-1,i=n.getWidth()-1,o=n.getHeight()-1;for(;i>0;){for(6===i&&(i-=1);o>=0&&o<n.getHeight();){for(let s=0;s<2;++s){const a=i-s;if(!fn.isEmpty(n.get(a,o)))continue;let l;r<t.getSize()?(l=t.get(r),++r):l=!1,255!==e&&cn.getDataMaskBit(e,a,o)&&(l=!l),n.setBoolean(a,o,l)}o+=s}s=-s,o+=s,i-=2}if(r!==t.getSize())throw new dn("Not all bits consumed: "+r+"/"+t.getSize())}static findMSBSet(t){return 32-g.numberOfLeadingZeros(t)}static calculateBCHCode(t,e){if(0===e)throw new o("0 polynomial");const n=fn.findMSBSet(e);for(t<<=n-1;fn.findMSBSet(t)>=n;)t^=e<<fn.findMSBSet(t)-n;return t}static makeTypeInfoBits(t,e,n){if(!hn.isValidMaskPattern(e))throw new dn("Invalid mask pattern");const r=t.getBits()<<3|e;n.appendBits(r,5);const s=fn.calculateBCHCode(r,fn.TYPE_INFO_POLY);n.appendBits(s,10);const i=new p;if(i.appendBits(fn.TYPE_INFO_MASK_PATTERN,15),n.xor(i),15!==n.getSize())throw new dn("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(t,e){e.appendBits(t.getVersionNumber(),6);const n=fn.calculateBCHCode(t.getVersionNumber(),fn.VERSION_INFO_POLY);if(e.appendBits(n,12),18!==e.getSize())throw new dn("should not happen but we got: "+e.getSize())}static isEmpty(t){return 255===t}static embedTimingPatterns(t){for(let e=8;e<t.getWidth()-8;++e){const n=(e+1)%2;fn.isEmpty(t.get(e,6))&&t.setNumber(e,6,n),fn.isEmpty(t.get(6,e))&&t.setNumber(6,e,n)}}static embedDarkDotAtLeftBottomCorner(t){if(0===t.get(8,t.getHeight()-8))throw new dn;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,e,n){for(let r=0;r<8;++r){if(!fn.isEmpty(n.get(t+r,e)))throw new dn;n.setNumber(t+r,e,0)}}static embedVerticalSeparationPattern(t,e,n){for(let r=0;r<7;++r){if(!fn.isEmpty(n.get(t,e+r)))throw new dn;n.setNumber(t,e+r,0)}}static embedPositionAdjustmentPattern(t,e,n){for(let r=0;r<5;++r){const s=fn.POSITION_ADJUSTMENT_PATTERN[r];for(let i=0;i<5;++i)n.setNumber(t+i,e+r,s[i])}}static embedPositionDetectionPattern(t,e,n){for(let r=0;r<7;++r){const s=fn.POSITION_DETECTION_PATTERN[r];for(let i=0;i<7;++i)n.setNumber(t+i,e+r,s[i])}}static embedPositionDetectionPatternsAndSeparators(t){const e=fn.POSITION_DETECTION_PATTERN[0].length;fn.embedPositionDetectionPattern(0,0,t),fn.embedPositionDetectionPattern(t.getWidth()-e,0,t),fn.embedPositionDetectionPattern(0,t.getWidth()-e,t),fn.embedHorizontalSeparationPattern(0,7,t),fn.embedHorizontalSeparationPattern(t.getWidth()-8,7,t),fn.embedHorizontalSeparationPattern(0,t.getWidth()-8,t),fn.embedVerticalSeparationPattern(7,0,t),fn.embedVerticalSeparationPattern(t.getHeight()-7-1,0,t),fn.embedVerticalSeparationPattern(7,t.getHeight()-7,t)}static maybeEmbedPositionAdjustmentPatterns(t,e){if(t.getVersionNumber()<2)return;const n=t.getVersionNumber()-1,r=fn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let s=0,i=r.length;s!==i;s++){const t=r[s];if(t>=0)for(let n=0;n!==i;n++){const s=r[n];s>=0&&fn.isEmpty(e.get(s,t))&&fn.embedPositionAdjustmentPattern(s-2,t-2,e)}}}}fn.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),fn.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),fn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),fn.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),fn.VERSION_INFO_POLY=7973,fn.TYPE_INFO_POLY=1335,fn.TYPE_INFO_MASK_PATTERN=21522;class gn{constructor(t,e){this.dataBytes=t,this.errorCorrectionBytes=e}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class pn{constructor(){}static calculateMaskPenalty(t){return cn.applyMaskPenaltyRule1(t)+cn.applyMaskPenaltyRule2(t)+cn.applyMaskPenaltyRule3(t)+cn.applyMaskPenaltyRule4(t)}static encode(t,e,n=null){let r=pn.DEFAULT_BYTE_MODE_ENCODING;const s=null!==n&&void 0!==n.get(an.CHARACTER_SET);s&&(r=n.get(an.CHARACTER_SET).toString());const i=this.chooseMode(t,r),o=new p;if(i===Ee.BYTE&&(s||pn.DEFAULT_BYTE_MODE_ENCODING!==r)){const t=y.getCharacterSetECIByName(r);void 0!==t&&this.appendECI(t,o)}this.appendModeInfo(i,o);const a=new p;let l;if(this.appendBytes(t,i,a,r),null!==n&&void 0!==n.get(an.QR_VERSION)){const t=Number.parseInt(n.get(an.QR_VERSION).toString(),10);l=me.getVersionForNumber(t);const r=this.calculateBitsNeeded(i,o,a,l);if(!this.willFit(r,l,e))throw new dn("Data too big for requested version")}else l=this.recommendVersion(e,i,o,a);const c=new p;c.appendBitArray(o);const u=i===Ee.BYTE?a.getSizeInBytes():t.length;this.appendLengthInfo(u,l,i,c),c.appendBitArray(a);const h=l.getECBlocksForLevel(e),d=l.getTotalCodewords()-h.getTotalECCodewords();this.terminateBits(d,c);const f=this.interleaveWithECBytes(c,l.getTotalCodewords(),d,h.getNumBlocks()),g=new hn;g.setECLevel(e),g.setMode(i),g.setVersion(l);const m=l.getDimensionForVersion(),w=new un(m,m),_=this.chooseMaskPattern(f,e,l,w);return g.setMaskPattern(_),fn.buildMatrix(f,e,l,_,w),g.setMatrix(w),g}static recommendVersion(t,e,n,r){const s=this.calculateBitsNeeded(e,n,r,me.getVersionForNumber(1)),i=this.chooseVersion(s,t),o=this.calculateBitsNeeded(e,n,r,i);return this.chooseVersion(o,t)}static calculateBitsNeeded(t,e,n,r){return e.getSize()+t.getCharacterCountBits(r)+n.getSize()}static getAlphanumericCode(t){return t<pn.ALPHANUMERIC_TABLE.length?pn.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,e=null){if(y.SJIS.getName()===e&&this.isOnlyDoubleByteKanji(t))return Ee.KANJI;let n=!1,r=!1;for(let s=0,i=t.length;s<i;++s){const e=t.charAt(s);if(pn.isDigit(e))n=!0;else{if(-1===this.getAlphanumericCode(e.charCodeAt(0)))return Ee.BYTE;r=!0}}return r?Ee.ALPHANUMERIC:n?Ee.NUMERIC:Ee.BYTE}static isOnlyDoubleByteKanji(t){let e;try{e=C.encode(t,y.SJIS)}catch(r){return!1}const n=e.length;if(n%2!=0)return!1;for(let s=0;s<n;s+=2){const t=255&e[s];if((t<129||t>159)&&(t<224||t>235))return!1}return!0}static chooseMaskPattern(t,e,n,r){let s=Number.MAX_SAFE_INTEGER,i=-1;for(let o=0;o<hn.NUM_MASK_PATTERNS;o++){fn.buildMatrix(t,e,n,o,r);let a=this.calculateMaskPenalty(r);a<s&&(s=a,i=o)}return i}static chooseVersion(t,e){for(let n=1;n<=40;n++){const r=me.getVersionForNumber(n);if(pn.willFit(t,r,e))return r}throw new dn("Data too big")}static willFit(t,e,n){return e.getTotalCodewords()-e.getECBlocksForLevel(n).getTotalECCodewords()>=(t+7)/8}static terminateBits(t,e){const n=8*t;if(e.getSize()>n)throw new dn("data bits cannot fit in the QR Code"+e.getSize()+" > "+n);for(let i=0;i<4&&e.getSize()<n;++i)e.appendBit(!1);const r=7&e.getSize();if(r>0)for(let i=r;i<8;i++)e.appendBit(!1);const s=t-e.getSizeInBytes();for(let i=0;i<s;++i)e.appendBits(0==(1&i)?236:17,8);if(e.getSize()!==n)throw new dn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,e,n,r,s,i){if(r>=n)throw new dn("Block ID too large");const o=t%n,a=n-o,l=Math.floor(t/n),c=l+1,u=Math.floor(e/n),h=u+1,d=l-u,f=c-h;if(d!==f)throw new dn("EC bytes mismatch");if(n!==a+o)throw new dn("RS blocks mismatch");if(t!==(u+d)*a+(h+f)*o)throw new dn("Total bytes mismatch");r<a?(s[0]=u,i[0]=d):(s[0]=h,i[0]=f)}static interleaveWithECBytes(t,e,n,r){if(t.getSizeInBytes()!==n)throw new dn("Number of bits and data bytes does not match");let s=0,i=0,o=0;const a=new Array;for(let c=0;c<r;++c){const l=new Int32Array(1),u=new Int32Array(1);pn.getNumDataBytesAndNumECBytesForBlockID(e,n,r,c,l,u);const h=l[0],d=new Uint8Array(h);t.toBytes(8*s,d,0,h);const f=pn.generateECBytes(d,u[0]);a.push(new gn(d,f)),i=Math.max(i,h),o=Math.max(o,f.length),s+=l[0]}if(n!==s)throw new dn("Data bytes does not match offset");const l=new p;for(let c=0;c<i;++c)for(const t of a){const e=t.getDataBytes();c<e.length&&l.appendBits(e[c],8)}for(let c=0;c<o;++c)for(const t of a){const e=t.getErrorCorrectionBytes();c<e.length&&l.appendBits(e[c],8)}if(e!==l.getSizeInBytes())throw new dn("Interleaving error: "+e+" and "+l.getSizeInBytes()+" differ.");return l}static generateECBytes(t,e){const n=t.length,r=new Int32Array(n+e);for(let i=0;i<n;i++)r[i]=255&t[i];new ln(q.QR_CODE_FIELD_256).encode(r,e);const s=new Uint8Array(e);for(let i=0;i<e;i++)s[i]=r[n+i];return s}static appendModeInfo(t,e){e.appendBits(t.getBits(),4)}static appendLengthInfo(t,e,n,r){const s=n.getCharacterCountBits(e);if(t>=1<<s)throw new dn(t+" is bigger than "+((1<<s)-1));r.appendBits(t,s)}static appendBytes(t,e,n,r){switch(e){case Ee.NUMERIC:pn.appendNumericBytes(t,n);break;case Ee.ALPHANUMERIC:pn.appendAlphanumericBytes(t,n);break;case Ee.BYTE:pn.append8BitBytes(t,n,r);break;case Ee.KANJI:pn.appendKanjiBytes(t,n);break;default:throw new dn("Invalid mode: "+e)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const e=pn.getDigit(t);return e>=0&&e<=9}static appendNumericBytes(t,e){const n=t.length;let r=0;for(;r<n;){const s=pn.getDigit(t.charAt(r));if(r+2<n){const n=pn.getDigit(t.charAt(r+1)),i=pn.getDigit(t.charAt(r+2));e.appendBits(100*s+10*n+i,10),r+=3}else if(r+1<n){const n=pn.getDigit(t.charAt(r+1));e.appendBits(10*s+n,7),r+=2}else e.appendBits(s,4),r++}}static appendAlphanumericBytes(t,e){const n=t.length;let r=0;for(;r<n;){const s=pn.getAlphanumericCode(t.charCodeAt(r));if(-1===s)throw new dn;if(r+1<n){const n=pn.getAlphanumericCode(t.charCodeAt(r+1));if(-1===n)throw new dn;e.appendBits(45*s+n,11),r+=2}else e.appendBits(s,6),r++}}static append8BitBytes(t,e,n){let r;try{r=C.encode(t,n)}catch(s){throw new dn(s)}for(let i=0,o=r.length;i!==o;i++)e.appendBits(r[i],8)}static appendKanjiBytes(t,e){let n;try{n=C.encode(t,y.SJIS)}catch(s){throw new dn(s)}const r=n.length;for(let i=0;i<r;i+=2){const t=(255&n[i])<<8&4294967295|255&n[i+1];let r=-1;if(t>=33088&&t<=40956?r=t-33088:t>=57408&&t<=60351&&(r=t-49472),-1===r)throw new dn("Invalid byte sequence");e.appendBits(192*(r>>8)+(255&r),13)}}static appendECI(t,e){e.appendBits(Ee.ECI.getBits(),4),e.appendBits(t.getValue(),8)}}pn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),pn.DEFAULT_BYTE_MODE_ENCODING=y.UTF8.getName();class mn{write(t,e,n,r=null){if(0===t.length)throw new o("Found empty contents");if(e<0||n<0)throw new o("Requested dimensions are too small: "+e+"x"+n);let s=de.L,i=mn.QUIET_ZONE_SIZE;null!==r&&(void 0!==r.get(an.ERROR_CORRECTION)&&(s=de.fromString(r.get(an.ERROR_CORRECTION).toString())),void 0!==r.get(an.MARGIN)&&(i=Number.parseInt(r.get(an.MARGIN).toString(),10)));const a=pn.encode(t,s,r);return this.renderResult(a,e,n,i)}writeToDom(t,e,n,r,s=null){"string"==typeof t&&(t=document.querySelector(t));const i=this.write(e,n,r,s);t&&t.appendChild(i)}renderResult(t,e,n,r){const s=t.getMatrix();if(null===s)throw new K;const i=s.getWidth(),o=s.getHeight(),a=i+2*r,l=o+2*r,c=Math.max(e,a),u=Math.max(n,l),h=Math.min(Math.floor(c/a),Math.floor(u/l)),d=Math.floor((c-i*h)/2),f=Math.floor((u-o*h)/2),g=this.createSVGElement(c,u);for(let p=0,m=f;p<o;p++,m+=h)for(let t=0,e=d;t<i;t++,e+=h)if(1===s.get(t,p)){const t=this.createSvgRectElement(e,m,h,h);g.appendChild(t)}return g}createSVGElement(t,e){const n=document.createElementNS(mn.SVG_NS,"svg");return n.setAttributeNS(null,"height",t.toString()),n.setAttributeNS(null,"width",e.toString()),n}createSvgRectElement(t,e,n,r){const s=document.createElementNS(mn.SVG_NS,"rect");return s.setAttributeNS(null,"x",t.toString()),s.setAttributeNS(null,"y",e.toString()),s.setAttributeNS(null,"height",n.toString()),s.setAttributeNS(null,"width",r.toString()),s.setAttributeNS(null,"fill","#000000"),s}}mn.QUIET_ZONE_SIZE=4,mn.SVG_NS="http://www.w3.org/2000/svg";class wn{encode(t,e,n,r,s){if(0===t.length)throw new o("Found empty contents");if(e!==L.QR_CODE)throw new o("Can only encode QR_CODE, but got "+e);if(n<0||r<0)throw new o(`Requested dimensions are too small: ${n}x${r}`);let i=de.L,a=wn.QUIET_ZONE_SIZE;null!==s&&(void 0!==s.get(an.ERROR_CORRECTION)&&(i=de.fromString(s.get(an.ERROR_CORRECTION).toString())),void 0!==s.get(an.MARGIN)&&(a=Number.parseInt(s.get(an.MARGIN).toString(),10)));const l=pn.encode(t,i,s);return wn.renderResult(l,n,r,a)}static renderResult(t,e,n,r){const s=t.getMatrix();if(null===s)throw new K;const i=s.getWidth(),o=s.getHeight(),a=i+2*r,l=o+2*r,c=Math.max(e,a),u=Math.max(n,l),h=Math.min(Math.floor(c/a),Math.floor(u/l)),d=Math.floor((c-i*h)/2),f=Math.floor((u-o*h)/2),g=new I(c,u);for(let p=0,m=f;p<o;p++,m+=h)for(let t=0,e=d;t<i;t++,e+=h)1===s.get(t,p)&&g.setRegion(e,m,h,h);return g}}wn.QUIET_ZONE_SIZE=4;class _n extends R{constructor(t,e,n,r,s,i,a,l){if(super(i,a),this.yuvData=t,this.dataWidth=e,this.dataHeight=n,this.left=r,this.top=s,r+i>e||s+a>n)throw new o("Crop rectangle does not fit within image data.");l&&this.reverseHorizontal(i,a)}getRow(t,e){if(t<0||t>=this.getHeight())throw new o("Requested row is outside the image: "+t);const n=this.getWidth();return(null==e||e.length<n)&&(e=new Uint8ClampedArray(n)),u.arraycopy(this.yuvData,(t+this.top)*this.dataWidth+this.left,e,0,n),e}getMatrix(){const t=this.getWidth(),e=this.getHeight();if(t===this.dataWidth&&e===this.dataHeight)return this.yuvData;const n=t*e,r=new Uint8ClampedArray(n);let s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return u.arraycopy(this.yuvData,s,r,0,n),r;for(let i=0;i<e;i++)u.arraycopy(this.yuvData,s,r,i*t,t),s+=this.dataWidth;return r}isCropSupported(){return!0}crop(t,e,n,r){return new _n(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+e,n,r,!1)}renderThumbnail(){const t=this.getWidth()/_n.THUMBNAIL_SCALE_FACTOR,e=this.getHeight()/_n.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(t*e),r=this.yuvData;let s=this.top*this.dataWidth+this.left;for(let i=0;i<e;i++){const e=i*t;for(let i=0;i<t;i++)n[e+i]=4278190080|65793*(255&r[s+i*_n.THUMBNAIL_SCALE_FACTOR]);s+=this.dataWidth*_n.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/_n.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/_n.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,e){const n=this.yuvData;for(let r=0,s=this.top*this.dataWidth+this.left;r<e;r++,s+=this.dataWidth){const e=s+t/2;for(let r=s,i=s+t-1;r<e;r++,i--){const t=n[r];n[r]=n[i],n[i]=t}}}invert(){return new N(this)}}_n.THUMBNAIL_SCALE_FACTOR=2;class yn extends R{constructor(t,e,n,r,s,i,a){if(super(e,n),this.dataWidth=r,this.dataHeight=s,this.left=i,this.top=a,4===t.BYTES_PER_ELEMENT){const r=e*n,s=new Uint8ClampedArray(r);for(let e=0;e<r;e++){const n=t[e];s[e]=((n>>16&255)+(n>>7&510)+(255&n))/4&255}this.luminances=s}else this.luminances=t;if(void 0===r&&(this.dataWidth=e),void 0===s&&(this.dataHeight=n),void 0===i&&(this.left=0),void 0===a&&(this.top=0),this.left+e>this.dataWidth||this.top+n>this.dataHeight)throw new o("Crop rectangle does not fit within image data.")}getRow(t,e){if(t<0||t>=this.getHeight())throw new o("Requested row is outside the image: "+t);const n=this.getWidth();return(null==e||e.length<n)&&(e=new Uint8ClampedArray(n)),u.arraycopy(this.luminances,(t+this.top)*this.dataWidth+this.left,e,0,n),e}getMatrix(){const t=this.getWidth(),e=this.getHeight();if(t===this.dataWidth&&e===this.dataHeight)return this.luminances;const n=t*e,r=new Uint8ClampedArray(n);let s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return u.arraycopy(this.luminances,s,r,0,n),r;for(let i=0;i<e;i++)u.arraycopy(this.luminances,s,r,i*t,t),s+=this.dataWidth;return r}isCropSupported(){return!0}crop(t,e,n,r){return new yn(this.luminances,n,r,this.dataWidth,this.dataHeight,this.left+t,this.top+e)}invert(){return new N(this)}}class En extends y{static forName(t){return this.getCharacterSetECIByName(t)}}class Cn{}Cn.ISO_8859_1=y.ISO8859_1;class An{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class Sn{static singletonList(t){return[t]}static min(t,e){return t.sort(e)[0]}}class In extends class{constructor(t){this.previous=t}getPrevious(){return this.previous}}{constructor(t,e,n){super(t),this.value=e,this.bitCount=n}appendTo(t,e){t.appendBits(this.value,this.bitCount)}add(t,e){return new In(this,t,e)}addBinaryShift(t,e){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new In(this,t,e)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+g.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class vn extends In{constructor(t,e,n){super(t,0,0),this.binaryShiftStart=e,this.binaryShiftByteCount=n}appendTo(t,e){for(let n=0;n<this.binaryShiftByteCount;n++)(0===n||31===n&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):t.appendBits(0===n?Math.min(this.binaryShiftByteCount,31):this.binaryShiftByteCount-31,5)),t.appendBits(e[this.binaryShiftStart+n],8)}addBinaryShift(t,e){return new vn(this,t,e)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function bn(t,e,n){return new In(t,e,n)}const Tn=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Rn=new In(null,0,0),Nn=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])],On=function(t){for(let e of t)f.fill(e,-1);return t[0][4]=0,t[1][4]=0,t[1][0]=28,t[3][4]=0,t[2][4]=0,t[2][0]=15,t}(f.createInt32Array(6,6));class Dn{constructor(t,e,n,r){this.token=t,this.mode=e,this.binaryShiftByteCount=n,this.bitCount=r}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,e){let n=this.bitCount,r=this.token;if(t!==this.mode){let e=Nn[this.mode][t];r=bn(r,65535&e,e>>16),n+=e>>16}let s=2===t?4:5;return r=bn(r,e,s),new Dn(r,t,0,n+s)}shiftAndAppend(t,e){let n=this.token,r=2===this.mode?4:5;return n=bn(n,On[this.mode][t],r),n=bn(n,e,5),new Dn(n,this.mode,0,this.bitCount+r+5)}addBinaryShiftChar(t){let e=this.token,n=this.mode,r=this.bitCount;if(4===this.mode||2===this.mode){let t=Nn[n][0];e=bn(e,65535&t,t>>16),r+=t>>16,n=0}let s=new Dn(e,n,this.binaryShiftByteCount+1,r+(0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8));return 2078===s.binaryShiftByteCount&&(s=s.endBinaryShift(t+1)),s}endBinaryShift(t){if(0===this.binaryShiftByteCount)return this;let e=this.token;return e=function(t,e,n){return new vn(t,e,n)}(e,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new Dn(e,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let e=this.bitCount+(Nn[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?e+=Dn.calculateBinaryShiftCost(t)-Dn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(e+=10),e<=t.bitCount}toBitArray(t){let e=[];for(let r=this.endBinaryShift(t.length).token;null!==r;r=r.getPrevious())e.unshift(r);let n=new p;for(const r of e)r.appendTo(n,t);return n}toString(){return A.format("%s bits=%d bytes=%d",Tn[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}Dn.INITIAL_STATE=new Dn(Rn,0,0,0);const Pn=function(t){const e=A.getCharCode(" "),n=A.getCharCode("."),r=A.getCharCode(",");t[0][e]=1;const s=A.getCharCode("Z"),i=A.getCharCode("A");for(let d=i;d<=s;d++)t[0][d]=d-i+2;t[1][e]=1;const o=A.getCharCode("z"),a=A.getCharCode("a");for(let d=a;d<=o;d++)t[1][d]=d-a+2;t[2][e]=1;const l=A.getCharCode("9"),c=A.getCharCode("0");for(let d=c;d<=l;d++)t[2][d]=d-c+2;t[2][r]=12,t[2][n]=13;const u=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"];for(let d=0;d<u.length;d++)t[3][A.getCharCode(u[d])]=d;const h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let d=0;d<h.length;d++)A.getCharCode(h[d])>0&&(t[4][A.getCharCode(h[d])]=d);return t}(f.createInt32Array(5,256));class Mn{constructor(t){this.text=t}encode(){const t=A.getCharCode(" "),e=A.getCharCode("\n");let n=Sn.singletonList(Dn.INITIAL_STATE);for(let r=0;r<this.text.length;r++){let s,i=r+1<this.text.length?this.text[r+1]:0;switch(this.text[r]){case A.getCharCode("\r"):s=i===e?2:0;break;case A.getCharCode("."):s=i===t?3:0;break;case A.getCharCode(","):s=i===t?4:0;break;case A.getCharCode(":"):s=i===t?5:0;break;default:s=0}s>0?(n=Mn.updateStateListForPair(n,r,s),r++):n=this.updateStateListForChar(n,r)}return Sn.min(n,(t,e)=>t.getBitCount()-e.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,e){const n=[];for(let r of t)this.updateStateForChar(r,e,n);return Mn.simplifyStates(n)}updateStateForChar(t,e,n){let r=255&this.text[e],s=Pn[t.getMode()][r]>0,i=null;for(let o=0;o<=4;o++){let a=Pn[o][r];if(a>0){if(null==i&&(i=t.endBinaryShift(e)),!s||o===t.getMode()||2===o){const t=i.latchAndAppend(o,a);n.push(t)}if(!s&&On[t.getMode()][o]>=0){const t=i.shiftAndAppend(o,a);n.push(t)}}}if(t.getBinaryShiftByteCount()>0||0===Pn[t.getMode()][r]){let r=t.addBinaryShiftChar(e);n.push(r)}}static updateStateListForPair(t,e,n){const r=[];for(let s of t)this.updateStateForPair(s,e,n,r);return this.simplifyStates(r)}static updateStateForPair(t,e,n,r){let s=t.endBinaryShift(e);if(r.push(s.latchAndAppend(4,n)),4!==t.getMode()&&r.push(s.shiftAndAppend(4,n)),3===n||4===n){let t=s.latchAndAppend(2,16-n).latchAndAppend(2,1);r.push(t)}if(t.getBinaryShiftByteCount()>0){let n=t.addBinaryShiftChar(e).addBinaryShiftChar(e+1);r.push(n)}}static simplifyStates(t){let e=[];for(const n of t){let t=!0;for(const r of e){if(r.isBetterThanOrEqualTo(n)){t=!1;break}n.isBetterThanOrEqualTo(r)&&(e=e.filter(t=>t!==r))}t&&e.push(n)}return e}}class Bn{constructor(){}static encodeBytes(t){return Bn.encode(t,Bn.DEFAULT_EC_PERCENT,Bn.DEFAULT_AZTEC_LAYERS)}static encode(t,e,n){let r,s,i,a,l,c=new Mn(t).encode(),u=g.truncDivision(c.getSize()*e,100)+11,h=c.getSize()+u;if(n!==Bn.DEFAULT_AZTEC_LAYERS){if(r=n<0,s=Math.abs(n),s>(r?Bn.MAX_NB_BITS_COMPACT:Bn.MAX_NB_BITS))throw new o(A.format("Illegal value %s for layers",n));i=Bn.totalBitsInLayer(s,r),a=Bn.WORD_SIZE[s];let t=i-i%a;if(l=Bn.stuffBits(c,a),l.getSize()+u>t)throw new o("Data to large for user specified layer");if(r&&l.getSize()>64*a)throw new o("Data to large for user specified layer")}else{a=0,l=null;for(let t=0;;t++){if(t>Bn.MAX_NB_BITS)throw new o("Data too large for an Aztec code");if(r=t<=3,s=r?t+1:t,i=Bn.totalBitsInLayer(s,r),h>i)continue;null!=l&&a===Bn.WORD_SIZE[s]||(a=Bn.WORD_SIZE[s],l=Bn.stuffBits(c,a));let e=i-i%a;if(!(r&&l.getSize()>64*a)&&l.getSize()+u<=e)break}}let d,f=Bn.generateCheckWords(l,i,a),p=l.getSize()/a,m=Bn.generateModeMessage(r,s,p),w=(r?11:14)+4*s,_=new Int32Array(w);if(r){d=w;for(let t=0;t<_.length;t++)_[t]=t}else{d=w+1+2*g.truncDivision(g.truncDivision(w,2)-1,15);let t=g.truncDivision(w,2),e=g.truncDivision(d,2);for(let n=0;n<t;n++){let r=n+g.truncDivision(n,15);_[t-n-1]=e-r-1,_[t+n]=e+r+1}}let y=new I(d);for(let o=0,g=0;o<s;o++){let t=4*(s-o)+(r?9:12);for(let e=0;e<t;e++){let n=2*e;for(let r=0;r<2;r++)f.get(g+n+r)&&y.set(_[2*o+r],_[2*o+e]),f.get(g+2*t+n+r)&&y.set(_[2*o+e],_[w-1-2*o-r]),f.get(g+4*t+n+r)&&y.set(_[w-1-2*o-r],_[w-1-2*o-e]),f.get(g+6*t+n+r)&&y.set(_[w-1-2*o-e],_[2*o+r])}g+=8*t}if(Bn.drawModeMessage(y,r,d,m),r)Bn.drawBullsEye(y,g.truncDivision(d,2),5);else{Bn.drawBullsEye(y,g.truncDivision(d,2),7);for(let t=0,e=0;t<g.truncDivision(w,2)-1;t+=15,e+=16)for(let n=1&g.truncDivision(d,2);n<d;n+=2)y.set(g.truncDivision(d,2)-e,n),y.set(g.truncDivision(d,2)+e,n),y.set(n,g.truncDivision(d,2)-e),y.set(n,g.truncDivision(d,2)+e)}let E=new An;return E.setCompact(r),E.setSize(d),E.setLayers(s),E.setCodeWords(p),E.setMatrix(y),E}static drawBullsEye(t,e,n){for(let r=0;r<n;r+=2)for(let n=e-r;n<=e+r;n++)t.set(n,e-r),t.set(n,e+r),t.set(e-r,n),t.set(e+r,n);t.set(e-n,e-n),t.set(e-n+1,e-n),t.set(e-n,e-n+1),t.set(e+n,e-n),t.set(e+n,e-n+1),t.set(e+n,e+n-1)}static generateModeMessage(t,e,n){let r=new p;return t?(r.appendBits(e-1,2),r.appendBits(n-1,6),r=Bn.generateCheckWords(r,28,4)):(r.appendBits(e-1,5),r.appendBits(n-1,11),r=Bn.generateCheckWords(r,40,4)),r}static drawModeMessage(t,e,n,r){let s=g.truncDivision(n,2);if(e)for(let i=0;i<7;i++){let e=s-3+i;r.get(i)&&t.set(e,s-5),r.get(i+7)&&t.set(s+5,e),r.get(20-i)&&t.set(e,s+5),r.get(27-i)&&t.set(s-5,e)}else for(let i=0;i<10;i++){let e=s-5+i+g.truncDivision(i,5);r.get(i)&&t.set(e,s-7),r.get(i+10)&&t.set(s+7,e),r.get(29-i)&&t.set(e,s+7),r.get(39-i)&&t.set(s-7,e)}}static generateCheckWords(t,e,n){let r=t.getSize()/n,s=new ln(Bn.getGF(n)),i=g.truncDivision(e,n),o=Bn.bitsToWords(t,n,i);s.encode(o,i-r);let a=e%n,l=new p;l.appendBits(0,a);for(const c of Array.from(o))l.appendBits(c,n);return l}static bitsToWords(t,e,n){let r,s,i=new Int32Array(n);for(r=0,s=t.getSize()/e;r<s;r++){let n=0;for(let s=0;s<e;s++)n|=t.get(r*e+s)?1<<e-s-1:0;i[r]=n}return i}static getGF(t){switch(t){case 4:return q.AZTEC_PARAM;case 6:return q.AZTEC_DATA_6;case 8:return q.AZTEC_DATA_8;case 10:return q.AZTEC_DATA_10;case 12:return q.AZTEC_DATA_12;default:throw new o("Unsupported word size "+t)}}static stuffBits(t,e){let n=new p,r=t.getSize(),s=(1<<e)-2;for(let i=0;i<r;i+=e){let o=0;for(let n=0;n<e;n++)(i+n>=r||t.get(i+n))&&(o|=1<<e-1-n);(o&s)===s?(n.appendBits(o&s,e),i--):0==(o&s)?(n.appendBits(1|o,e),i--):n.appendBits(o,e)}return n}static totalBitsInLayer(t,e){return((e?88:112)+16*t)*t}}Bn.DEFAULT_EC_PERCENT=33,Bn.DEFAULT_AZTEC_LAYERS=0,Bn.MAX_NB_BITS=32,Bn.MAX_NB_BITS_COMPACT=4,Bn.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class xn{encode(t,e,n,r){return this.encodeWithHints(t,e,n,r,null)}encodeWithHints(t,e,n,r,s){let i=Cn.ISO_8859_1,o=Bn.DEFAULT_EC_PERCENT,a=Bn.DEFAULT_AZTEC_LAYERS;return null!=s&&(s.has(an.CHARACTER_SET)&&(i=En.forName(s.get(an.CHARACTER_SET).toString())),s.has(an.ERROR_CORRECTION)&&(o=g.parseInt(s.get(an.ERROR_CORRECTION).toString())),s.has(an.AZTEC_LAYERS)&&(a=g.parseInt(s.get(an.AZTEC_LAYERS).toString()))),xn.encodeLayers(t,e,n,r,i,o,a)}static encodeLayers(t,e,n,r,s,i,a){if(e!==L.AZTEC)throw new o("Can only encode AZTEC, but got "+e);let l=Bn.encode(A.getBytes(t,s),i,a);return xn.renderResult(l,n,r)}static renderResult(t,e,n){let r=t.getMatrix();if(null==r)throw new K;let s=r.getWidth(),i=r.getHeight(),o=Math.max(e,s),a=Math.max(n,i),l=Math.min(o/s,a/i),c=(o-s*l)/2,u=(a-i*l)/2,h=new I(o,a);for(let d=0,f=u;d<i;d++,f+=l)for(let t=0,e=c;t<s;t++,e+=l)r.get(t,d)&&h.setRegion(e,f,l,l);return h}}t.AbstractExpandedDecoder=Ft,t.ArgumentException=i,t.ArithmeticException=Y,t.AztecCode=An,t.AztecCodeReader=dt,t.AztecCodeWriter=xn,t.AztecDecoder=J,t.AztecDetector=ht,t.AztecDetectorResult=st,t.AztecEncoder=Bn,t.AztecHighLevelEncoder=Mn,t.AztecPoint=ut,t.BarcodeFormat=L,t.Binarizer=c,t.BinaryBitmap=a,t.BitArray=p,t.BitMatrix=I,t.BitSource=ae,t.BrowserAztecCodeReader=class extends B{constructor(t=500){super(new dt,t)}},t.BrowserBarcodeReader=class extends B{constructor(t=500,e){super(new ee(e),t,e)}},t.BrowserCodeReader=B,t.BrowserDatamatrixCodeReader=class extends B{constructor(t=500){super(new he,t)}},t.BrowserMultiFormatReader=class extends B{constructor(t=null,e=500){const n=new sn;n.setHints(t),super(n,e)}decodeBitmap(t){return this.reader.decodeWithState(t)}},t.BrowserPDF417Reader=class extends B{constructor(t=500){super(new nn,t)}},t.BrowserQRCodeReader=class extends B{constructor(t=500){super(new Oe,t)}},t.BrowserQRCodeSvgWriter=mn,t.CharacterSetECI=y,t.ChecksumException=l,t.Code128Reader=gt,t.Code39Reader=pt,t.DataMatrixDecodedBitStreamParser=le,t.DataMatrixReader=he,t.DecodeHintType=w,t.DecoderResult=W,t.DefaultGridSampler=lt,t.DetectorResult=rt,t.EAN13Reader=At,t.EncodeHintType=an,t.Exception=s,t.FormatException=_,t.GenericGF=q,t.GenericGFPoly=Z,t.GlobalHistogramBinarizer=b,t.GridSampler=ot,t.GridSamplerInstance=ct,t.HTMLCanvasElementLuminanceSource=O,t.HybridBinarizer=T,t.ITFReader=mt,t.IllegalArgumentException=o,t.IllegalStateException=K,t.InvertedLuminanceSource=N,t.LuminanceSource=R,t.MathUtils=tt,t.MultiFormatOneDReader=ee,t.MultiFormatReader=sn,t.MultiFormatWriter=class{encode(t,e,n,r,s){let i;switch(e){case L.QR_CODE:i=new wn;break;default:throw new o("No encoder available for format "+e)}return i.encode(t,e,n,r,s)}},t.NotFoundException=v,t.OneDReader=ft,t.PDF417DecodedBitStreamParser=tn,t.PDF417DecoderErrorCorrection=ke,t.PDF417Reader=nn,t.PDF417ResultMetadata=Xe,t.PerspectiveTransform=at,t.PlanarYUVLuminanceSource=_n,t.QRCodeByteMatrix=un,t.QRCodeDataMask=we,t.QRCodeDecodedBitStreamParser=Ce,t.QRCodeDecoderErrorCorrectionLevel=de,t.QRCodeDecoderFormatInformation=fe,t.QRCodeEncoder=pn,t.QRCodeEncoderQRCode=hn,t.QRCodeMaskUtil=cn,t.QRCodeMatrixUtil=fn,t.QRCodeMode=Ee,t.QRCodeReader=Oe,t.QRCodeVersion=me,t.QRCodeWriter=wn,t.RGBLuminanceSource=yn,t.RSS14Reader=te,t.RSSExpandedReader=Qt,t.ReaderException=rn,t.ReedSolomonDecoder=Q,t.ReedSolomonEncoder=ln,t.ReedSolomonException=$,t.Result=x,t.ResultMetadataType=G,t.ResultPoint=nt,t.StringUtils=A,t.UnsupportedOperationException=E,t.VideoInputDevice=D,t.WhiteRectangleDetector=it,t.WriterException=dn,t.ZXingArrays=f,t.ZXingCharset=En,t.ZXingInteger=g,t.ZXingStandardCharsets=Cn,t.ZXingStringBuilder=S,t.ZXingStringEncoding=C,t.ZXingSystem=u,t.createAbstractExpandedDecoder=qt,Object.defineProperty(t,"__esModule",{value:!0})}(e)},Q5es:function(t,e,n){"use strict";n("KBVK"),n("1M1C")},YElM:function(t,e){},jAob:function(t,e,n){"use strict";n("KBVK"),n("1M1C")},jTPI:function(t,e,n){"use strict";n("KBVK"),n("1M1C")},lTHQ:function(t,e){},szyW:function(t,e,n){"use strict";n("KBVK"),n("1M1C")},uAql:function(t,e,n){"use strict";n("KBVK")},y7uS:function(t,e,n){"use strict";n("KBVK")},"yJ/b":function(t,e){},zUnb:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.r(e);let s=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else s&&console.log("RxJS: Back to a better error behavior. Thank you. <3");s=t},get useDeprecatedSynchronousErrorHandling(){return s}};function o(t){setTimeout(()=>{throw t},0)}const a={closed:!0,next(t){},error(t){if(i.useDeprecatedSynchronousErrorHandling)throw t;o(t)},complete(){}},l=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function c(t){return null!==t&&"object"==typeof t}const u=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let h=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:s,_unsubscribe:i,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(r(i)){s&&(this._unsubscribe=void 0);try{i.call(this)}catch(a){e=a instanceof u?d(a.errors):[a]}}if(l(o)){let t=-1,n=o.length;for(;++t<n;){const n=o[t];if(c(n))try{n.unsubscribe()}catch(a){e=e||[],a instanceof u?e=e.concat(d(a.errors)):e.push(a)}}}if(e)throw new u(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const s=this._subscriptions;return null===s?this._subscriptions=[n]:s.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function d(t){return t.reduce((t,e)=>t.concat(e instanceof u?e.errors:e),[])}const f=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class g extends h{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!t){this.destination=a;break}if("object"==typeof t){t instanceof g?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new p(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new p(this,t,e,n)}}[f](){return this}static create(t,e,n){const r=new g(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class p extends g{constructor(t,e,n,s){let i;super(),this._parentSubscriber=t;let o=this;r(e)?i=e:e&&(i=e.next,n=e.error,s=e.complete,e!==a&&(o=Object.create(e),r(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=i,this._error=n,this._complete=s}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;i.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=i;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):o(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;o(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);i.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),i.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(t,e,n){if(!i.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return i.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(o(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const m=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function w(t){return t}let _=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,s=function(t,e,n){if(t){if(t instanceof g)return t;if(t[f])return t[f]()}return t||e||n?new g(t,e,n):new g(a)}(t,e,n);if(s.add(r?r.call(s,this.source):this.source||i.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),i.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}_trySubscribe(t){try{return this._subscribe(t)}catch(e){i.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof g?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=y(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(s){n(s),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[m](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?w:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=y(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function y(t){if(t||(t=i.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const E=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class C extends h{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class A extends g{constructor(t){super(t),this.destination=t}}let S=(()=>{class t extends _{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[f](){return new A(this)}lift(t){const e=new I(this,this);return e.operator=t,e}next(t){if(this.closed)throw new E;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let s=0;s<n;s++)r[s].next(t)}}error(t){if(this.closed)throw new E;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let s=0;s<n;s++)r[s].error(t);this.observers.length=0}complete(){if(this.closed)throw new E;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new E;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new E;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new C(this,t))}asObservable(){const t=new _;return t.source=this,t}}return t.create=(t,e)=>new I(t,e),t})();class I extends S{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):h.EMPTY}}function v(t){return t&&"function"==typeof t.schedule}function b(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new T(t,e))}}class T{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new R(t,this.project,this.thisArg))}}class R extends g{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const N=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()};function O(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const D=O(),P=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function M(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const B=t=>{if(t&&"function"==typeof t[m])return r=t,t=>{const e=r[m]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(P(t))return N(t);if(M(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,o),t);if(t&&"function"==typeof t[D])return e=t,t=>{const n=e[D]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=c(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,r};function x(t,e){return new _(n=>{const r=new h;let s=0;return r.add(e.schedule(function(){s!==t.length?(n.next(t[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function k(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[m]}(t))return function(t,e){return new _(n=>{const r=new h;return r.add(e.schedule(()=>{const s=t[m]();r.add(s.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(M(t))return function(t,e){return new _(n=>{const r=new h;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(P(t))return x(t,e);if(function(t){return t&&"function"==typeof t[D]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new _(n=>{const r=new h;let s;return r.add(()=>{s&&"function"==typeof s.return&&s.return()}),r.add(e.schedule(()=>{s=t[D](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=s.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof _?t:new _(B(t))}class L extends g{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class F extends g{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function U(t,e){if(e.closed)return;if(t instanceof _)return t.subscribe(e);let n;try{n=B(t)(e)}catch(r){e.error(r)}return n}function V(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(V((n,r)=>k(t(n,r)).pipe(b((t,s)=>e(n,t,r,s))),n)):("number"==typeof e&&(n=e),e=>e.lift(new H(t,n)))}class H{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new j(t,this.project,this.concurrent))}}class j extends F{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new L(this),n=this.destination;n.add(e);const r=U(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function z(t=Number.POSITIVE_INFINITY){return V(w,t)}function G(t,e){return e?x(t,e):new _(N(t))}function W(){return function(t){return t.lift(new X(t))}}class X{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new Z(t,n),s=e.subscribe(r);return r.closed||(r.connection=n.connect()),s}}class Z extends g{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class Y extends _{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new h,t.add(this.source.subscribe(new $(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.EMPTY)),t}refCount(){return W()(this)}}const q=(()=>{const t=Y.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class $ extends A{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function K(){return new S}function Q(t){for(let e in t)if(t[e]===Q)return e;throw Error("Could not find renamed property on target object.")}function J(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(J).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function tt(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const et=Q({__forward_ref__:Q});function nt(t){return t.__forward_ref__=nt,t.toString=function(){return J(this())},t}function rt(t){return"function"==typeof(e=t)&&e.hasOwnProperty(et)&&e.__forward_ref__===nt?t():t;var e}class st extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function it(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():function(t){return"string"==typeof t?t:null==t?"":String(t)}(t)}function ot(t,e){const n=e?` in ${e}`:"";throw new st("201",`No provider for ${it(t)} found${n}`)}function at(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function lt(t){return{providers:t.providers||[],imports:t.imports||[]}}function ct(t){return ut(t,dt)||ut(t,gt)}function ut(t,e){return t.hasOwnProperty(e)?t[e]:null}function ht(t){return t&&(t.hasOwnProperty(ft)||t.hasOwnProperty(pt))?t[ft]:null}const dt=Q({"\u0275prov":Q}),ft=Q({"\u0275inj":Q}),gt=Q({ngInjectableDef:Q}),pt=Q({ngInjectorDef:Q});var mt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let wt;function _t(t){const e=wt;return wt=t,e}function yt(t,e,n){const r=ct(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&mt.Optional?null:void 0!==e?e:void ot(J(t),"Injector")}function Et(t){return{toString:t}.toString()}var Ct=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),At=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const St="undefined"!=typeof globalThis&&globalThis,It="undefined"!=typeof window&&window,vt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,bt="undefined"!=typeof global&&global,Tt=St||bt||It||vt,Rt={},Nt=[],Ot=[],Dt=Q({"\u0275cmp":Q}),Pt=Q({"\u0275dir":Q}),Mt=Q({"\u0275pipe":Q}),Bt=Q({"\u0275mod":Q}),xt=Q({"\u0275loc":Q}),kt=Q({"\u0275fac":Q}),Lt=Q({__NG_ELEMENT_ID__:Q});let Ft=0;function Ut(t){return Et(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Ct.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Ot,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||At.Emulated,id:"c",styles:t.styles||Ot,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,s=t.features,i=t.pipes;return n.id+=Ft++,n.inputs=Gt(t.inputs,e),n.outputs=Gt(t.outputs),s&&s.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Vt):null,n.pipeDefs=i?()=>("function"==typeof i?i():i).map(Ht):null,n})}function Vt(t){return Xt(t)||function(t){return t[Pt]||null}(t)}function Ht(t){return function(t){return t[Mt]||null}(t)}const jt={};function zt(t){const e={type:t.type,bootstrap:t.bootstrap||Ot,declarations:t.declarations||Ot,imports:t.imports||Ot,exports:t.exports||Ot,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&Et(()=>{jt[t.id]=t.type}),e}function Gt(t,e){if(null==t)return Rt;const n={};for(const r in t)if(t.hasOwnProperty(r)){let s=t[r],i=s;Array.isArray(s)&&(i=s[1],s=s[0]),n[s]=r,e&&(e[s]=i)}return n}const Wt=Ut;function Xt(t){return t[Dt]||null}function Zt(t,e){const n=t[Bt]||null;if(!n&&!0===e)throw new Error(`Type ${J(t)} does not have '\u0275mod' property.`);return n}const Yt=20,qt=10;function $t(t){return Array.isArray(t)&&"object"==typeof t[1]}function Kt(t){return Array.isArray(t)&&!0===t[1]}function Qt(t){return 0!=(8&t.flags)}function Jt(t){return 2==(2&t.flags)}function te(t){return 1==(1&t.flags)}function ee(t){return null!==t.template}function ne(t,e){return t.hasOwnProperty(kt)?t[kt]:null}class re{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function se(){const t=oe(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Rt)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function ie(t,e,n,r){const s=oe(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:Rt,current:null}),i=s.current||(s.current={}),o=s.previous,a=this.declaredInputs[n],l=o[a];i[a]=new re(l&&l.currentValue,e,o===Rt),t[r]=e}function oe(t){return t.__ngSimpleChanges__||null}let ae;function le(t){return!!t.listen}const ce={createRenderer:(t,e)=>void 0!==ae?ae:"undefined"!=typeof document?document:void 0};function ue(t){for(;Array.isArray(t);)t=t[0];return t}function he(t,e){return ue(e[t.index])}function de(t,e){return t.data[e]}function fe(t,e){const n=e[t];return $t(n)?n:n[0]}function ge(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function pe(t){return 4==(4&t[2])}function me(t){return 128==(128&t[2])}function we(t,e){return null==e?null:t[e]}function _e(t){t[18]=0}function ye(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Ee={lFrame:Fe(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ce(){return Ee.bindingsEnabled}function Ae(){return Ee.lFrame.lView}function Se(){return Ee.lFrame.tView}function Ie(){let t=ve();for(;null!==t&&64===t.type;)t=t.parent;return t}function ve(){return Ee.lFrame.currentTNode}function be(t,e){const n=Ee.lFrame;n.currentTNode=t,n.isParent=e}function Te(){return Ee.lFrame.isParent}function Re(){return Ee.isInCheckNoChangesMode}function Ne(t){Ee.isInCheckNoChangesMode=t}function Oe(t,e){const n=Ee.lFrame;n.bindingIndex=n.bindingRootIndex=t,De(e)}function De(t){Ee.lFrame.currentDirectiveIndex=t}function Pe(){return Ee.lFrame.currentQueryIndex}function Me(t){Ee.lFrame.currentQueryIndex=t}function Be(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function xe(t,e,n){if(n&mt.SkipSelf){let r=e,s=t;for(;r=r.parent,!(null!==r||n&mt.Host||(r=Be(s),null===r)||(s=s[15],10&r.type)););if(null===r)return!1;e=r,t=s}const r=Ee.lFrame=Le();return r.currentTNode=e,r.lView=t,!0}function ke(t){const e=Le(),n=t[1];Ee.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Le(){const t=Ee.lFrame,e=null===t?null:t.child;return null===e?Fe(t):e}function Fe(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Ue(){const t=Ee.lFrame;return Ee.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Ve=Ue;function He(){const t=Ue();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function je(){return Ee.lFrame.selectedIndex}function ze(t){Ee.lFrame.selectedIndex=t}function Ge(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:s,ngAfterViewInit:i,ngAfterViewChecked:o,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),s&&((t.contentHooks||(t.contentHooks=[])).push(n,s),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,s)),i&&(t.viewHooks||(t.viewHooks=[])).push(-n,i),o&&((t.viewHooks||(t.viewHooks=[])).push(n,o),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,o)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function We(t,e,n){Ye(t,e,3,n)}function Xe(t,e,n,r){(3&t[2])===n&&Ye(t,e,n,r)}function Ze(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Ye(t,e,n,r){const s=null!=r?r:-1,i=e.length-1;let o=0;for(let a=void 0!==r?65535&t[18]:0;a<i;a++)if("number"==typeof e[a+1]){if(o=e[a],null!=r&&o>=r)break}else e[a]<0&&(t[18]+=65536),(o<s||-1==s)&&(qe(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function qe(t,e,n,r){const s=n[r]<0,i=n[r+1],o=t[s?-n[r]:n[r]];if(s){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{i.call(o)}finally{}}}else try{i.call(o)}finally{}}const $e=-1;class Ke{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Qe(t,e,n){const r=le(t);let s=0;for(;s<n.length;){const i=n[s];if("number"==typeof i){if(0!==i)break;s++;const o=n[s++],a=n[s++],l=n[s++];r?t.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=i,a=n[++s];tn(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),s++}}return s}function Je(t){return 3===t||4===t||6===t}function tn(t){return 64===t.charCodeAt(0)}function en(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const s=e[r];"number"==typeof s?n=s:0===n||nn(t,n,s,null,-1===n||2===n?e[++r]:null)}}return t}function nn(t,e,n,r,s){let i=0,o=t.length;if(-1===e)o=-1;else for(;i<t.length;){const n=t[i++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=i-1;break}}}for(;i<t.length;){const e=t[i];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==s&&(t[i+1]=s));if(r===t[i+1])return void(t[i+2]=s)}i++,null!==r&&i++,null!==s&&i++}-1!==o&&(t.splice(o,0,e),i=o+1),t.splice(i++,0,n),null!==r&&t.splice(i++,0,r),null!==s&&t.splice(i++,0,s)}function rn(t){return t!==$e}function sn(t){return 32767&t}function on(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let an=!0;function ln(t){const e=an;return an=t,e}let cn=0;function un(t,e){const n=dn(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,hn(r.data,t),hn(e,null),hn(r.blueprint,null));const s=fn(t,e),i=t.injectorIndex;if(rn(s)){const t=sn(s),n=on(s,e),r=n[1].data;for(let s=0;s<8;s++)e[i+s]=n[t+s]|r[t+s]}return e[i+8]=s,i}function hn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function dn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function fn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,s=e;for(;null!==s;){const t=s[1],e=t.type;if(r=2===e?t.declTNode:1===e?s[6]:null,null===r)return $e;if(n++,s=s[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return $e}function gn(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Lt)&&(r=n[Lt]),null==r&&(r=n[Lt]=cn++);const s=255&r;e.data[t+(s>>5)]|=1<<s}(t,e,n)}function pn(t,e,n){if(n&mt.Optional)return t;ot(e,"NodeInjector")}function mn(t,e,n,r){if(n&mt.Optional&&void 0===r&&(r=null),0==(n&(mt.Self|mt.Host))){const s=t[9],i=_t(void 0);try{return s?s.get(e,r,n&mt.Optional):yt(e,r,n&mt.Optional)}finally{_t(i)}}return pn(r,e,n)}function wn(t,e,n,r=mt.Default,s){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Lt)?t[Lt]:void 0;return"number"==typeof e?e>=0?255&e:yn:e}(n);if("function"==typeof i){if(!xe(e,t,r))return r&mt.Host?pn(s,n,r):mn(e,n,r,s);try{const t=i();if(null!=t||r&mt.Optional)return t;ot(n)}finally{Ve()}}else if("number"==typeof i){let s=null,o=dn(t,e),a=$e,l=r&mt.Host?e[16][6]:null;for((-1===o||r&mt.SkipSelf)&&(a=-1===o?fn(t,e):e[o+8],a!==$e&&In(r,!1)?(s=e[1],o=sn(a),e=on(a,e)):o=-1);-1!==o;){const t=e[1];if(Sn(i,o,t.data)){const t=En(o,e,n,s,r,l);if(t!==_n)return t}a=e[o+8],a!==$e&&In(r,e[1].data[o+8]===l)&&Sn(i,o,e)?(s=t,o=sn(a),e=on(a,e)):o=-1}}}return mn(e,n,r,s)}const _n={};function yn(){return new vn(Ie(),Ae())}function En(t,e,n,r,s,i){const o=e[1],a=o.data[t+8],l=Cn(a,o,n,null==r?Jt(a)&&an:r!=o&&0!=(3&a.type),s&mt.Host&&i===a);return null!==l?An(e,o,l,a):_n}function Cn(t,e,n,r,s){const i=t.providerIndexes,o=e.data,a=1048575&i,l=t.directiveStart,c=i>>20,u=s?a+c:t.directiveEnd;for(let h=r?a:a+c;h<u;h++){const t=o[h];if(h<l&&n===t||h>=l&&t.type===n)return h}if(s){const t=o[l];if(t&&ee(t)&&t.type===n)return l}return null}function An(t,e,n,r){let s=t[n];const i=e.data;if(s instanceof Ke){const o=s;o.resolving&&function(t,e){throw new st("200",`Circular dependency in DI detected for ${t}`)}(it(i[n]));const a=ln(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?_t(o.injectImpl):null;xe(t,r,mt.Default);try{s=t[n]=o.factory(void 0,i,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:s,ngDoCheck:i}=e.type.prototype;if(r){const r=((o=e).type.prototype.ngOnChanges&&(o.setInput=ie),se);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}var o;s&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,s),i&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,i))}(n,i[n],e)}finally{null!==l&&_t(l),ln(a),o.resolving=!1,Ve()}}return s}function Sn(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function In(t,e){return!(t&mt.Self||t&mt.Host&&e)}class vn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return wn(this._tNode,this._lView,t,void 0,e)}}const bn="__parameters__";function Tn(t,e,n){return Et(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function s(...t){if(this instanceof s)return r.apply(this,t),this;const e=new s(...t);return n.annotation=e,n;function n(t,n,r){const s=t.hasOwnProperty(bn)?t[bn]:Object.defineProperty(t,bn,{value:[]})[bn];for(;s.length<=r;)s.push(null);return(s[r]=s[r]||[]).push(e),t}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=t,s.annotationCls=s,s})}class Rn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=at({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Nn=new Rn("AnalyzeForEntryComponents"),On=Function;function Dn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),Dn(r,e)):e!==t&&e.push(r)}return e}function Pn(t,e){t.forEach(t=>Array.isArray(t)?Pn(t,e):e(t))}function Mn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Bn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function xn(t,e,n){let r=Ln(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let s=t.length;if(s==e)t.push(n,r);else if(1===s)t.push(r,t[0]),t[0]=n;else{for(s--,t.push(t[s-1],t[s]);s>e;)t[s]=t[s-2],s--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function kn(t,e){const n=Ln(t,e);if(n>=0)return t[1|n]}function Ln(t,e){return function(t,e,n){let r=0,s=t.length>>1;for(;s!==r;){const n=r+(s-r>>1),i=t[n<<1];if(e===i)return n<<1;i>e?s=n:r=n+1}return~(s<<1)}(t,e)}const Fn={},Un=/\n/gm,Vn="__source",Hn=Q({provide:String,useValue:Q});let jn;function zn(t){const e=jn;return jn=t,e}function Gn(t,e=mt.Default){if(void 0===jn)throw new Error("inject() must be called from an injection context");return null===jn?yt(t,void 0,e):jn.get(t,e&mt.Optional?null:void 0,e)}function Wn(t,e=mt.Default){return(wt||Gn)(rt(t),e)}function Xn(t){const e=[];for(let n=0;n<t.length;n++){const r=rt(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=mt.Default;for(let e=0;e<r.length;e++){const s=r[e],i=s.__NG_DI_FLAG__;"number"==typeof i?-1===i?t=s.token:n|=i:t=s}e.push(Wn(t,n))}else e.push(Wn(r))}return e}function Zn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const Yn=Zn(Tn("Inject",t=>({token:t})),-1),qn=Zn(Tn("Optional"),8),$n=Zn(Tn("SkipSelf"),4);function Kn(t){return t.ngDebugContext}function Qn(t){return t.ngOriginalError}function Jn(t,...e){t.error(...e)}class tr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Jn}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?Kn(t)?Kn(t):this._findContext(Qn(t)):null}_findOriginalError(t){let e=Qn(t);for(;e&&Qn(e);)e=Qn(e);return e}}function er(t,e){t.__ngContext__=e}const nr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Tt))();function rr(t){return t instanceof Function?t():t}var sr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function ir(t,e){return(void 0)(t,e)}function or(t){const e=t[3];return Kt(e)?e[3]:e}function ar(t){return cr(t[13])}function lr(t){return cr(t[4])}function cr(t){for(;null!==t&&!Kt(t);)t=t[4];return t}function ur(t,e,n,r,s){if(null!=r){let i,o=!1;Kt(r)?i=r:$t(r)&&(o=!0,r=r[0]);const a=ue(r);0===t&&null!==n?null==s?wr(e,n,a):mr(e,n,a,s||null,!0):1===t&&null!==n?mr(e,n,a,s||null,!0):2===t?function(t,e,n){const r=yr(t,e);r&&function(t,e,n,r){le(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=i&&function(t,e,n,r,s){const i=n[7];i!==ue(n)&&ur(e,t,r,i,s);for(let o=qt;o<n.length;o++){const s=n[o];vr(s[1],s,t,e,r,i)}}(e,t,i,n,s)}}function hr(t,e,n){return le(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function dr(t,e){const n=t[9],r=n.indexOf(e),s=e[3];1024&e[2]&&(e[2]&=-1025,ye(s,-1)),n.splice(r,1)}function fr(t,e){if(t.length<=qt)return;const n=qt+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&dr(i,r),e>0&&(t[n-1][4]=r[4]);const o=Bn(t,qt+e);vr(r[1],s=r,s[11],2,null,null),s[0]=null,s[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var s;return r}function gr(t,e){if(!(256&e[2])){const n=e[11];le(n)&&n.destroyNode&&vr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return pr(t[1],t);for(;e;){let n=null;if($t(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)$t(e)&&pr(e[1],e),e=e[3];null===e&&(e=t),$t(e)&&pr(e[1],e),n=e&&e[4]}e=n}}(e)}}function pr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Ke)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let s=-1;if(null!==n)for(let i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){const t=n[i+1],o="function"==typeof t?t(e):ue(e[t]),a=r[s=n[i+2]],l=n[i+3];"boolean"==typeof l?o.removeEventListener(n[i],a,l):l>=0?r[s=l]():r[s=-l].unsubscribe(),i+=2}else{const t=r[s=n[i+1]];n[i].call(t)}if(null!==r){for(let t=s+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&le(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&Kt(e[3])){n!==e[3]&&dr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function mr(t,e,n,r,s){le(t)?t.insertBefore(e,n,r,s):e.insertBefore(n,r,s)}function wr(t,e,n){le(t)?t.appendChild(e,n):e.appendChild(n)}function _r(t,e,n,r,s){null!==r?mr(t,e,n,r,s):wr(t,e,n)}function yr(t,e){return le(t)?t.parentNode(e):e.parentNode}function Er(t,e,n,r){const s=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===At.None||e===At.Emulated)return null}return he(r,n)}(t,e.parent,n)}(t,r,e),i=e[11],o=function(t,e,n){return function(t,e,n){return 40&t.type?he(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=s)if(Array.isArray(n))for(let a=0;a<n.length;a++)_r(i,s,n[a],o,!1);else _r(i,s,n,o,!1)}function Cr(t,e){if(null!==e){const n=e.type;if(3&n)return he(e,t);if(4&n)return Sr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Cr(t,n);{const n=t[e.index];return Kt(n)?Sr(-1,n):ue(n)}}if(32&n)return ir(e,t)()||ue(t[e.index]);{const n=Ar(t,e);return null!==n?Array.isArray(n)?n[0]:Cr(or(t[16]),n):Cr(t,e.next)}}return null}function Ar(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Sr(t,e){const n=qt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Cr(t,r)}return e[7]}function Ir(t,e,n,r,s,i,o){for(;null!=n;){const a=r[n.index],l=n.type;if(o&&0===e&&(a&&er(ue(a),r),n.flags|=4),64!=(64&n.flags))if(8&l)Ir(t,e,n.child,r,s,i,!1),ur(e,t,s,a,i);else if(32&l){const o=ir(n,r);let l;for(;l=o();)ur(e,t,s,l,i);ur(e,t,s,a,i)}else 16&l?br(t,e,r,n,s,i):ur(e,t,s,a,i);n=o?n.projectionNext:n.next}}function vr(t,e,n,r,s,i){Ir(n,r,t.firstChild,e,s,i,!1)}function br(t,e,n,r,s,i){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let l=0;l<a.length;l++)ur(e,t,s,a[l],i);else Ir(t,e,a,o[3],s,i,!0)}function Tr(t,e,n){le(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Rr(t,e,n){le(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Nr(t,e,n){let r=t.length;for(;;){const s=t.indexOf(e,n);if(-1===s)return s;if(0===s||t.charCodeAt(s-1)<=32){const n=e.length;if(s+n===r||t.charCodeAt(s+n)<=32)return s}n=s+1}}const Or="ng-template";function Dr(t,e,n){let r=0;for(;r<t.length;){let s=t[r++];if(n&&"class"===s){if(s=t[r],-1!==Nr(s.toLowerCase(),e,0))return!0}else if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}}return!1}function Pr(t){return 4===t.type&&t.value!==Or}function Mr(t,e,n){return e===(4!==t.type||n?t.value:Or)}function Br(t,e,n){let r=4;const s=t.attrs||[],i=function(t){for(let e=0;e<t.length;e++)if(Je(t[e]))return e;return t.length}(s);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!Mr(t,l,n)||""===l&&1===e.length){if(xr(r))return!1;o=!0}}else{const c=8&r?l:e[++a];if(8&r&&null!==t.attrs){if(!Dr(t.attrs,c,n)){if(xr(r))return!1;o=!0}continue}const u=kr(8&r?"class":l,s,Pr(t),n);if(-1===u){if(xr(r))return!1;o=!0;continue}if(""!==c){let t;t=u>i?"":s[u+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Nr(e,c,0)||2&r&&c!==t){if(xr(r))return!1;o=!0}}}}else{if(!o&&!xr(r)&&!xr(l))return!1;if(o&&xr(l))continue;o=!1,r=l|1&r}}return xr(r)||o}function xr(t){return 0==(1&t)}function kr(t,e,n,r){if(null===e)return-1;let s=0;if(r||!n){let n=!1;for(;s<e.length;){const r=e[s];if(r===t)return s;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++s];for(;"string"==typeof t;)t=e[++s];continue}if(4===r)break;if(0===r){s+=4;continue}}s+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Lr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Br(t,e[r],n))return!0;return!1}function Fr(t,e){return t?":not("+e.trim()+")":e}function Ur(t){let e=t[0],n=1,r=2,s="",i=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const e=t[++n];s+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?s+="."+o:4&r&&(s+=" "+o);else""===s||xr(o)||(e+=Fr(i,s),s=""),r=o,i=i||!xr(r);n++}return""!==s&&(e+=Fr(i,s)),e}const Vr={};function Hr(t,e){return t<<17|e<<2}function jr(t){return t>>17&32767}function zr(t){return 2|t}function Gr(t){return(131068&t)>>2}function Wr(t,e){return-131069&t|e<<2}function Xr(t){return 1|t}function Zr(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r],i=n[r+1];if(-1!==i){const n=t.data[i];Me(s),n.contentQueries(2,e[i],i)}}}function Yr(t,e,n,r,s,i,o,a,l,c){const u=e.blueprint.slice();return u[0]=s,u[2]=140|r,_e(u),u[3]=u[15]=t,u[8]=n,u[10]=o||t&&t[10],u[11]=a||t&&t[11],u[12]=l||t&&t[12]||null,u[9]=c||t&&t[9]||null,u[6]=i,u[16]=2==e.type?t[16]:u,u}function qr(t,e,n,r,s){let i=t.data[e];if(null===i)i=function(t,e,n,r,s){const i=ve(),o=Te(),a=t.data[e]=function(t,e,n,r,s,i){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:s,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?i:i&&i.parent,n,e,r,s);return null===t.firstChild&&(t.firstChild=a),null!==i&&(o?null==i.child&&null!==a.parent&&(i.child=a):null===i.next&&(i.next=a)),a}(t,e,n,r,s),Ee.lFrame.inI18n&&(i.flags|=64);else if(64&i.type){i.type=n,i.value=r,i.attrs=s;const t=function(){const t=Ee.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();i.injectorIndex=null===t?-1:t.injectorIndex}return be(i,!0),i}function $r(t,e,n,r){if(0===n)return-1;const s=e.length;for(let i=0;i<n;i++)e.push(r),t.blueprint.push(r),t.data.push(null);return s}function Kr(t,e,n){ke(e);try{const r=t.viewQuery;null!==r&&Cs(1,r,n);const s=t.template;null!==s&&ts(t,e,s,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Zr(t,e),t.staticViewQueries&&Cs(2,t.viewQuery,n);const i=t.components;null!==i&&function(t,e){for(let n=0;n<e.length;n++)ms(t,e[n])}(e,i)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,He()}}function Qr(t,e,n,r){const s=e[2];if(256==(256&s))return;ke(e);const i=Re();try{_e(e),Ee.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&ts(t,e,n,2,r);const o=3==(3&s);if(!i)if(o){const n=t.preOrderCheckHooks;null!==n&&We(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Xe(e,n,0,null),Ze(e,0)}if(function(t){for(let e=ar(t);null!==e;e=lr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&ye(r,1),n[2]|=1024}}}(e),function(t){for(let e=ar(t);null!==e;e=lr(e))for(let t=qt;t<e.length;t++){const n=e[t],r=n[1];me(n)&&Qr(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Zr(t,e),!i)if(o){const n=t.contentCheckHooks;null!==n&&We(e,n)}else{const n=t.contentHooks;null!==n&&Xe(e,n,1),Ze(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)ze(~r);else{const s=r,i=n[++t],o=n[++t];Oe(i,s),o(2,e[s])}}}finally{ze(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)gs(t,e[n])}(e,a);const l=t.viewQuery;if(null!==l&&Cs(2,l,r),!i)if(o){const n=t.viewCheckHooks;null!==n&&We(e,n)}else{const n=t.viewHooks;null!==n&&Xe(e,n,2),Ze(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),i||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,ye(e[3],-1))}finally{He()}}function Jr(t,e,n,r){const s=e[10],i=!Re(),o=pe(e);try{i&&!o&&s.begin&&s.begin(),o&&Kr(t,e,r),Qr(t,e,n,r)}finally{i&&!o&&s.end&&s.end()}}function ts(t,e,n,r,s){const i=je(),o=2&r;try{ze(-1),o&&e.length>Yt&&function(t,e,n,r){if(!r)if(3==(3&e[2])){const n=t.preOrderCheckHooks;null!==n&&We(e,n,20)}else{const n=t.preOrderHooks;null!==n&&Xe(e,n,0,20)}ze(20)}(t,e,0,Re()),n(r,s)}finally{ze(i)}}function es(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=ns(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function ns(t,e,n,r,s,i,o,a,l,c){const u=Yt+r,h=u+s,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Vr);return n}(u,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function rs(t,e,n,r){const s=Ss(e);null===n?s.push(r):(s.push(n),t.firstCreatePass&&Is(t).push(r,s.length-1))}function ss(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const s=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,s):n[r]=[e,s]}return n}function is(t,e,n,r,s,i){const o=i.hostBindings;if(o){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const i=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=i&&n.push(i),n.push(r,s,o)}}function os(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function as(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function ls(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ee(e)&&(n[""]=t)}}function cs(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function us(t,e,n,r,s){t.data[r]=s;const i=s.factory||(s.factory=ne(s.type)),o=new Ke(i,ee(s),null);t.blueprint[r]=o,n[r]=o,is(t,e,0,r,$r(t,n,s.hostVars,Vr),s)}function hs(t,e,n){const r=he(e,t),s=es(n),i=t[10],o=ws(t,Yr(t,s,null,n.onPush?64:16,r,e,i,i.createRenderer(r,n),null,null));t[e.index]=o}function ds(t,e,n,r,s,i){const o=i[e];if(null!==o){const t=r.setInput;for(let e=0;e<o.length;){const s=o[e++],i=o[e++],a=o[e++];null!==t?r.setInput(n,a,s,i):n[i]=a}}}function fs(t,e){let n=null,r=0;for(;r<e.length;){const s=e[r];if(0!==s)if(5!==s){if("number"==typeof s)break;t.hasOwnProperty(s)&&(null===n&&(n=[]),n.push(s,t[s],e[r+1])),r+=2}else r+=2;else r+=4}return n}function gs(t,e){const n=fe(e,t);if(me(n)){const t=n[1];80&n[2]?Qr(t,n,t.template,n[8]):n[5]>0&&ps(n)}}function ps(t){for(let n=ar(t);null!==n;n=lr(n))for(let t=qt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Qr(t,e,t.template,e[8])}else e[5]>0&&ps(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=fe(e[n],t);me(r)&&r[5]>0&&ps(r)}}function ms(t,e){const n=fe(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Kr(r,n,n[8])}function ws(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function _s(t){for(;t;){t[2]|=64;const e=or(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function ys(t,e,n){const r=e[10];r.begin&&r.begin();try{Qr(t,e,t.template,n)}catch(s){throw vs(e,s),s}finally{r.end&&r.end()}}function Es(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=ge(n),s=r[1];Jr(s,r,s.template,n)}}(t[8])}function Cs(t,e,n){Me(0),e(t,n)}const As=(()=>Promise.resolve(null))();function Ss(t){return t[7]||(t[7]=[])}function Is(t){return t.cleanup||(t.cleanup=[])}function vs(t,e){const n=t[9],r=n?n.get(tr,null):null;r&&r.handleError(e)}function bs(t,e,n,r,s){for(let i=0;i<n.length;){const o=n[i++],a=n[i++],l=e[o],c=t.data[o];null!==c.setInput?c.setInput(l,s,r,a):l[a]=s}}function Ts(t,e,n){let r=n?t.styles:null,s=n?t.classes:null,i=0;if(null!==e)for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?i=t:1==i?s=tt(s,t):2==i&&(r=tt(r,t+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=s:t.classesWithoutHost=s}const Rs=new Rn("INJECTOR",-1);class Ns{get(t,e=Fn){if(e===Fn){const e=new Error(`NullInjectorError: No provider for ${J(t)}!`);throw e.name="NullInjectorError",e}return e}}const Os=new Rn("Set Injector scope."),Ds={},Ps={},Ms=[];let Bs;function xs(){return void 0===Bs&&(Bs=new Ns),Bs}function ks(t,e=null,n=null,r){return new Ls(t,n,e||xs(),r)}class Ls{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];e&&Pn(e,n=>this.processProvider(n,t,e)),Pn([t],t=>this.processInjectorType(t,[],s)),this.records.set(Rs,Us(void 0,this));const i=this.records.get(Os);this.scope=null!=i?i.value:null,this.source=r||("object"==typeof t?null:J(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Fn,n=mt.Default){this.assertNotDestroyed();const r=zn(this);try{if(!(n&mt.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(s=t)||"object"==typeof s&&s instanceof Rn)&&ct(t);e=n&&this.injectableDefInScope(n)?Us(Fs(t),Ds):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&mt.Self?xs():this.parent).get(t,e=n&mt.Optional&&e===Fn?null:e)}catch(i){if("NullInjectorError"===i.name){if((i.ngTempTokenPath=i.ngTempTokenPath||[]).unshift(J(t)),r)throw i;return function(t,e,n,r){const s=t.ngTempTokenPath;throw e[Vn]&&s.unshift(e[Vn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let s=J(e);if(Array.isArray(e))s=e.map(J).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):J(r)))}s=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${s}]: ${t.replace(Un,"\n  ")}`}("\n"+t.message,s,n,r),t.ngTokenPath=s,t.ngTempTokenPath=null,t}(i,t,"R3InjectorError",this.source)}throw i}finally{zn(r)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(J(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=rt(t)))return!1;let r=ht(t);const s=null==r&&t.ngModule||void 0,i=void 0===s?t:s,o=-1!==n.indexOf(i);if(void 0!==s&&(r=ht(s)),null==r)return!1;if(null!=r.imports&&!o){let t;n.push(i);try{Pn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];Pn(r,t=>this.processProvider(t,n,r||Ms))}}this.injectorDefTypes.add(i);const a=ne(i)||(()=>new i);this.records.set(i,Us(a,Ds));const l=r.providers;if(null!=l&&!o){const e=t;Pn(l,t=>this.processProvider(t,e,l))}return void 0!==s&&void 0!==t.providers}processProvider(t,e,n){let r=Hs(t=rt(t))?t:rt(t&&t.provide);const s=function(t,e,n){return Vs(t)?Us(void 0,t.useValue):Us(function(t,e,n){let r;if(Hs(t)){const e=rt(t);return ne(e)||Fs(e)}if(Vs(t))r=()=>rt(t.useValue);else if((s=t)&&s.useFactory)r=()=>t.useFactory(...Xn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Wn(rt(t.useExisting));else{const e=rt(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return ne(e)||Fs(e);r=()=>new e(...Xn(t.deps))}var s;return r}(t),Ds)}(t);if(Hs(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Us(void 0,Ds,!0),e.factory=()=>Xn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,s)}hydrate(t,e){var n;return e.value===Ds&&(e.value=Ps,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function Fs(t){const e=ct(t),n=null!==e?e.factory:ne(t);if(null!==n)return n;if(t instanceof Rn)throw new Error(`Token ${J(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${J(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[dt]||t[gt]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Us(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Vs(t){return null!==t&&"object"==typeof t&&Hn in t}function Hs(t){return"function"==typeof t}const js=function(t,e,n){return function(t,e=null,n=null,r){const s=ks(t,e,n,r);return s._resolveInjectorDefTypes(),s}({name:n},e,t,n)};let zs=(()=>{class t{static create(t,e){return Array.isArray(t)?js(t,e,""):js(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=Fn,t.NULL=new Ns,t.\u0275prov=at({token:t,providedIn:"any",factory:()=>Wn(Rs)}),t.__NG_ELEMENT_ID__=-1,t})();function Gs(t,e){Ge(ge(t)[1],Ie())}let Ws=null;function Xs(){if(!Ws){const t=Tt.Symbol;if(t&&t.iterator)Ws=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ws=n)}}}return Ws}function Zs(t){return!!Ys(t)&&(Array.isArray(t)||!(t instanceof Map)&&Xs()in t)}function Ys(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function qs(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function $s(t,e=mt.Default){const n=Ae();return null===n?Wn(t,e):wn(Ie(),n,rt(t),e)}function Ks(t,e,n){const r=Ae();return qs(r,Ee.lFrame.bindingIndex++,e)&&function(t,e,n,r,s,i,o,a){const l=he(e,n);let c,u=e.inputs;var h;null!=u&&(c=u[r])?(bs(t,n,c,r,s),Jt(e)&&function(t,e){const n=fe(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,s=null!=o?o(s,e.value||"",r):s,le(i)?i.setProperty(l,r,s):tn(r)||(l.setProperty?l.setProperty(r,s):l[r]=s))}(Se(),function(){const t=Ee.lFrame;return de(t.tView,t.selectedIndex)}(),r,t,e,r[11],n),Ks}function Qs(t,e,n,r,s){const i=s?"class":"style";bs(t,n,e.inputs[i],i,r)}function Js(t,e,n,r){const s=Ae(),i=Se(),o=Yt+t,a=s[11],l=s[o]=hr(a,e,Ee.lFrame.currentNamespace),c=i.firstCreatePass?function(t,e,n,r,s,i,o){const a=e.consts,l=qr(e,t,2,s,we(a,i));return function(t,e,n,r){let s=!1;if(Ce()){const i=function(t,e,n){const r=t.directiveRegistry;let s=null;if(r)for(let i=0;i<r.length;i++){const o=r[i];Lr(n,o.selectors,!1)&&(s||(s=[]),gn(un(n,e),t,o.type),ee(o)?(as(t,n),s.unshift(o)):s.push(o))}return s}(t,e,n),o=null===r?null:{"":-1};if(null!==i){s=!0,cs(n,t.data.length,i.length);for(let t=0;t<i.length;t++){const e=i[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,l=$r(t,e,i.length,null);for(let s=0;s<i.length;s++){const c=i[s];n.mergedAttrs=en(n.mergedAttrs,c.hostAttrs),us(t,n,e,l,c),ls(l,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const u=c.type.prototype;!r&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!u.ngOnChanges&&!u.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function(t,e){const n=e.directiveEnd,r=t.data,s=e.attrs,i=[];let o=null,a=null;for(let l=e.directiveStart;l<n;l++){const t=r[l],n=t.inputs,c=null===s||Pr(e)?null:fs(n,s);i.push(c),o=ss(n,l,o),a=ss(t.outputs,l,a)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=i,e.inputs=o,e.outputs=a}(t,n)}o&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const s=n[e[t+1]];if(null==s)throw new st("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],s)}}}(n,r,o)}n.mergedAttrs=en(n.mergedAttrs,n.attrs)}(e,n,l,we(a,o)),null!==l.attrs&&Ts(l,l.attrs,!1),null!==l.mergedAttrs&&Ts(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,i,s,0,e,n,r):i.data[o];be(c,!0);const u=c.mergedAttrs;null!==u&&Qe(a,l,u);const h=c.classes;null!==h&&Rr(a,l,h);const d=c.styles;null!==d&&Tr(a,l,d),64!=(64&c.flags)&&Er(i,s,l,c),0===Ee.lFrame.elementDepthCount&&er(l,s),Ee.lFrame.elementDepthCount++,te(c)&&(function(t,e,n){Ce()&&(function(t,e,n,r){const s=n.directiveStart,i=n.directiveEnd;t.firstCreatePass||un(n,e),er(r,e);const o=n.initialInputs;for(let a=s;a<i;a++){const r=t.data[a],i=ee(r);i&&hs(e,n,r);const l=An(e,t,a,n);er(l,e),null!==o&&ds(0,a-s,l,r,0,o),i&&(fe(n.index,e)[8]=l)}}(t,e,n,he(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,s=n.directiveEnd,i=n.index,o=Ee.lFrame.currentDirectiveIndex;try{ze(i);for(let n=r;n<s;n++){const r=t.data[n],s=e[n];De(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||os(r,s)}}finally{ze(-1),De(o)}}(t,e,n))}(i,s,c),function(t,e,n){if(Qt(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const e=t.data[s];e.contentQueries&&e.contentQueries(1,n[s],s)}}}(i,c,s)),null!==r&&function(t,e,n=he){const r=e.localNames;if(null!==r){let s=e.index+1;for(let i=0;i<r.length;i+=2){const o=r[i+1],a=-1===o?n(e,t):t[o];t[s++]=a}}}(s,c)}function ti(){let t=Ie();Te()?Ee.lFrame.isParent=!1:(t=t.parent,be(t,!1));const e=t;Ee.lFrame.elementDepthCount--;const n=Se();n.firstCreatePass&&(Ge(n,t),Qt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Qs(n,e,Ae(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Qs(n,e,Ae(),e.stylesWithoutHost,!1)}function ei(t,e,n,r){Js(t,e,n,r),ti()}function ni(t){return!!t&&"function"==typeof t.then}function ri(t,e,n=!1,r){const s=Ae(),i=Se(),o=Ie();return function(t,e,n,r,s,i,o=!1,a){const l=te(r),c=t.firstCreatePass&&Is(t),u=Ss(e);let h=!0;if(3&r.type){const d=he(r,e),f=a?a(d):Rt,g=f.target||d,p=u.length,m=a?t=>a(ue(t[r.index])).target:r.index;if(le(n)){let o=null;if(!a&&l&&(o=function(t,e,n,r){const s=t.cleanup;if(null!=s)for(let i=0;i<s.length-1;i+=2){const t=s[i];if(t===n&&s[i+1]===r){const t=e[7],n=s[i+2];return t.length>n?t[n]:null}"string"==typeof t&&(i+=2)}return null}(t,e,s,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=i,o.__ngLastListenerFn__=i,h=!1;else{i=ii(r,e,0,i,!1);const t=n.listen(f.name||g,s,i);u.push(i,t),c&&c.push(s,m,p,p+1)}}else i=ii(r,e,0,i,!0),g.addEventListener(s,i,o),u.push(i),c&&c.push(s,m,p,o)}else i=ii(r,e,0,i,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[s])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(i),o=u.length;u.push(i,t),c&&c.push(s,r.index,o,-(o+1))}}}(i,s,s[11],o,t,e,n,r),ri}function si(t,e,n,r){try{return!1!==n(r)}catch(s){return vs(t,s),!1}}function ii(t,e,n,r,s){return function n(i){if(i===Function)return r;const o=2&t.flags?fe(t.index,e):e;0==(32&e[2])&&_s(o);let a=si(e,0,r,i),l=n.__ngNextListenerFn__;for(;l;)a=si(e,0,l,i)&&a,l=l.__ngNextListenerFn__;return s&&!1===a&&(i.preventDefault(),i.returnValue=!1),a}}function oi(t,e,n,r,s){const i=t[n+1],o=null===e;let a=r?jr(i):Gr(i),l=!1;for(;0!==a&&(!1===l||o);){const n=t[a+1];ai(t[a],e)&&(l=!0,t[a+1]=r?Xr(n):zr(n)),a=r?jr(n):Gr(n)}l&&(t[n+1]=r?zr(i):Xr(i))}function ai(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Ln(t,e)>=0}function li(t,e,n){return function(t,e,n,r){const s=Ae(),i=Se(),o=function(t){const e=Ee.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();i.firstUpdatePass&&function(t,e,n,r){const s=t.data;if(null===s[n+1]){const i=s[je()],o=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(32&t.flags)})(i)&&null===e&&!o&&(e=!1),e=function(t,e,n,r){const s=function(t){const e=Ee.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let i=e.residualStyles;if(null===s)0===e.styleBindings&&(n=ui(n=ci(null,t,e,n,r),e.attrs,r),i=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==s)if(n=ci(s,t,e,n,r),null===i){let n=function(t,e,n){const r=e.styleBindings;if(0!==Gr(r))return t[jr(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=ci(null,t,e,n[1],r),n=ui(n,e.attrs,r),function(t,e,n,r){t[jr(e.styleBindings)]=r}(t,e,0,n))}else i=function(t,e,n){let r;const s=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<s;i++)r=ui(r,t[i].hostAttrs,false);return ui(r,e.attrs,false)}(t,e)}return void 0!==i&&(e.residualStyles=i),n}(s,i,e,r),function(t,e,n,r,s,i){let o=e.styleBindings,a=jr(o),l=Gr(o);t[r]=n;let c,u=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||Ln(t,c)>0)&&(u=!0)}else c=n;if(s)if(0!==l){const e=jr(t[a+1]);t[r+1]=Hr(e,a),0!==e&&(t[e+1]=Wr(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Hr(a,0),0!==a&&(t[a+1]=Wr(t[a+1],r)),a=r;else t[r+1]=Hr(l,0),0===a?a=r:t[l+1]=Wr(t[l+1],r),l=r;u&&(t[r+1]=zr(t[r+1])),oi(t,c,r,!0),oi(t,c,r,!1),function(t,e,n,r,s){const i=t.residualStyles;null!=i&&"string"==typeof e&&Ln(i,e)>=0&&(n[r+1]=Xr(n[r+1]))}(e,c,t,r),o=Hr(a,l),e.styleBindings=o}(s,i,e,n,o)}}(i,t,o,false),e!==Vr&&qs(s,o,e)&&function(t,e,n,r,s,i,o,a){if(!(3&e.type))return;const l=t.data,c=l[a+1];di(1==(1&c)?hi(l,e,n,s,Gr(c),o):void 0)||(di(i)||function(t){return 2==(2&t)}(c)&&(i=hi(l,null,n,s,a,o)),function(t,e,n,r,s){const i=le(t);{let e=-1===r.indexOf("-")?void 0:sr.DashCase;if(null==s)i?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const o="string"==typeof s&&s.endsWith("!important");o&&(s=s.slice(0,-10),e|=sr.Important),i?t.setStyle(n,r,s,e):n.style.setProperty(r,s,o?"important":"")}}}(r,0,function(t,e){return ue(e[t])}(je(),n),s,i))}(i,i.data[je()],s,s[11],t,s[o+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=J(function(t){return t instanceof class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?t.changingThisBreaksApplicationSecurity:t}(t)))),t}(e,n),false,o)}(t,e,n),li}function ci(t,e,n,r,s){let i=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(i=e[a],r=ui(r,i.hostAttrs,s),i!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function ui(t,e,n){const r=n?1:2;let s=-1;if(null!==e)for(let i=0;i<e.length;i++){const o=e[i];"number"==typeof o?s=o:s===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),xn(t,o,!!n||e[++i]))}return void 0===t?null:t}function hi(t,e,n,r,s,i){const o=null===e;let a;for(;s>0;){const e=t[s],i=Array.isArray(e),l=i?e[1]:e,c=null===l;let u=n[s+1];u===Vr&&(u=c?Nt:void 0);let h=c?kn(u,r):l===r?u:void 0;if(i&&!di(h)&&(h=kn(e,r)),di(h)&&(a=h,o))return a;const d=t[s+1];s=o?jr(d):Gr(d)}if(null!==e){let t=i?e.residualClasses:e.residualStyles;null!=t&&(a=kn(t,r))}return a}function di(t){return void 0!==t}function fi(t,e=""){const n=Ae(),r=Se(),s=t+Yt,i=r.firstCreatePass?qr(r,s,1,e,null):r.data[s],o=n[s]=function(t,e){return le(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Er(r,n,o,i),be(i,!1)}const gi=void 0;var pi=["en",[["a","p"],["AM","PM"],gi],[["AM","PM"],gi,gi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],gi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],gi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",gi,"{1} 'at' {0}",gi],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let mi={};function wi(t){return t in mi||(mi[t]=Tt.ng&&Tt.ng.common&&Tt.ng.common.locales&&Tt.ng.common.locales[t]),mi[t]}var _i=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const yi="en-US";let Ei=yi;function Ci(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Ei=t.toLowerCase().replace(/_/g,"-"))}class Ai{}class Si{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${J(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Ii=(()=>{class t{}return t.NULL=new Si,t})();function vi(...t){}function bi(t,e){return new Ri(he(t,e))}const Ti=function(){return bi(Ie(),Ae())};let Ri=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Ti,t})();function Ni(t){return t instanceof Ri?t.nativeElement:t}class Oi{}let Di=(()=>{class t{}return t.\u0275prov=at({token:t,providedIn:"root",factory:()=>null}),t})();class Pi{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Mi=new Pi("11.2.10");class Bi{constructor(){}supports(t){return Zs(t)}create(t){return new ki(t)}}const xi=(t,e)=>e;class ki{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||xi}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,s=null;for(;e||n;){const i=!n||e&&e.currentIndex<Vi(n,r,s)?e:n,o=Vi(i,r,s),a=i.currentIndex;if(i===n)r--,n=n._nextRemoved;else if(e=e._next,null==i.previousIndex)r++;else{s||(s=[]);const t=o-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<s.length?s[n]:s[n]=0,i=r+n;e<=i&&i<t&&(s[n]=r+1)}s[i.previousIndex]=e-t}}o!==a&&t(i,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Zs(t))throw new Error(`Error trying to diff '${J(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,s=this._itHead,i=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==s&&Object.is(s.trackById,r)?(i&&(s=this._verifyReinsertion(s,n,r,e)),Object.is(s.item,n)||this._addIdentityChange(s,n)):(s=this._mismatch(s,n,r,e),i=!0),s=s._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Xs()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==s&&Object.is(s.trackById,r)?(i&&(s=this._verifyReinsertion(s,t,r,e)),Object.is(s.item,t)||this._addIdentityChange(s,t)):(s=this._mismatch(s,t,r,e),i=!0),s=s._next,e++}),this.length=e;return this._truncate(s),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new Li(e,n),s,r),t}_verifyReinsertion(t,e,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,s=t._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ui),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ui),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Li{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Fi{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Ui{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Fi,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Vi(t,e,n){const r=t.previousIndex;if(null===r)return r;let s=0;return n&&r<n.length&&(s=n[r]),r+e+s}class Hi{constructor(){}supports(t){return t instanceof Map||Ys(t)}create(){return new ji}}class ji{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Ys(t)))throw new Error(`Error trying to diff '${J(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,s=n._next;return r&&(r._next=s),s&&(s._prev=r),n._next=null,n._prev=null,n}const n=new zi(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class zi{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Gi(){return new Wi([new Bi])}let Wi=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Gi()),deps:[[t,new $n,new qn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=at({token:t,providedIn:"root",factory:Gi}),t})();function Xi(){return new Zi([new Hi])}let Zi=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Xi()),deps:[[t,new $n,new qn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=at({token:t,providedIn:"root",factory:Xi}),t})();function Yi(t,e,n,r,s=!1){for(;null!==n;){const i=e[n.index];if(null!==i&&r.push(ue(i)),Kt(i))for(let t=qt;t<i.length;t++){const e=i[t],n=e[1].firstChild;null!==n&&Yi(e[1],e,n,r)}const o=n.type;if(8&o)Yi(t,e,n.child,r);else if(32&o){const t=ir(n,e);let s;for(;s=t();)r.push(s)}else if(16&o){const t=Ar(e,n);if(Array.isArray(t))r.push(...t);else{const n=or(e[16]);Yi(n[1],n,t,r,!0)}}n=s?n.projectionNext:n.next}return r}class qi{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Yi(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Kt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(fr(t,n),Bn(e,n))}this._attachedToViewContainer=!1}gr(this._lView[1],this._lView)}onDestroy(t){rs(this._lView[1],this._lView,null,t)}markForCheck(){_s(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ys(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Ne(!0);try{ys(t,e,n)}finally{Ne(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,vr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class $i extends qi{constructor(t){super(t),this._view=t}detectChanges(){Es(this._view)}checkNoChanges(){!function(t){Ne(!0);try{Es(t)}finally{Ne(!1)}}(this._view)}get context(){return null}}const Ki=function(t=!1){return function(t,e,n){if(!n&&Jt(t)){const n=fe(t.index,e);return new qi(n,n)}return 47&t.type?new qi(e[16],e):null}(Ie(),Ae(),t)};let Qi=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ki,t.__ChangeDetectorRef__=!0,t})();const Ji=[new Hi],to=new Wi([new Bi]),eo=new Zi(Ji),no=function(){return oo(Ie(),Ae())};let ro=(()=>{class t{}return t.__NG_ELEMENT_ID__=no,t})();const so=ro,io=class extends so{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Yr(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Kr(e,n,t),new qi(n)}};function oo(t,e){return 4&t.type?new io(e,t,bi(t,e)):null}class ao{}class lo{}const co=function(){return mo(Ie(),Ae())};let uo=(()=>{class t{}return t.__NG_ELEMENT_ID__=co,t})();const ho=uo,fo=class extends ho{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return bi(this._hostTNode,this._hostLView)}get injector(){return new vn(this._hostTNode,this._hostLView)}get parentInjector(){const t=fn(this._hostTNode,this._hostLView);if(rn(t)){const e=on(t,this._hostLView),n=sn(t);return new vn(e[1].data[n+8],e)}return new vn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=go(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-qt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,s){const i=n||this.parentInjector;if(!s&&null==t.ngModule&&i){const t=i.get(ao,null);t&&(s=t)}const o=t.create(i,r,void 0,s);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,r=n[1];if(Kt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new fo(e,e[6],e[3]);r.detach(r.indexOf(t))}}const s=this._adjustIndex(e),i=this._lContainer;!function(t,e,n,r){const s=qt+r,i=n.length;r>0&&(n[s-1][4]=e),r<i-qt?(e[4]=n[s],Mn(n,qt+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,i,s);const o=Sr(s,i),a=n[11],l=yr(a,i[7]);return null!==l&&function(t,e,n,r,s,i){r[0]=s,r[6]=e,vr(t,r,n,1,s,i)}(r,i[6],a,n,l,o),t.attachToViewContainerRef(),Mn(po(i),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=go(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=fr(this._lContainer,e);n&&(Bn(po(this._lContainer),e),gr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=fr(this._lContainer,e);return n&&null!=Bn(po(this._lContainer),e)?new qi(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function go(t){return t[8]}function po(t){return t[8]||(t[8]=[])}function mo(t,e){let n;const r=e[t.index];if(Kt(r))n=r;else{let s;if(8&t.type)s=ue(r);else{const n=e[11];s=n.createComment("");const r=he(t,e);mr(n,yr(n,r),s,function(t,e){return le(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=new Array(r,!0,!1,e,null,0,t,s,null,null),ws(e,n)}return new fo(n,t,e)}const wo={};class _o extends Ii{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Xt(t);return new Co(e,this.ngModule)}}function yo(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Eo=new Rn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>nr});class Co extends Ai{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Ur).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return yo(this.componentDef.inputs)}get outputs(){return yo(this.componentDef.outputs)}create(t,e,n,r){const s=(r=r||this.ngModule)?function(t,e){return{get:(n,r,s)=>{const i=t.get(n,wo,s);return i!==wo||r===wo?i:e.get(n,r,s)}}}(t,r.injector):t,i=s.get(Oi,ce),o=s.get(Di,null),a=i.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(le(t))return t.selectRootElement(e,n===At.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):hr(i.createRenderer(null,this.componentDef),l,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(l)),u=this.componentDef.onPush?576:528,h={components:[],scheduler:nr,clean:As,playerHandler:null,flags:0},d=ns(0,null,null,1,0,null,null,null,null,null),f=Yr(null,d,h,u,null,null,i,a,o,s);let g,p;ke(f);try{const t=function(t,e,n,r,s,i){const o=n[1];n[20]=t;const a=qr(o,20,2,"#host",null),l=a.mergedAttrs=e.hostAttrs;null!==l&&(Ts(a,l,!0),null!==t&&(Qe(s,t,l),null!==a.classes&&Rr(s,t,a.classes),null!==a.styles&&Tr(s,t,a.styles)));const c=r.createRenderer(t,e),u=Yr(n,es(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return o.firstCreatePass&&(gn(un(a,n),o,e.type),as(o,a),cs(a,n.length,1)),ws(n,u),n[20]=u}(c,this.componentDef,f,i,a);if(c)if(n)Qe(a,c,["ng-version",Mi.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,s=2;for(;r<t.length;){let i=t[r];if("string"==typeof i)2===s?""!==i&&e.push(i,t[++r]):8===s&&n.push(i);else{if(!xr(s))break;s=i}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Qe(a,c,t),e&&e.length>0&&Rr(a,c,e.join(" "))}if(p=de(d,Yt),void 0!==e){const t=p.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}g=function(t,e,n,r,s){const i=n[1],o=function(t,e,n){const r=Ie();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),us(t,r,e,$r(t,e,1,null),n));const s=An(e,t,r.directiveStart,r);er(s,e);const i=he(r,e);return i&&er(i,e),s}(i,n,e);if(r.components.push(o),t[8]=o,s&&s.forEach(t=>t(o,e)),e.contentQueries){const t=Ie();e.contentQueries(1,o,t.directiveStart)}const a=Ie();return!i.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ze(a.index),is(n[1],a,0,a.directiveStart,a.directiveEnd,e),os(e,o)),o}(t,this.componentDef,f,h,[Gs]),Kr(d,f,null)}finally{He()}return new Ao(this.componentType,g,bi(p,f),f,p)}}class Ao extends class{}{constructor(t,e,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=e,this.hostView=this.changeDetectorRef=new $i(r),this.componentType=t}get injector(){return new vn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const So=new Map;class Io extends ao{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new _o(this);const n=Zt(t),r=t[xt]||null;r&&Ci(r),this._bootstrapComponents=rr(n.bootstrap),this._r3Injector=ks(t,e,[{provide:ao,useValue:this},{provide:Ii,useValue:this.componentFactoryResolver}],J(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=zs.THROW_IF_NOT_FOUND,n=mt.Default){return t===zs||t===ao||t===Rs?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class vo extends lo{constructor(t){super(),this.moduleType=t,null!==Zt(t)&&function(t){const e=new Set;!function t(n){const r=Zt(n,!0),s=r.id;null!==s&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${J(e)} vs ${J(e.name)}`)}(s,So.get(s),n),So.set(s,n));const i=rr(r.imports);for(const o of i)e.has(o)||(e.add(o),t(o))}(t)}(t)}create(t){return new Io(this.moduleType,t)}}function bo(t){return e=>{setTimeout(t,void 0,e)}}const To=class extends S{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,s,i;let o=t,a=e||(()=>null),l=n;if(t&&"object"==typeof t){const e=t;o=null===(r=e.next)||void 0===r?void 0:r.bind(e),a=null===(s=e.error)||void 0===s?void 0:s.bind(e),l=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}this.__isAsync&&(a=bo(a),o&&(o=bo(o)),l&&(l=bo(l)));const c=super.subscribe({next:o,error:a,complete:l});return t instanceof h&&t.add(c),c}};function Ro(){return this._results[Xs()]()}class No{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Xs(),n=No.prototype;n[e]||(n[e]=Ro)}get changes(){return this._changes||(this._changes=new To)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=Dn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let s=t[r],i=e[r];if(n&&(s=n(s),i=n(i)),i!==s)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Oo{constructor(t){this.queryList=t,this.matches=null}clone(){return new Oo(this.queryList)}setDirty(){this.queryList.setDirty()}}class Do{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Do(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Vo(t,e).matches&&this.queries[e].setDirty()}}class Po{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Mo{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,s=this.getByIndex(n).embeddedTView(t,r);s&&(s.indexInDeclarationView=n,null!==e?e.push(s):e=[s])}return null!==e?new Mo(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Bo{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Bo(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(t,e,xo(e,s)),this.matchTNodeWithReadOption(t,e,Cn(e,t,s,!1,!1))}else n===ro?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Cn(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Ri||r===uo||r===ro&&4&e.type)this.addMatch(e.index,-2);else{const n=Cn(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function xo(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function ko(t,e,n,r){return-1===n?function(t,e){return 11&t.type?bi(t,e):4&t.type?oo(t,e):null}(e,t):-2===n?function(t,e,n){return n===Ri?bi(e,t):n===ro?oo(e,t):n===uo?mo(e,t):void 0}(t,e,r):An(t,t[1],n,e)}function Lo(t,e,n,r){const s=e[19].queries[r];if(null===s.matches){const r=t.data,i=n.matches,o=[];for(let t=0;t<i.length;t+=2){const s=i[t];o.push(s<0?null:ko(e,r[s],i[t+1],n.metadata.read))}s.matches=o}return s.matches}function Fo(t,e,n,r){const s=t.queries.getByIndex(n),i=s.matches;if(null!==i){const o=Lo(t,e,s,n);for(let t=0;t<i.length;t+=2){const n=i[t];if(n>0)r.push(o[t/2]);else{const s=i[t+1],o=e[-n];for(let t=qt;t<o.length;t++){const e=o[t];e[17]===e[3]&&Fo(e[1],e,s,r)}if(null!==o[9]){const t=o[9];for(let e=0;e<t.length;e++){const n=t[e];Fo(n[1],n,s,r)}}}}}return r}function Uo(t){const e=Ae(),n=Se(),r=Pe();Me(r+1);const s=Vo(n,r);if(t.dirty&&pe(e)===(2==(2&s.metadata.flags))){if(null===s.matches)t.reset([]);else{const i=s.crossesNgTemplate?Fo(n,e,r,[]):Lo(n,e,s,r);t.reset(i,Ni),t.notifyOnChanges()}return!0}return!1}function Vo(t,e){return t.queries.getByIndex(e)}const Ho=new Rn("Application Initializer");let jo=(()=>{class t{constructor(t){this.appInits=t,this.resolve=vi,this.reject=vi,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();ni(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Wn(Ho,8))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const zo=new Rn("AppId"),Go={provide:zo,useFactory:function(){return`${Wo()}${Wo()}${Wo()}`},deps:[]};function Wo(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Xo=new Rn("Platform Initializer"),Zo=new Rn("Platform ID"),Yo=new Rn("appBootstrapListener");let qo=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const $o=new Rn("LocaleId"),Ko=new Rn("DefaultCurrencyCode");class Qo{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Jo=function(t){return new vo(t)},ta=Jo,ea=function(t){return Promise.resolve(Jo(t))},na=function(t){const e=Jo(t),n=rr(Zt(t).declarations).reduce((t,e)=>{const n=Xt(e);return n&&t.push(new Co(n)),t},[]);return new Qo(e,n)},ra=na,sa=function(t){return Promise.resolve(na(t))};let ia=(()=>{class t{constructor(){this.compileModuleSync=ta,this.compileModuleAsync=ea,this.compileModuleAndAllComponentsSync=ra,this.compileModuleAndAllComponentsAsync=sa}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const oa=(()=>Promise.resolve(0))();function aa(t){"undefined"==typeof Zone?oa.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class la{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new To(!1),this.onMicrotaskEmpty=new To(!1),this.onStable=new To(!1),this.onError=new To(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=Tt.requestAnimationFrame,e=Tt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Tt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ha(t),ua(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ha(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,s,i,o,a)=>{try{return da(t),n.invokeTask(s,i,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||t.shouldCoalesceRunChangeDetection)&&e(),fa(t)}},onInvoke:(n,r,s,i,o,a,l)=>{try{return da(t),n.invoke(s,i,o,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),fa(t)}},onHasTask:(e,n,r,s)=>{e.hasTask(r,s),n===r&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,ha(t),ua(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,n,r,s)=>(e.handleError(r,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!la.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(la.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const s=this._inner,i=s.scheduleEventTask("NgZoneEvent: "+r,t,ca,vi,vi);try{return s.runTask(i,e,n)}finally{s.cancelTask(i)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const ca={};function ua(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ha(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function da(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function fa(t){t._nesting--,ua(t)}class ga{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new To,this.onMicrotaskEmpty=new To,this.onStable=new To,this.onError=new To}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let pa=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{la.assertNotInAngularZone(),aa(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())aa(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Wn(la))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),ma=(()=>{class t{constructor(){this._applications=new Map,ya.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return ya.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();class wa{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let _a,ya=new wa,Ea=!0,Ca=!1;const Aa=new Rn("AllowMultipleToken");class Sa{constructor(t,e){this.name=t,this.token=e}}function Ia(t,e,n=[]){const r=`Platform: ${e}`,s=new Rn(r);return(e=[])=>{let i=va();if(!i||i.injector.get(Aa,!1))if(t)t(n.concat(e).concat({provide:s,useValue:!0}));else{const t=n.concat(e).concat({provide:s,useValue:!0},{provide:Os,useValue:"platform"});!function(t){if(_a&&!_a.destroyed&&!_a.injector.get(Aa,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");_a=t.get(ba);const e=t.get(Xo,null);e&&e.forEach(t=>t())}(zs.create({providers:t,name:r}))}return function(t){const e=va();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(s)}}function va(){return _a&&!_a.destroyed?_a:null}let ba=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new ga:("zone.js"===t?void 0:t)||new la({enableLongStackTrace:(Ca=!0,Ea),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:la,useValue:n}];return n.run(()=>{const e=zs.create({providers:r,parent:this.injector,name:t.moduleType.name}),s=t.create(e),i=s.injector.get(tr,null);if(!i)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{i.handleError(t)}});s.onDestroy(()=>{Na(this._modules,s),t.unsubscribe()})}),function(t,e,n){try{const r=n();return ni(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(i,n,()=>{const t=s.injector.get(jo);return t.runInitializers(),t.donePromise.then(()=>(Ci(s.injector.get($o,yi)||yi),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,e=[]){const n=Ta({},e);return function(t,e,n){const r=new vo(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Ra);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${J(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Wn(zs))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();function Ta(t,e){return Array.isArray(e)?e.reduce(Ta,t):Object.assign(Object.assign({},t),e)}let Ra=(()=>{class t{constructor(t,e,n,r,s){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const i=new _(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),o=new _(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{la.assertNotInAngularZone(),aa(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{la.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=function(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return v(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof _?t[0]:z(e)(G(t,n))}(i,o.pipe(t=>{return W()((e=K,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,q);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Ai?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ao),s=n.create(zs.NULL,[],e||n.selector,r),i=s.location.nativeElement,o=s.injector.get(pa,null),a=o&&s.injector.get(ma);return o&&a&&a.registerApplication(i,o),s.onDestroy(()=>{this.detachView(s.hostView),Na(this.components,s),a&&a.unregisterApplication(i)}),this._loadComponent(s),s}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Na(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Yo,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Wn(la),Wn(zs),Wn(tr),Wn(Ii),Wn(jo))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();function Na(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Oa{}class Da{}const Pa={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Ma=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Pa}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Ba(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),s="NgFactory";return void 0===r&&(r="default",s=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+s]).then(t=>Ba(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Wn(ia),Wn(Da,8))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();function Ba(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const xa=Ia(null,"core",[{provide:Zo,useValue:"unknown"},{provide:ba,deps:[zs]},{provide:ma,deps:[]},{provide:qo,deps:[]}]),ka=[{provide:Ra,useClass:Ra,deps:[la,zs,tr,Ii,jo]},{provide:Eo,deps:[la],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:jo,useClass:jo,deps:[[new qn,Ho]]},{provide:ia,useClass:ia,deps:[]},Go,{provide:Wi,useFactory:function(){return to},deps:[]},{provide:Zi,useFactory:function(){return eo},deps:[]},{provide:$o,useFactory:function(t){return Ci(t=t||"undefined"!=typeof $localize&&$localize.locale||yi),t},deps:[[new Yn($o),new qn,new $n]]},{provide:Ko,useValue:"USD"}];let La=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(Wn(Ra))},t.\u0275mod=zt({type:t}),t.\u0275inj=lt({providers:ka}),t})(),Fa=null;function Ua(){return Fa}const Va=new Rn("DocumentToken");let Ha=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({factory:ja,token:t,providedIn:"platform"}),t})();function ja(){return Wn(Ga)}const za=new Rn("Location Initialized");let Ga=(()=>{class t extends Ha{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=Ua().getLocation(),this._history=Ua().getHistory()}getBaseHrefFromDOM(){return Ua().getBaseHref(this._doc)}onPopState(t){Ua().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){Ua().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){Wa()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){Wa()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Wn(Va))},t.\u0275prov=at({factory:Xa,token:t,providedIn:"platform"}),t})();function Wa(){return!!window.history.pushState}function Xa(){return new Ga(Wn(Va))}function Za(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function Ya(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function qa(t){return t&&"?"!==t[0]?"?"+t:t}let $a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({factory:Ka,token:t,providedIn:"root"}),t})();function Ka(t){const e=Wn(Va).location;return new Ja(Wn(Ha),e&&e.origin||"")}const Qa=new Rn("appBaseHref");let Ja=(()=>{class t extends $a{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Za(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+qa(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const s=this.prepareExternalUrl(n+qa(r));this._platformLocation.pushState(t,e,s)}replaceState(t,e,n,r){const s=this.prepareExternalUrl(n+qa(r));this._platformLocation.replaceState(t,e,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Wn(Ha),Wn(Qa,8))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),tl=(()=>{class t extends $a{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=Za(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let s=this.prepareExternalUrl(n+qa(r));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,e,s)}replaceState(t,e,n,r){let s=this.prepareExternalUrl(n+qa(r));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Wn(Ha),Wn(Qa,8))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),el=(()=>{class t{constructor(t,e){this._subject=new To,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=Ya(rl(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+qa(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,rl(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qa(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qa(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(Wn($a),Wn(Ha))},t.normalizeQueryParams=qa,t.joinWithSlash=Za,t.stripTrailingSlash=Ya,t.\u0275prov=at({factory:nl,token:t,providedIn:"root"}),t})();function nl(){return new el(Wn($a),Wn(Ha))}function rl(t){return t.replace(/\/index.html$/,"")}var sl=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});class il{}let ol=(()=>{class t extends il{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=wi(e);if(n)return n;const r=e.split("-")[0];if(n=wi(r),n)return n;if("en"===r)return pi;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[_i.PluralCase]}(e||this.locale)(t)){case sl.Zero:return"zero";case sl.One:return"one";case sl.Two:return"two";case sl.Few:return"few";case sl.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Wn($o))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),al=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=lt({providers:[{provide:il,useClass:ol}]}),t})(),ll=(()=>{class t{}return t.\u0275prov=at({token:t,providedIn:"root",factory:()=>new cl(Wn(Va),window)}),t})();class cl{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=ul(this.window.history)||ul(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function ul(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class hl extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new hl,Fa||(Fa=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=fl||(fl=document.querySelector("base"),fl)?fl.getAttribute("href"):null;return null==e?null:(n=e,dl||(dl=document.createElement("a")),dl.setAttribute("href",n),"/"===dl.pathname.charAt(0)?dl.pathname:"/"+dl.pathname);var n}resetBaseElement(){fl=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,s]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,t)}}let dl,fl=null;const gl=new Rn("TRANSITION_ID"),pl=[{provide:Ho,useFactory:function(t,e,n){return()=>{n.get(jo).donePromise.then(()=>{const n=Ua();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[gl,Va,zs],multi:!0}];class ml{static init(){var t;t=new ml,ya=t}addToWindow(t){Tt.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},Tt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Tt.getAllAngularRootElements=()=>t.getAllRootElements(),Tt.frameworkStabilizers||(Tt.frameworkStabilizers=[]),Tt.frameworkStabilizers.push(t=>{const e=Tt.getAllAngularTestabilities();let n=e.length,r=!1;const s=function(e){r=r||e,n--,0==n&&t(r)};e.forEach(function(t){t.whenStable(s)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?Ua().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const wl=new Rn("EventManagerPlugins");let _l=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(Wn(wl),Wn(la))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();class yl{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Ua().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let El=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),Cl=(()=>{class t extends El{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>Ua().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(Wn(Va))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const Al={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Sl=/%COMP%/g;function Il(t,e,n){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?Il(t,s,n):(s=s.replace(Sl,t),n.push(s))}return n}function vl(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let bl=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Tl(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case At.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Rl(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case At.ShadowDom:return new Nl(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Il(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Wn(_l),Wn(Cl),Wn(zo))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();class Tl{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Al[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const s=Al[r];s?t.setAttributeNS(s,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Al[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(sr.DashCase|sr.Important)?t.style.setProperty(e,n,r&sr.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&sr.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,vl(n)):this.eventManager.addEventListener(t,e,vl(n))}}class Rl extends Tl{constructor(t,e,n,r){super(t),this.component=n;const s=Il(r+"-"+n.id,n.styles,[]);e.addStyles(s),this.contentAttr="_ngcontent-%COMP%".replace(Sl,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Sl,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Nl extends Tl{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Il(r.id,r.styles,[]);for(let i=0;i<s.length;i++){const t=document.createElement("style");t.textContent=s[i],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Ol=(()=>{class t extends yl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(Wn(Va))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const Dl=["alt","control","meta","shift"],Pl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ml={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Bl={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let xl=(()=>{class t extends yl{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const s=t.parseEventName(n),i=t.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ua().onAndCancel(e,s.domEventName,i))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=t._normalizeKey(n.pop());let i="";if(Dl.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),i+=t+".")}),i+=s,0!=n.length||0===s.length)return null;const o={};return o.domEventName=r,o.fullKey=i,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Ml.hasOwnProperty(e)&&(e=Ml[e]))}return Pl[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Dl.forEach(r=>{r!=n&&(0,Bl[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return s=>{t.getEventFullKey(s)===e&&r.runGuarded(()=>n(s))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(Wn(Va))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const kl=Ia(xa,"browser",[{provide:Zo,useValue:"browser"},{provide:Xo,useValue:function(){hl.makeCurrent(),ml.init()},multi:!0},{provide:Va,useFactory:function(){return function(t){ae=t}(document),document},deps:[]}]),Ll=[[],{provide:Os,useValue:"root"},{provide:tr,useFactory:function(){return new tr},deps:[]},{provide:wl,useClass:Ol,multi:!0,deps:[Va,la,Zo]},{provide:wl,useClass:xl,multi:!0,deps:[Va]},[],{provide:bl,useClass:bl,deps:[_l,Cl,zo]},{provide:Oi,useExisting:bl},{provide:El,useExisting:Cl},{provide:Cl,useClass:Cl,deps:[Va]},{provide:pa,useClass:pa,deps:[la]},{provide:_l,useClass:_l,deps:[wl,la]},[]];let Fl=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:zo,useValue:e.appId},{provide:gl,useExisting:zo},pl]}}}return t.\u0275fac=function(e){return new(e||t)(Wn(t,12))},t.\u0275mod=zt({type:t}),t.\u0275inj=lt({providers:Ll,imports:[al,La]}),t})();function Ul(...t){let e=t[t.length-1];return v(e)?(t.pop(),x(t,e)):G(t)}"undefined"!=typeof window&&window;class Vl extends S{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new E;return this._value}next(t){super.next(this._value=t)}}class Hl extends g{notifyNext(t,e,n,r,s){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class jl extends g{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function zl(t,e,n,r,s=new jl(t,n,r)){if(!s.closed)return e instanceof _?e.subscribe(s):B(e)(s)}const Gl={};class Wl{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Xl(t,this.resultSelector))}}class Xl extends Hl{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Gl),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(zl(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,s=this.toRespond?r[n]===Gl?--this.toRespond:this.toRespond:0;r[n]=e,0===s&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Zl=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function Yl(...t){return z(1)(Ul(...t))}const ql=new _(t=>t.complete());function $l(t){return t?function(t){return new _(e=>t.schedule(()=>e.complete()))}(t):ql}function Kl(t){return new _(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?k(n):$l()).subscribe(e)})}function Ql(t,e){return"function"==typeof e?n=>n.pipe(Ql((n,r)=>k(t(n,r)).pipe(b((t,s)=>e(n,t,r,s))))):e=>e.lift(new Jl(t))}class Jl{constructor(t){this.project=t}call(t,e){return e.subscribe(new tc(t,this.project))}}class tc extends F{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new L(this),r=this.destination;r.add(n),this.innerSubscription=U(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const ec=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function nc(t){return e=>0===t?$l():e.lift(new rc(t))}class rc{constructor(t){if(this.total=t,this.total<0)throw new ec}call(t,e){return e.subscribe(new sc(t,this.total))}}class sc extends g{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function ic(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new oc(t,e,n))}}class oc{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new ac(t,this.accumulator,this.seed,this.hasSeed))}}class ac extends g{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function lc(t,e){return function(n){return n.lift(new cc(t,e))}}class cc{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new uc(t,this.predicate,this.thisArg))}}class uc extends g{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function hc(t){return function(e){const n=new dc(t),r=e.lift(n);return n.caught=r}}class dc{constructor(t){this.selector=t}call(t,e){return e.subscribe(new fc(t,this.selector,this.caught))}}class fc extends F{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new L(this);this.add(r);const s=U(n,r);s!==r&&this.add(s)}}}function gc(t,e){return V(t,e,1)}function pc(t){return function(e){return 0===t?$l():e.lift(new mc(t))}}class mc{constructor(t){if(this.total=t,this.total<0)throw new ec}call(t,e){return e.subscribe(new wc(t,this.total))}}class wc extends g{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let s=0;s<n;s++){const s=e++%n;t.next(r[s])}}t.complete()}}function _c(t=Cc){return e=>e.lift(new yc(t))}class yc{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Ec(t,this.errorFactory))}}class Ec extends g{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Cc(){return new Zl}function Ac(t=null){return e=>e.lift(new Sc(t))}class Sc{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Ic(t,this.defaultValue))}}class Ic extends g{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function vc(t,e){const n=arguments.length>=2;return r=>r.pipe(t?lc((e,n)=>t(e,n,r)):w,nc(1),n?Ac(e):_c(()=>new Zl))}function bc(){}function Tc(t,e,n){return function(r){return r.lift(new Rc(t,e,n))}}class Rc{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new Nc(t,this.nextOrObserver,this.error,this.complete))}}class Nc extends g{constructor(t,e,n,s){super(t),this._tapNext=bc,this._tapError=bc,this._tapComplete=bc,this._tapError=n||bc,this._tapComplete=s||bc,r(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||bc,this._tapError=e.error||bc,this._tapComplete=e.complete||bc)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class Oc{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Dc(t,this.callback))}}class Dc extends g{constructor(t,e){super(t),this.add(new h(e))}}class Pc{constructor(t,e){this.id=t,this.url=e}}class Mc extends Pc{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Bc extends Pc{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xc extends Pc{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class kc extends Pc{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Lc extends Pc{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fc extends Pc{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Uc extends Pc{constructor(t,e,n,r,s){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Vc extends Pc{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hc extends Pc{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jc{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class zc{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Gc{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wc{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xc{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zc{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yc{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const qc="primary";class $c{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Kc(t){return new $c(t)}function Qc(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Jc(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const s={};for(let i=0;i<r.length;i++){const e=r[i],n=t[i];if(e.startsWith(":"))s[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:s}}function tu(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let s;for(let i=0;i<n.length;i++)if(s=n[i],!eu(t[s],e[s]))return!1;return!0}function eu(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function nu(t){return Array.prototype.concat.apply([],t)}function ru(t){return t.length>0?t[t.length-1]:null}function su(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function iu(t){return(e=t)&&"function"==typeof e.subscribe?t:ni(t)?k(Promise.resolve(t)):Ul(t);var e}function ou(t,e,n){return n?function(t,e){return tu(t,e)}(t.queryParams,e.queryParams)&&au(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>eu(t[n],e[n]))}(t.queryParams,e.queryParams)&&lu(t.root,e.root)}function au(t,e){if(!fu(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!au(t.children[n],e.children[n]))return!1}return!0}function lu(t,e){return cu(t,e,e.segments)}function cu(t,e,n){if(t.segments.length>n.length)return!!fu(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!fu(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!lu(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!fu(t.segments,r)&&!!t.children.primary&&cu(t.children.primary,e,s)}}class uu{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Kc(this.queryParams)),this._queryParamMap}toString(){return mu.serialize(this)}}class hu{constructor(t,e){this.segments=t,this.children=e,this.parent=null,su(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return wu(this)}}class du{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Kc(this.parameters)),this._parameterMap}toString(){return Iu(this)}}function fu(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class gu{}class pu{parse(t){const e=new Nu(t);return new uu(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${_u(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Eu(e)}=${Eu(t)}`).join("&"):`${Eu(e)}=${Eu(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const mu=new pu;function wu(t){return t.segments.map(t=>Iu(t)).join("/")}function _u(t,e){if(!t.hasChildren())return wu(t);if(e){const e=t.children.primary?_u(t.children.primary,!1):"",n=[];return su(t.children,(t,e)=>{e!==qc&&n.push(`${e}:${_u(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return su(t.children,(t,r)=>{r===qc&&(n=n.concat(e(t,r)))}),su(t.children,(t,r)=>{r!==qc&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===qc?[_u(t.children.primary,!1)]:[`${n}:${_u(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${wu(t)}/${e[0]}`:`${wu(t)}/(${e.join("//")})`}}function yu(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Eu(t){return yu(t).replace(/%3B/gi,";")}function Cu(t){return yu(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Au(t){return decodeURIComponent(t)}function Su(t){return Au(t.replace(/\+/g,"%20"))}function Iu(t){return`${Cu(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Cu(t)}=${Cu(e[t])}`).join("")}`;var e}const vu=/^[^\/()?;=#]+/;function bu(t){const e=t.match(vu);return e?e[0]:""}const Tu=/^[^=?&#]+/,Ru=/^[^?&#]+/;class Nu{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new hu([],{}):new hu([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new hu(t,e)),n}parseSegment(){const t=bu(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new du(Au(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=bu(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=bu(this.remaining);t&&(n=t,this.capture(n))}t[Au(e)]=Au(n)}parseQueryParam(t){const e=function(t){const e=t.match(Tu);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Ru);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Su(e),s=Su(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=bu(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;n.indexOf(":")>-1?(s=n.substr(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=qc);const i=this.parseChildren();e[s]=1===Object.keys(i).length?i.primary:new hu([],i),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Ou{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Du(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Du(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Pu(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Pu(t,this._root).map(t=>t.value)}}function Du(t,e){if(t===e.value)return e;for(const n of e.children){const e=Du(t,n);if(e)return e}return null}function Pu(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Pu(t,n);if(r.length)return r.unshift(e),r}return[]}class Mu{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Bu(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class xu extends Ou{constructor(t,e){super(t),this.snapshot=e,Hu(this,t)}toString(){return this.snapshot.toString()}}function ku(t,e){const n=function(t,e){const n=new Uu([],{},{},"",{},qc,e,null,t.root,-1,{});return new Vu("",new Mu(n,[]))}(t,e),r=new Vl([new du("",{})]),s=new Vl({}),i=new Vl({}),o=new Vl({}),a=new Vl(""),l=new Lu(r,s,o,a,i,qc,e,n.root);return l.snapshot=n.root,new xu(new Mu(l,[]),n)}class Lu{constructor(t,e,n,r,s,i,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=i,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(b(t=>Kc(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(b(t=>Kc(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Fu(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Uu{constructor(t,e,n,r,s,i,o,a,l,c,u){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=i,this.component=o,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Kc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Kc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Vu extends Ou{constructor(t,e){super(e),this.url=t,Hu(this,e)}toString(){return ju(this._root)}}function Hu(t,e){e.value._routerState=t,e.children.forEach(e=>Hu(t,e))}function ju(t){const e=t.children.length>0?` { ${t.children.map(ju).join(", ")} } `:"";return`${t.value}${e}`}function zu(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,tu(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),tu(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!tu(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),tu(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Gu(t,e){var n,r;return tu(t.params,e.params)&&fu(n=t.url,r=e.url)&&n.every((t,e)=>tu(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||Gu(t.parent,e.parent))}function Wu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const s=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Wu(t,e,r);return Wu(t,e)})}(t,e,n);return new Mu(r,s)}{const n=t.retrieve(e.value);if(n){const t=n.route;return Xu(e,t),t}{const n=new Lu(new Vl((r=e.value).url),new Vl(r.params),new Vl(r.queryParams),new Vl(r.fragment),new Vl(r.data),r.outlet,r.component,r),s=e.children.map(e=>Wu(t,e));return new Mu(n,s)}}var r}function Xu(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Xu(t.children[n],e.children[n])}function Zu(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Yu(t){return"object"==typeof t&&null!=t&&t.outlets}function qu(t,e,n,r,s){let i={};return r&&su(r,(t,e)=>{i[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new uu(n.root===t?e:$u(n.root,t,e),i,s)}function $u(t,e,n){const r={};return su(t.children,(t,s)=>{r[s]=t===e?n:$u(t,e,n)}),new hu(t.segments,r)}class Ku{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Zu(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Yu);if(r&&r!==ru(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Qu{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Ju(t,e,n){if(t||(t=new hu([],{})),0===t.segments.length&&t.hasChildren())return th(t,e,n);const r=function(t,e,n){let r=0,s=e;const i={match:!1,pathIndex:0,commandIndex:0};for(;s<t.segments.length;){if(r>=n.length)return i;const e=t.segments[s],o=n[r];if(Yu(o))break;const a=`${o}`,l=r<n.length-1?n[r+1]:null;if(s>0&&void 0===a)break;if(a&&l&&"object"==typeof l&&void 0===l.outlets){if(!sh(a,l,e))return i;r+=2}else{if(!sh(a,{},e))return i;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(t,e,n),s=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new hu(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new hu(t.segments.slice(r.pathIndex),t.children),th(e,0,s)}return r.match&&0===s.length?new hu(t.segments,{}):r.match&&!t.hasChildren()?eh(t,e,n):r.match?th(t,0,s):eh(t,e,n)}function th(t,e,n){if(0===n.length)return new hu(t.segments,{});{const r=function(t){return Yu(t[0])?t[0].outlets:{[qc]:t}}(n),s={};return su(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(s[r]=Ju(t.children[r],e,n))}),su(t.children,(t,e)=>{void 0===r[e]&&(s[e]=t)}),new hu(t.segments,s)}}function eh(t,e,n){const r=t.segments.slice(0,e);let s=0;for(;s<n.length;){const i=n[s];if(Yu(i)){const t=nh(i.outlets);return new hu(r,t)}if(0===s&&Zu(n[0])){r.push(new du(t.segments[e].path,rh(n[0]))),s++;continue}const o=Yu(i)?i.outlets.primary:`${i}`,a=s<n.length-1?n[s+1]:null;o&&a&&Zu(a)?(r.push(new du(o,rh(a))),s+=2):(r.push(new du(o,{})),s++)}return new hu(r,{})}function nh(t){const e={};return su(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=eh(new hu([],{}),0,t))}),e}function rh(t){const e={};return su(t,(t,n)=>e[n]=`${t}`),e}function sh(t,e,n){return t==n.path&&tu(e,n.parameters)}class ih{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),zu(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Bu(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),su(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const s=n.getContext(r.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=Bu(t);for(const i of Object.keys(s))this.deactivateRouteAndItsChildren(s[i],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=Bu(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Zc(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Wc(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(zu(r),r===s)if(r.component){const s=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),oh(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),s=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=s,e.outlet&&e.outlet.activateWith(r,s),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function oh(t){zu(t.value),t.children.forEach(oh)}class ah{constructor(t,e){this.routes=t,this.module=e}}function lh(t){return"function"==typeof t}function ch(t){return t instanceof uu}const uh=Symbol("INITIAL_VALUE");function hh(){return Ql(t=>function(...t){let e,n;return v(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&l(t[0])&&(t=t[0]),G(t,n).lift(new Wl(e))}(t.map(t=>t.pipe(nc(1),function(...t){const e=t[t.length-1];return v(e)?(t.pop(),n=>Yl(t,n,e)):e=>Yl(t,e)}(uh)))).pipe(ic((t,e)=>{let n=!1;return e.reduce((t,r,s)=>{if(t!==uh)return t;if(r===uh&&(n=!0),!n){if(!1===r)return r;if(s===e.length-1||ch(r))return r}return t},t)},uh),lc(t=>t!==uh),b(t=>ch(t)?t:!0===t),nc(1)))}let dh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ut({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&ei(0,"router-outlet")},directives:function(){return[rd]},encapsulation:2}),t})();function fh(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];gh(r,ph(e,r))}}function gh(t,e){t.children&&fh(t.children,e)}function ph(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function mh(t){const e=t.children&&t.children.map(mh),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==qc&&(n.component=dh),n}function wh(t){return t.outlet||qc}function _h(t,e){const n=t.filter(t=>wh(t)===e);return n.push(...t.filter(t=>wh(t)!==e)),n}const yh={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Eh(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},yh):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Jc)(n,t,e);if(!s)return Object.assign({},yh);const i={};su(s.posParams,(t,e)=>{i[e]=t.path});const o=s.consumed.length>0?Object.assign(Object.assign({},i),s.consumed[s.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:s.consumed,lastChild:s.consumed.length,parameters:o,positionalParamSegments:null!==(r=s.posParams)&&void 0!==r?r:{}}}function Ch(t,e,n,r,s="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Ah(t,e,n)&&wh(n)!==qc)}(t,n,r)){const s=new hu(e,function(t,e,n,r){const s={};s.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const i of n)if(""===i.path&&wh(i)!==qc){const n=new hu([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,s[wh(i)]=n}return s}(t,e,r,new hu(n,t.children)));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Ah(t,e,n))}(t,n,r)){const i=new hu(t.segments,function(t,e,n,r,s,i){const o={};for(const a of r)if(Ah(t,n,a)&&!s[wh(a)]){const n=new hu([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===i?t.segments.length:e.length,o[wh(a)]=n}return Object.assign(Object.assign({},s),o)}(t,e,n,r,t.children,s));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:n}}const i=new hu(t.segments,t.children);return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:n}}function Ah(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Sh(t,e,n,r){return!!(wh(t)===r||r!==qc&&Ah(e,n,t))&&("**"===t.path||Eh(e,t,n).matched)}function Ih(t,e,n){return 0===e.length&&!t.children[n]}class vh{constructor(t){this.segmentGroup=t||null}}class bh{constructor(t){this.urlTree=t}}function Th(t){return new _(e=>e.error(new vh(t)))}function Rh(t){return new _(e=>e.error(new bh(t)))}function Nh(t){return new _(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Oh{constructor(t,e,n,r,s){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(ao)}apply(){const t=Ch(this.urlTree.root,[],[],this.config).segmentGroup,e=new hu(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,qc).pipe(b(t=>this.createUrlTree(Dh(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(hc(t=>{if(t instanceof bh)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof vh)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,qc).pipe(b(e=>this.createUrlTree(Dh(e),t.queryParams,t.fragment))).pipe(hc(t=>{if(t instanceof vh)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new hu([],{[qc]:t}):t;return new uu(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(b(t=>new hu([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const s of Object.keys(n.children))"primary"===s?r.unshift(s):r.push(s);return k(r).pipe(gc(r=>{const s=n.children[r],i=_h(e,r);return this.expandSegmentGroup(t,i,s,r).pipe(b(t=>({segment:t,outlet:r})))}),ic((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?lc((e,n)=>t(e,n,r)):w,pc(1),n?Ac(e):_c(()=>new Zl))}())}expandSegment(t,e,n,r,s,i){return k(n).pipe(gc(o=>this.expandSegmentAgainstRoute(t,e,n,o,r,s,i).pipe(hc(t=>{if(t instanceof vh)return Ul(null);throw t}))),vc(t=>!!t),hc((t,n)=>{if(t instanceof Zl||"EmptyError"===t.name){if(Ih(e,r,s))return Ul(new hu([],{}));throw new vh(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,s,i,o){return Sh(r,e,s,i)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,i):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,i):Th(e):Th(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,i){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,i):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,i)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Rh(s):this.lineralizeSegments(n,s).pipe(V(n=>{const s=new hu(n,{});return this.expandSegment(t,s,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,i){const{matched:o,consumedSegments:a,lastChild:l,positionalParamSegments:c}=Eh(e,r,s);if(!o)return Th(e);const u=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Rh(u):this.lineralizeSegments(r,u).pipe(V(r=>this.expandSegment(t,e,n,r.concat(s.slice(l)),i,!1)))}matchSegmentAgainstRoute(t,e,n,r,s){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Ul(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(b(t=>(n._loadedConfig=t,new hu(r,{})))):Ul(new hu(r,{}));const{matched:i,consumedSegments:o,lastChild:a}=Eh(e,n,r);if(!i)return Th(e);const l=r.slice(a);return this.getChildConfig(t,n,r).pipe(V(t=>{const r=t.module,i=t.routes,{segmentGroup:a,slicedSegments:c}=Ch(e,o,l,i),u=new hu(a.segments,a.children);if(0===c.length&&u.hasChildren())return this.expandChildren(r,i,u).pipe(b(t=>new hu(o,t)));if(0===i.length&&0===c.length)return Ul(new hu(o,{}));const h=wh(n)===s;return this.expandSegment(r,u,i,c,h?qc:s,!0).pipe(b(t=>new hu(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Ul(new ah(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Ul(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(V(n=>n?this.configLoader.load(t.injector,e).pipe(b(t=>(e._loadedConfig=t,t))):function(t){return new _(e=>e.error(Qc(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Ul(new ah([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;return r&&0!==r.length?Ul(r.map(r=>{const s=t.get(r);let i;if(function(t){return t&&lh(t.canLoad)}(s))i=s.canLoad(e,n);else{if(!lh(s))throw new Error("Invalid CanLoad guard");i=s(e,n)}return iu(i)})).pipe(hh(),Tc(t=>{if(!ch(t))return;const e=Qc(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),b(t=>!0===t)):Ul(!0)}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Ul(n);if(r.numberOfChildren>1||!r.children.primary)return Nh(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const s=this.createSegmentGroup(t,e.root,n,r);return new uu(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return su(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const s=t.substring(1);n[r]=e[s]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const s=this.createSegments(t,e.segments,n,r);let i={};return su(e.children,(e,s)=>{i[s]=this.createSegmentGroup(t,e,n,r)}),new hu(s,i)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Dh(t){const e={};for(const n of Object.keys(t.children)){const r=Dh(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new hu(t.segments.concat(e.segments),e.children)}return t}(new hu(t.segments,e))}class Ph{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Mh{constructor(t,e){this.component=t,this.route=e}}function Bh(t,e,n){const r=t._root;return kh(r,e?e._root:null,n,[r.value])}function xh(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function kh(t,e,n,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const i=Bu(e);return t.children.forEach(t=>{!function(t,e,n,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const i=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){const l=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!fu(t.url,e.url);case"pathParamsOrQueryParamsChange":return!fu(t.url,e.url)||!tu(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gu(t,e)||!tu(t.queryParams,e.queryParams);case"paramsChange":default:return!Gu(t,e)}}(o,i,i.routeConfig.runGuardsAndResolvers);l?s.canActivateChecks.push(new Ph(r)):(i.data=o.data,i._resolvedData=o._resolvedData),kh(t,e,i.component?a?a.children:null:n,r,s),l&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new Mh(a.outlet.component,o))}else o&&Lh(e,a,s),s.canActivateChecks.push(new Ph(r)),kh(t,null,i.component?a?a.children:null:n,r,s)}(t,i[t.value.outlet],n,r.concat([t.value]),s),delete i[t.value.outlet]}),su(i,(t,e)=>Lh(t,n.getContext(e),s)),s}function Lh(t,e,n){const r=Bu(t),s=t.value;su(r,(t,r)=>{Lh(t,s.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Mh(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}class Fh{}function Uh(t){return new _(e=>e.error(t))}class Vh{constructor(t,e,n,r,s,i){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=i}recognize(){const t=Ch(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,qc);if(null===e)return null;const n=new Uu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},qc,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Mu(n,e),s=new Vu(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(t){const e=t.value,n=Fu(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const s of Object.keys(e.children)){const r=e.children[s],i=_h(t,s),o=this.processSegmentGroup(i,r,s);if(null===o)return null;n.push(...o)}const r=function(t){const e=[];for(const n of t){if(!Hh(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>t.value.outlet===qc?-1:e.value.outlet===qc?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const s of t){const t=this.processSegmentAgainstRoute(s,e,n,r);if(null!==t)return t}return Ih(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Sh(t,e,n,r))return null;let s,i=[],o=[];if("**"===t.path){const r=n.length>0?ru(n).parameters:{};s=new Uu(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Gh(t),wh(t),t.component,t,jh(e),zh(e)+n.length,Wh(t))}else{const r=Eh(e,t,n);if(!r.matched)return null;i=r.consumedSegments,o=n.slice(r.lastChild),s=new Uu(i,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Gh(t),wh(t),t.component,t,jh(e),zh(e)+i.length,Wh(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:l,slicedSegments:c}=Ch(e,i,o,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&l.hasChildren()){const t=this.processChildren(a,l);return null===t?null:[new Mu(s,t)]}if(0===a.length&&0===c.length)return[new Mu(s,[])];const u=wh(t)===r,h=this.processSegment(a,l,c,u?qc:r);return null===h?null:[new Mu(s,h)]}}function Hh(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function jh(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function zh(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Gh(t){return t.data||{}}function Wh(t){return t.resolve||{}}function Xh(t){return Ql(e=>{const n=t(e);return n?k(n).pipe(b(()=>e)):Ul(e)})}class Zh extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Yh=new Rn("ROUTES");class qh{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(b(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new ah(nu(r.injector.get(Yh,void 0,mt.Self|mt.Optional)).map(mh),r)}),hc(t=>{throw e._loader$=void 0,t}));return e._loader$=new Y(n,()=>new S).pipe(W()),e._loader$}loadModuleFactory(t){return"string"==typeof t?k(this.loader.load(t)):iu(t()).pipe(V(t=>t instanceof lo?Ul(t):k(this.compiler.compileModuleAsync(t))))}}class $h{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Kh,this.attachRef=null}}class Kh{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new $h,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Qh{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Jh(t){throw t}function td(t,e,n){return e.parse("/")}function ed(t,e){return Ul(null)}let nd=(()=>{class t{constructor(t,e,n,r,s,i,o,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new S,this.errorHandler=Jh,this.malformedUriErrorHandler=td,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ed,afterPreactivation:ed},this.urlHandlingStrategy=new Qh,this.routeReuseStrategy=new Zh,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=s.get(ao),this.console=s.get(qo);const l=s.get(la);this.isNgZoneEnabled=l instanceof la&&la.isInAngularZone(),this.resetConfig(a),this.currentUrlTree=new uu(new hu([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new qh(i,o,t=>this.triggerEvent(new jc(t)),t=>this.triggerEvent(new zc(t))),this.routerState=ku(this.currentUrlTree,this.rootComponentType),this.transitions=new Vl({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(lc(t=>0!==t.id),b(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Ql(t=>{let n=!1,r=!1;return Ul(t).pipe(Tc(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ql(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Ul(t).pipe(Ql(t=>{const n=this.transitions.getValue();return e.next(new Mc(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?ql:Promise.resolve(t)}),(r=this.ngModule.injector,s=this.configLoader,i=this.urlSerializer,o=this.config,Ql(t=>function(t,e,n,r,s){return new Oh(t,e,n,r,s).apply()}(r,s,i,t.extractedUrl,o).pipe(b(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Tc(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,s){return V(i=>function(t,e,n,r,s="emptyOnly",i="legacy"){try{const o=new Vh(t,e,n,r,s,i).recognize();return null===o?Uh(new Fh):Ul(o)}catch(o){return Uh(o)}}(t,e,i.urlAfterRedirects,n(i.urlAfterRedirects),r,s).pipe(b(t=>Object.assign(Object.assign({},i),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Tc(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new Lc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,s,i,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:s,restoredState:i,extras:o}=t,a=new Mc(n,this.serializeUrl(r),s,i);e.next(a);const l=ku(r,this.rootComponentType).snapshot;return Ul(Object.assign(Object.assign({},t),{targetSnapshot:l,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),ql}),Xh(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:s,extras:{skipLocationChange:i,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:s,skipLocationChange:!!i,replaceUrl:!!o})}),Tc(t=>{const e=new Fc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),b(t=>Object.assign(Object.assign({},t),{guards:Bh(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return V(n=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:i,canDeactivateChecks:o}}=n;return 0===o.length&&0===i.length?Ul(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return k(t).pipe(V(t=>function(t,e,n,r,s){const i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return i&&0!==i.length?Ul(i.map(i=>{const o=xh(i,e,s);let a;if(function(t){return t&&lh(t.canDeactivate)}(o))a=iu(o.canDeactivate(t,e,n,r));else{if(!lh(o))throw new Error("Invalid CanDeactivate guard");a=iu(o(t,e,n,r))}return a.pipe(vc())})).pipe(hh()):Ul(!0)}(t.component,t.route,n,e,r)),vc(t=>!0!==t,!0))}(o,r,s,t).pipe(V(n=>n&&"boolean"==typeof n?function(t,e,n,r){return k(e).pipe(gc(e=>Yl(function(t,e){return null!==t&&e&&e(new Gc(t)),Ul(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Xc(t)),Ul(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Kl(()=>Ul(e.guards.map(s=>{const i=xh(s,e.node,n);let o;if(function(t){return t&&lh(t.canActivateChild)}(i))o=iu(i.canActivateChild(r,t));else{if(!lh(i))throw new Error("Invalid CanActivateChild guard");o=iu(i(r,t))}return o.pipe(vc())})).pipe(hh())));return Ul(s).pipe(hh())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?Ul(r.map(r=>Kl(()=>{const s=xh(r,e,n);let i;if(function(t){return t&&lh(t.canActivate)}(s))i=iu(s.canActivate(e,t));else{if(!lh(s))throw new Error("Invalid CanActivate guard");i=iu(s(e,t))}return i.pipe(vc())}))).pipe(hh()):Ul(!0)}(t,e.route,n))),vc(t=>!0!==t,!0))}(r,i,t,e):Ul(n)),b(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Tc(t=>{if(ch(t.guardsResult)){const e=Qc(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Uc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),lc(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new xc(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Xh(t=>{if(t.guards.canActivateChecks.length)return Ul(t).pipe(Tc(t=>{const e=new Vc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Ql(t=>{let n=!1;return Ul(t).pipe((r=this.paramsInheritanceStrategy,s=this.ngModule.injector,V(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Ul(t);let i=0;return k(n).pipe(gc(t=>function(t,e,n,r){return function(t,e,n,r){const s=Object.keys(t);if(0===s.length)return Ul({});const i={};return k(s).pipe(V(s=>function(t,e,n,r){const s=xh(t,e,r);return iu(s.resolve?s.resolve(e,n):s(e,n))}(t[s],e,n,r).pipe(Tc(t=>{i[s]=t}))),pc(1),V(()=>Object.keys(i).length===s.length?Ul(i):ql))}(t._resolve,t,e,r).pipe(b(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Fu(t,n).resolve),null)))}(t.route,e,r,s)),Tc(()=>i++),pc(1),V(e=>i===n.length?Ul(t):ql))})),Tc({next:()=>n=!0,complete:()=>{if(!n){const n=new xc(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,s}),Tc(t=>{const e=new Hc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Xh(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:s,extras:{skipLocationChange:i,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:s,skipLocationChange:!!i,replaceUrl:!!o})}),b(t=>{const e=function(t,e,n){const r=Wu(t,e._root,n?n._root:void 0);return new xu(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Tc(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(i=this.rootContexts,o=this.routeReuseStrategy,a=t=>this.triggerEvent(t),b(t=>(new ih(o,t.targetRouterState,t.currentRouterState,a).activate(i),t))),Tc({next(){n=!0},complete(){n=!0}}),(s=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new xc(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new Oc(s))),hc(n=>{if(r=!0,(s=n)&&s.ngNavigationCancelingError){const r=ch(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const s=new xc(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(s),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new kc(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(i){t.reject(i)}}var s;return ql}));var s,i,o,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,s={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(s.state=t)}this.scheduleNavigation(r,t,n,s)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){fh(t),this.config=t.map(mh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:s,queryParamsHandling:i,preserveFragment:o}=e,a=n||this.routerState.root,l=o?this.currentUrlTree.fragment:s;let c=null;switch(i){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,s){if(0===n.length)return qu(e.root,e.root,e,r,s);const i=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Ku(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,s)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return su(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===s?(r.split("/").forEach((r,s)=>{0==s&&"."===r||(0==s&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Ku(n,e,r)}(n);if(i.toRoot())return qu(e.root,new hu([],{}),e,r,s);const o=function(t,e,n){if(t.isAbsolute)return new Qu(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Qu(t,t===e.root,0)}const r=Zu(t.commands[0])?0:1;return function(t,e,n){let r=t,s=e,i=n;for(;i>s;){if(i-=s,r=r.parent,!r)throw new Error("Invalid number of '../'");s=r.segments.length}return new Qu(r,!1,s-i)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(i,e,t),a=o.processChildren?th(o.segmentGroup,o.index,i.commands):Ju(o.segmentGroup,o.index,i.commands);return qu(o.segmentGroup,a,e,r,s)}(a,this.currentUrlTree,t,c,l)}navigateByUrl(t,e={skipLocationChange:!1}){const n=ch(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(ch(t))return ou(this.currentUrlTree,t,e);const n=this.parseUrl(t);return ou(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Bc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,s){if(this.disposed)return Promise.resolve(!1);const i=this.getTransition(),o="imperative"!==e&&"imperative"===(null==i?void 0:i.source),a=(this.lastSuccessfulId===i.id||this.currentNavigation?i.rawUrl:i.urlAfterRedirects).toString()===t.toString();if(o&&a)return Promise.resolve(!0);let l,c,u;s?(l=s.resolve,c=s.reject,u=s.promise):u=new Promise((t,e)=>{l=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const s=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(s)||e?this.location.replaceState(s,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(s,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(Wn(On),Wn(gu),Wn(Kh),Wn(el),Wn(zs),Wn(Oa),Wn(ia),Wn(void 0))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),rd=(()=>{class t{constructor(t,e,n,r,s){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new To,this.deactivateEvents=new To,this.name=r||qc,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,s=new sd(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,s),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)($s(Kh),$s(uo),$s(Ii),("name",function(t,e){const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const s=n[r];if(Je(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(s===e)return n[r+1];r+=2}}}return null}(Ie(),"name")),$s(Qi))},t.\u0275dir=Wt({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class sd{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Lu?this.route:t===Kh?this.childContexts:this.parent.get(t,e)}}class id{}class od{preload(t,e){return Ul(null)}}let ad=(()=>{class t{constructor(t,e,n,r,s){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=new qh(e,n,e=>t.triggerEvent(new jc(e)),e=>t.triggerEvent(new zc(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(lc(t=>t instanceof Bc),gc(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(ao);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return k(n).pipe(z(),b(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Ul(e._loadedConfig):this.loader.load(t.injector,e)).pipe(V(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(Wn(nd),Wn(Oa),Wn(ia),Wn(zs),Wn(id))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),ld=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Mc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Bc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Yc&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Yc(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Wn(nd),Wn(ll),Wn(void 0))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const cd=new Rn("ROUTER_CONFIGURATION"),ud=new Rn("ROUTER_FORROOT_GUARD"),hd=[el,{provide:gu,useClass:pu},{provide:nd,useFactory:function(t,e,n,r,s,i,o,a={},l,c){const u=new nd(null,t,e,n,r,s,i,nu(o));if(l&&(u.urlHandlingStrategy=l),c&&(u.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,u),a.enableTracing){const t=Ua();u.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return u},deps:[gu,Kh,el,zs,Oa,ia,Yh,cd,[class{},new qn],[class{},new qn]]},Kh,{provide:Lu,useFactory:function(t){return t.routerState.root},deps:[nd]},{provide:Oa,useClass:Ma},ad,od,class{preload(t,e){return e().pipe(hc(()=>Ul(null)))}},{provide:cd,useValue:{enableTracing:!1}}];function dd(){return new Sa("Router",nd)}let fd=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[hd,wd(e),{provide:ud,useFactory:md,deps:[[nd,new qn,new $n]]},{provide:cd,useValue:n||{}},{provide:$a,useFactory:pd,deps:[Ha,[new Yn(Qa),new qn],cd]},{provide:ld,useFactory:gd,deps:[nd,ll,cd]},{provide:id,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:od},{provide:Sa,multi:!0,useFactory:dd},[_d,{provide:Ho,multi:!0,useFactory:yd,deps:[_d]},{provide:Cd,useFactory:Ed,deps:[_d]},{provide:Yo,multi:!0,useExisting:Cd}]]}}static forChild(e){return{ngModule:t,providers:[wd(e)]}}}return t.\u0275fac=function(e){return new(e||t)(Wn(ud,8),Wn(nd,8))},t.\u0275mod=zt({type:t}),t.\u0275inj=lt({}),t})();function gd(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new ld(t,e,n)}function pd(t,e,n={}){return n.useHash?new tl(t,e):new Ja(t,e)}function md(t){return"guarded"}function wd(t){return[{provide:Nn,multi:!0,useValue:t},{provide:Yh,multi:!0,useValue:t}]}let _d=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new S}appInitializer(){return this.injector.get(za,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(nd),r=this.injector.get(cd);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Ul(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(cd),n=this.injector.get(ad),r=this.injector.get(ld),s=this.injector.get(nd),i=this.injector.get(Ra);t===i.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||s.initialNavigation(),n.setUpPreloading(),r.init(),s.resetRootComponentType(i.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(Wn(zs))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();function yd(t){return t.appInitializer.bind(t)}function Ed(t){return t.bootstrapListener.bind(t)}const Cd=new Rn("Router Initializer"),Ad=[];let Sd=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=lt({imports:[[fd.forRoot(Ad)],fd]}),t})(),Id=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=lt({}),t})(),vd=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=lt({imports:[[Id]]}),t})(),bd=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=lt({imports:[vd]}),t})();function Td(t,e,n,r){return new(n||(n=Promise))(function(s,i){function o(t){try{l(r.next(t))}catch(e){i(e)}}function a(t){try{l(r.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,a)}l((r=r.apply(t,e||[])).next())})}var Rd=n("/QXO"),Nd=n("KBVK");const Od=["preview"];class Dd extends Rd.BrowserMultiFormatReader{getScannerControls(){if(!this.scannerControls)throw new Error("No scanning is running at the time.");return this.scannerControls}scanFromDeviceObservable(t,e){var n;return Td(this,void 0,void 0,function*(){const r=new Vl({});let s;try{s=yield this.decodeFromVideoDevice(t,e,(t,e)=>{if(!e)return void r.next({result:t});const n=e.name;n===Nd.NotFoundException.name||n===Nd.ChecksumException.name||n===Nd.FormatException.name||e.message.includes("No MultiFormat Readers were able to detect the code.")?r.next({error:e}):(r.error(e),this.scannerControls.stop(),this.scannerControls=void 0)}),this.scannerControls=Object.assign(Object.assign({},s),{stop(){s.stop(),r.complete()}})}catch(i){r.error(i),null===(n=this.scannerControls)||void 0===n||n.stop(),this.scannerControls=void 0}return r.asObservable()})}}let Pd=(()=>{class t{constructor(){this.timeBetweenScans=500,this.delayBetweenScanSuccess=500,this.previewFitMode="cover",this._ready=!1,this.autostarted=new To,this.autostarting=new To,this.torchCompatible=new To(!1),this.scanSuccess=new To,this.scanFailure=new To,this.scanError=new To,this.scanComplete=new To,this.camerasFound=new To,this.camerasNotFound=new To,this.permissionResponse=new To(!0),this.hasDevices=new To,this.deviceChange=new To,this._enabled=!0,this._hints=new Map,this.autofocusEnabled=!0,this.autostart=!0,this.formats=[Nd.BarcodeFormat.QR_CODE],this.hasNavigator="undefined"!=typeof navigator,this.isMediaDevicesSupported=this.hasNavigator&&!!navigator.mediaDevices}get codeReader(){return this._codeReader}set device(t){this._ready?this.isAutostarting?console.warn("Avoid setting a device during auto-start."):this.isCurrentDevice(t)?console.warn("Setting the same device is not allowed."):this.hasPermission?this.setDevice(t):console.warn("Permissions not set yet, waiting for them to be set to apply device change."):this._devicePreStart=t}get device(){return this._device}get formats(){return this.hints.get(Nd.DecodeHintType.POSSIBLE_FORMATS)}set formats(t){if("string"==typeof t)throw new Error("Invalid formats, make sure the [formats] input is a binding.");const e=t.map(t=>this.getBarcodeFormatOrFail(t)),n=this.hints;n.set(Nd.DecodeHintType.POSSIBLE_FORMATS,e),this.hints=n}get hints(){return this._hints}set hints(t){var e;this._hints=t,null===(e=this.codeReader)||void 0===e||e.setHints(this._hints)}set videoConstraints(t){var e;const n=null===(e=this.codeReader)||void 0===e?void 0:e.getScannerControls();n&&(null==n||n.streamVideoConstraintsApply(t))}set isAutostarting(t){this._isAutostarting=t,this.autostarting.next(t)}get isAutostarting(){return this._isAutostarting}set torch(t){try{this.getCodeReader().getScannerControls().switchTorch(t)}catch(e){}}set enable(t){this._enabled=Boolean(t),this._enabled?this.device?this.scanFromDevice(this.device.deviceId):this.init():this.reset()}get enabled(){return this._enabled}get tryHarder(){return this.hints.get(Nd.DecodeHintType.TRY_HARDER)}set tryHarder(t){const e=this.hints;t?e.set(Nd.DecodeHintType.TRY_HARDER,!0):e.delete(Nd.DecodeHintType.TRY_HARDER),this.hints=e}askForPermission(){return Td(this,void 0,void 0,function*(){if(!this.hasNavigator)return console.error("@zxing/ngx-scanner","Can't ask permission, navigator is not present."),this.setPermission(null),this.hasPermission;if(!this.isMediaDevicesSupported)return console.error("@zxing/ngx-scanner","Can't get user media, this is not supported."),this.setPermission(null),this.hasPermission;let t,e;try{t=yield this.getAnyVideoDevice(),e=!!t}catch(n){return this.handlePermissionException(n)}finally{this.terminateStream(t)}return this.setPermission(e),e})}getAnyVideoDevice(){return navigator.mediaDevices.getUserMedia({video:!0})}terminateStream(t){t&&t.getTracks().forEach(t=>t.stop()),t=void 0}init(){return Td(this,void 0,void 0,function*(){if(!this.autostart)return console.warn("Feature 'autostart' disabled. Permissions and devices recovery has to be run manually."),this.initAutostartOff(),void(this._ready=!0);yield this.initAutostartOn(),this._ready=!0})}initAutostartOff(){this.isAutostarting=!1,this.updateVideoInputDevices(),this._device&&this._devicePreStart&&this.setDevice(this._devicePreStart)}initAutostartOn(){return Td(this,void 0,void 0,function*(){let t;this.isAutostarting=!0;try{t=yield this.askForPermission()}catch(e){return void console.error("Exception occurred while asking for permission:",e)}if(t){const t=yield this.updateVideoInputDevices();yield this.autostartScanner([...t])}this.isAutostarting=!1,this.autostarted.next()})}isCurrentDevice(t){var e;return(null==t?void 0:t.deviceId)===(null===(e=this._device)||void 0===e?void 0:e.deviceId)}ngOnDestroy(){this.reset()}ngOnInit(){this.init()}scanStop(){var t,e;this._scanSubscription&&(null===(t=this.codeReader)||void 0===t||t.getScannerControls().stop(),null===(e=this._scanSubscription)||void 0===e||e.unsubscribe(),this._scanSubscription=void 0),this.torchCompatible.next(!1)}scanStart(){if(this._scanSubscription)throw new Error("There is already a scan proccess running.");if(!this._device)throw new Error("No device defined, cannot start scan, please define a device.");this.scanFromDevice(this._device.deviceId)}restart(){this._codeReader=void 0;const t=this._reset();t&&(this.device=t)}updateVideoInputDevices(){return Td(this,void 0,void 0,function*(){const t=(yield Rd.BrowserCodeReader.listVideoInputDevices())||[],e=t&&t.length>0;return this.hasDevices.next(e),this.camerasFound.next([...t]),e||this.camerasNotFound.next(),t})}autostartScanner(t){return Td(this,void 0,void 0,function*(){const e=t.find(({label:t})=>/back|tr\xe1s|rear|traseira|environment|ambiente/gi.test(t))||t.pop();if(!e)throw new Error("Impossible to autostart, no input devices available.");yield this.setDevice(e),this.deviceChange.next(e)})}dispatchScanSuccess(t){this.scanSuccess.next(t.getText())}dispatchScanFailure(t){this.scanFailure.next(t)}dispatchScanError(t){this.scanError.observers.some(t=>Boolean(t))||(console.error(`zxing scanner component: ${t.name}`,t),console.warn("Use the `(scanError)` property to handle errors like this!")),this.scanError.next(t)}dispatchScanComplete(t){this.scanComplete.next(t)}handlePermissionException(t){let e;switch(console.error("@zxing/ngx-scanner","Error when asking for permission.",t),t.name){case"NotSupportedError":console.warn("@zxing/ngx-scanner",t.message),e=null,this.hasDevices.next(null);break;case"NotAllowedError":console.warn("@zxing/ngx-scanner",t.message),e=!1,this.hasDevices.next(!0);break;case"NotFoundError":console.warn("@zxing/ngx-scanner",t.message),e=null,this.hasDevices.next(!1),this.camerasNotFound.next(t);break;case"NotReadableError":console.warn("@zxing/ngx-scanner","Couldn't read the device(s)'s stream, it's probably in use by another app."),e=null,this.hasDevices.next(!1),this.camerasNotFound.next(t);break;default:console.warn("@zxing/ngx-scanner","I was not able to define if I have permissions for camera or not.",t),e=null}return this.setPermission(e),this.permissionResponse.error(t),e}getBarcodeFormatOrFail(t){return"string"==typeof t?Nd.BarcodeFormat[t.trim().toUpperCase()]:t}getCodeReader(){return this._codeReader||(this._codeReader=new Dd(this.hints,{delayBetweenScanAttempts:this.timeBetweenScans,delayBetweenScanSuccess:this.delayBetweenScanSuccess})),this._codeReader}scanFromDevice(t){return Td(this,void 0,void 0,function*(){const e=this.previewElemRef.nativeElement,n=this.getCodeReader(),r=yield n.scanFromDeviceObservable(t,e);if(!r)throw new Error("Undefined decoding stream, aborting.");if(this._scanSubscription=r.subscribe(t=>this._onDecodeResult(t.result,t.error),t=>this._onDecodeError(t),()=>{}),this._scanSubscription.closed)return;const s=n.getScannerControls();this.torchCompatible.next(void 0!==s.switchTorch)})}_onDecodeError(t){this.dispatchScanError(t)}_onDecodeResult(t,e){t?this.dispatchScanSuccess(t):this.dispatchScanFailure(e),this.dispatchScanComplete(t)}_reset(){if(!this._codeReader)return;const t=this._device;return this.device=void 0,this._codeReader=void 0,t}reset(){this._reset(),this.deviceChange.emit(null)}setDevice(t){return Td(this,void 0,void 0,function*(){this.scanStop(),this._device=t||void 0,this._device||Rd.BrowserCodeReader.cleanVideoSource(this.previewElemRef.nativeElement),this._enabled&&t&&(yield this.scanFromDevice(t.deviceId))})}setPermission(t){this.hasPermission=t,this.permissionResponse.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ut({type:t,selectors:[["zxing-scanner"]],viewQuery:function(t,e){if(1&t&&function(t,e,n){const r=Se();r.firstCreatePass&&(function(t,e,n){null===t.queries&&(t.queries=new Mo),t.queries.track(new Bo(e,-1))}(r,new Po(t,e,n)),2==(2&e)&&(r.staticViewQueries=!0)),function(t,e,n){const r=new No(4==(4&n));rs(t,e,r,r.destroy),null===e[19]&&(e[19]=new Do),e[19].queries.push(new Oo(r))}(r,Ae(),e)}(Od,3),2&t){let t;Uo((n=Ae(),r=Pe(),t=n[19].queries[r].queryList))&&(e.previewElemRef=t.first)}var n,r},inputs:{timeBetweenScans:"timeBetweenScans",delayBetweenScanSuccess:"delayBetweenScanSuccess",previewFitMode:"previewFitMode",autofocusEnabled:"autofocusEnabled",autostart:"autostart",formats:"formats",device:"device",videoConstraints:"videoConstraints",torch:"torch",enable:"enable",tryHarder:"tryHarder"},outputs:{autostarted:"autostarted",autostarting:"autostarting",torchCompatible:"torchCompatible",scanSuccess:"scanSuccess",scanFailure:"scanFailure",scanError:"scanError",scanComplete:"scanComplete",camerasFound:"camerasFound",camerasNotFound:"camerasNotFound",permissionResponse:"permissionResponse",hasDevices:"hasDevices",deviceChange:"deviceChange"},decls:6,vars:2,consts:[["preview",""]],template:function(t,e){1&t&&(Js(0,"video",null,0),Js(2,"p"),fi(3," Your browser does not support this feature, please try to upgrade it. "),ti(),Js(4,"p"),fi(5," Seu navegador n\xe3o suporta este recurso, por favor tente atualiz\xe1-lo. "),ti(),ti()),2&t&&li("object-fit",e.previewFitMode)},styles:["[_nghost-%COMP%]{display:block}video[_ngcontent-%COMP%]{-o-object-fit:contain;height:auto;object-fit:contain;width:100%}"],changeDetection:0}),t})(),Md=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=lt({imports:[[al,bd]]}),t})(),Bd=(()=>{class t{constructor(){this.read=!1}leer(){this.read=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ut({type:t,selectors:[["app-root"]],decls:3,vars:1,consts:[[3,"enable"],[3,"click"]],template:function(t,e){1&t&&(ei(0,"zxing-scanner",0),Js(1,"button",1),ri("click",function(){return e.leer()}),fi(2,"LEER"),ti()),2&t&&Ks("enable",e.read)},directives:[Pd],styles:["zxing-scanner[_ngcontent-%COMP%]{max-width:50%}"]}),t})();class xd{}const kd="*";function Ld(t,e=null){return{type:2,steps:t,options:e}}function Fd(t){return{type:6,styles:t,offset:null}}function Ud(t){Promise.resolve(null).then(t)}class Vd{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Ud(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Hd{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const s=this.players.length;0==s?Ud(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==s&&this._onFinish()}),t.onDestroy(()=>{++n==s&&this._onDestroy()}),t.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function jd(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function zd(t){switch(t.length){case 0:return new Vd;case 1:return t[0];default:return new Hd(t)}}function Gd(t,e,n,r,s={},i={}){const o=[],a=[];let l=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==l,u=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,o),a){case"!":a=s[n];break;case kd:a=i[n];break;default:a=e.normalizeStyleValue(n,r,a,o)}u[r]=a}),r||a.push(u),c=u,l=n}),o.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${o.join(t)}`)}return a}function Wd(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&Xd(n,"start",t)));break;case"done":t.onDone(()=>r(n&&Xd(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&Xd(n,"destroy",t)))}}function Xd(t,e,n){const r=n.totalTime,s=Zd(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),i=t._data;return null!=i&&(s._data=i),s}function Zd(t,e,n,r,s="",i=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:s,totalTime:i,disabled:!!o}}function Yd(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function qd(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let $d=(t,e)=>!1,Kd=(t,e)=>!1,Qd=(t,e,n)=>[];const Jd=jd();(Jd||"undefined"!=typeof Element)&&($d=(t,e)=>t.contains(e),Kd=(()=>{if(Jd||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):Kd}})(),Qd=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let tf=null,ef=!1;function nf(t){tf||(tf=("undefined"!=typeof document?document.body:null)||{},ef=!!tf.style&&"WebkitAppearance"in tf.style);let e=!0;return tf.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in tf.style,!e&&ef)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in tf.style),e}const rf=Kd,sf=$d,of=Qd;function af(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let lf=(()=>{class t{validateStyleProperty(t){return nf(t)}matchesElement(t,e){return rf(t,e)}containsElement(t,e){return sf(t,e)}query(t,e,n){return of(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,s,i=[],o){return new Vd(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})(),cf=(()=>{class t{}return t.NOOP=new lf,t})();const uf="ng-enter",hf="ng-leave",df="ng-trigger",ff=".ng-trigger",gf="ng-animating",pf=".ng-animating";function mf(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:wf(parseFloat(e[1]),e[2])}function wf(t,e){switch(e){case"s":return 1e3*t;default:return t}}function _f(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,s=0,i="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=wf(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(s=wf(parseFloat(o),n[4]));const a=n[5];a&&(i=a)}else r=t;if(!n){let n=!1,i=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),s<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(i,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:s,easing:i}}(t,e,n)}function yf(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function Ef(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else yf(t,n);return n}function Cf(t,e,n){return n?e+":"+n+";":""}function Af(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=Cf(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=Cf(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function Sf(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const s=Df(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[s]),t.style[s]=e[r]}),jd()&&Af(t))}function If(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=Df(e);t.style[n]=""}),jd()&&Af(t))}function vf(t){return Array.isArray(t)?1==t.length?t[0]:Ld(t):t}const bf=new RegExp("{{\\s*(.+?)\\s*}}","g");function Tf(t){let e=[];if("string"==typeof t){let n;for(;n=bf.exec(t);)e.push(n[1]);bf.lastIndex=0}return e}function Rf(t,e,n){const r=t.toString(),s=r.replace(bf,(t,r)=>{let s=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),s=""),s.toString()});return s==r?t:s}function Nf(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const Of=/-+([a-z0-9])/g;function Df(t){return t.replace(Of,(...t)=>t[1].toUpperCase())}function Pf(t,e){return 0===t||0===e}function Mf(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let i=e[0],o=[];if(r.forEach(t=>{i.hasOwnProperty(t)||o.push(t),i[t]=n[t]}),o.length)for(var s=1;s<e.length;s++){let n=e[s];o.forEach(function(e){n[e]=xf(t,e)})}}return e}function Bf(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function xf(t,e){return window.getComputedStyle(t)[e]}const kf="*";function Lf(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const s=r[1],i=r[2],o=r[3];e.push(Vf(s,o)),"<"!=i[0]||s==kf&&o==kf||e.push(Vf(o,s))}(t,n,e)):n.push(t),n}const Ff=new Set(["true","1"]),Uf=new Set(["false","0"]);function Vf(t,e){const n=Ff.has(t)||Uf.has(t),r=Ff.has(e)||Uf.has(e);return(s,i)=>{let o=t==kf||t==s,a=e==kf||e==i;return!o&&n&&"boolean"==typeof s&&(o=s?Ff.has(t):Uf.has(t)),!a&&r&&"boolean"==typeof i&&(a=i?Ff.has(e):Uf.has(e)),o&&a}}const Hf=new RegExp("s*:selfs*,?","g");function jf(t,e,n){return new zf(t).build(e,n)}class zf{constructor(t){this._driver=t}build(t,e){const n=new Gf(e);return this._resetContextStyleTimingState(n),Bf(this,vf(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const s=[],i=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,s.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const s=this.visitTransition(t,e);n+=s.queryCount,r+=s.depCount,i.push(s)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:s,transitions:i,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const s=new Set,i=r||{};if(n.styles.forEach(t=>{if(Wf(t)){const e=t;Object.keys(e).forEach(t=>{Tf(e[t]).forEach(t=>{i.hasOwnProperty(t)||s.add(t)})})}}),s.size){const n=Nf(s.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Bf(this,vf(t.animation),e);return{type:1,matchers:Lf(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:Xf(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>Bf(this,t,e)),options:Xf(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const s=t.steps.map(t=>{e.currentTime=n;const s=Bf(this,t,e);return r=Math.max(r,e.currentTime),s});return e.currentTime=r,{type:3,steps:s,options:Xf(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return Zf(_f(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=Zf(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||_f(r,e),Zf(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let s=t.styles?t.styles:Fd({});if(5==s.type)r=this.visitKeyframes(s,e);else{let s=t.styles,i=!1;if(!s){i=!0;const t={};n.easing&&(t.easing=n.easing),s=Fd(t)}e.currentTime+=n.duration+n.delay;const o=this.visitStyle(s,e);o.isEmptyStep=i,r=o}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==kd?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,s=null;return n.forEach(t=>{if(Wf(t)){const e=t,n=e.easing;if(n&&(s=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:s,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;n&&s>0&&(s-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const i=e.collectedStyles[e.currentQuerySelector],o=i[n];let a=!0;o&&(s!=r&&s>=o.startTime&&r<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${r}ms"`),a=!1),s=o.startTime),a&&(i[n]={startTime:s,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},s=Tf(t);s.length&&s.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const s=[];let i=!1,o=!1,a=0;const l=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let l=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(Wf(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(Wf(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=l&&(r++,c=n.offset=l),o=o||c<0||c>1,i=i||c<a,a=c,s.push(c),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),i&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let u=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(u=1/(c-1));const h=c-1,d=e.currentTime,f=e.currentAnimateTimings,g=f.duration;return l.forEach((t,r)=>{const i=u>0?r==h?1:u*r:s[r],o=i*g;e.currentTime=d+f.delay+o,f.duration=o,this._validateStyleAst(t,e),t.offset=i,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:Bf(this,vf(t.animation),e),options:Xf(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Xf(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Xf(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,i]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(Hf,"")),[t=t.replace(/@\*/g,ff).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,pf),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+s:s,Yd(e.collectedStyles,e.currentQuerySelector,{});const o=Bf(this,vf(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:i,animation:o,originalSelector:t.selector,options:Xf(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:_f(t.timings,e.errors,!0);return{type:12,animation:Bf(this,vf(t.animation),e),timings:n,options:null}}}class Gf{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Wf(t){return!Array.isArray(t)&&"object"==typeof t}function Xf(t){var e;return t?(t=yf(t)).params&&(t.params=(e=t.params)?yf(e):null):t={},t}function Zf(t,e,n){return{duration:t,delay:e,easing:n}}function Yf(t,e,n,r,s,i,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:s,delay:i,totalTime:s+i,easing:o,subTimeline:a}}class qf{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const $f=new RegExp(":enter","g"),Kf=new RegExp(":leave","g");function Qf(t,e,n,r,s,i={},o={},a,l,c=[]){return(new Jf).buildKeyframes(t,e,n,r,s,i,o,a,l,c)}class Jf{buildKeyframes(t,e,n,r,s,i,o,a,l,c=[]){l=l||new qf;const u=new eg(t,e,l,r,s,c,[]);u.options=a,u.currentTimeline.setStyles([i],null,u.errors,a),Bf(this,n,u);const h=u.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(o).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,u.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[Yf(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,i=this._visitSubInstructions(n,r,r.options);s!=i&&e.transformIntoNewTimeline(i)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const s=null!=n.duration?mf(n.duration):null,i=null!=n.delay?mf(n.delay):null;return 0!==s&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,s,i);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),Bf(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=tg);const t=mf(s.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>Bf(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?mf(t.options.delay):0;t.steps.forEach(i=>{const o=e.createSubContext(t.options);s&&o.delayNextStep(s),Bf(this,i,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return _f(e.params?Rf(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(n.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(s):n.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,s=n.duration,i=e.createSubContext().currentTimeline;i.easing=n.easing,t.styles.forEach(t=>{i.forwardTime((t.offset||0)*s),i.setStyles(t.styles,t.easing,e.errors,e.options),i.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(i),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?mf(r.delay):0;s&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=tg);let i=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=o.length;let a=null;o.forEach((n,r)=>{e.currentQueryIndex=r;const o=e.createSubContext(t.options,n);s&&o.delayNextStep(s),n===e.element&&(a=o.currentTimeline),Bf(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),i=Math.max(i,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(i),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,s=t.timings,i=Math.abs(s.duration),o=i*(e.currentQueryTotal-1);let a=i*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const l=e.currentTimeline;a&&l.delayNextStep(a);const c=l.currentTime;Bf(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const tg={};class eg{constructor(t,e,n,r,s,i,o,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=i,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=tg,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new ng(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=mf(n.duration)),null!=n.delay&&(r.delay=mf(n.delay));const s=n.params;if(s){let t=r.params;t||(t=this.options.params={}),Object.keys(s).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=Rf(s[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,s=new eg(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=tg,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},s=new rg(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,s,i){let o=[];if(r&&o.push(this.element),t.length>0){t=(t=t.replace($f,"."+this._enterClassName)).replace(Kf,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return s||0!=o.length||i.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class ng{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new ng(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||kd,this._currentKeyframe[t]=kd}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const s=r&&r.params||{},i=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=kd})):Ef(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(i).forEach(t=>{const e=Rf(i[t],s,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:kd),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((s,i)=>{const o=Ef(s,!0);Object.keys(o).forEach(n=>{const r=o[n];"!"==r?t.add(n):r==kd&&e.add(n)}),n||(o.offset=i/this.duration),r.push(o)});const s=t.size?Nf(t.values()):[],i=e.size?Nf(e.values()):[];if(n){const t=r[0],e=yf(t);t.offset=0,e.offset=1,r=[t,e]}return Yf(this.element,r,s,i,this.duration,this.startTime,this.easing,!1)}}class rg extends ng{constructor(t,e,n,r,s,i,o=!1){super(t,e,i.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=o,this.timings={duration:i.duration,delay:i.delay,easing:i.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],i=n+e,o=e/i,a=Ef(t[0],!1);a.offset=0,s.push(a);const l=Ef(t[0],!1);l.offset=sg(o),s.push(l);const c=t.length-1;for(let r=1;r<=c;r++){let o=Ef(t[r],!1);o.offset=sg((e+o.offset*n)/i),s.push(o)}n=i,e=0,r="",t=s}return Yf(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function sg(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class ig{}class og extends ig{normalizePropertyName(t,e){return Df(t)}normalizeStyleValue(t,e,n,r){let s="";const i=n.toString().trim();if(ag[e]&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return i+s}}const ag=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function lg(t,e,n,r,s,i,o,a,l,c,u,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:s,fromState:n,fromStyles:i,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:h,errors:d}}const cg={};class ug{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,s){return t.some(t=>t(e,n,r,s))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],s=this._stateStyles[t],i=r?r.buildStyles(e,n):{};return s?s.buildStyles(e,n):i}build(t,e,n,r,s,i,o,a,l,c){const u=[],h=this.ast.options&&this.ast.options.params||cg,d=this.buildStyles(n,o&&o.params||cg,u),f=a&&a.params||cg,g=this.buildStyles(r,f,u),p=new Set,m=new Map,w=new Map,_="void"===r,y={params:Object.assign(Object.assign({},h),f)},E=c?[]:Qf(t,e,this.ast.animation,s,i,d,g,y,l,u);let C=0;if(E.forEach(t=>{C=Math.max(t.duration+t.delay,C)}),u.length)return lg(e,this._triggerName,n,r,_,d,g,[],[],m,w,C,u);E.forEach(t=>{const n=t.element,r=Yd(m,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const s=Yd(w,n,{});t.postStyleProps.forEach(t=>s[t]=!0),n!==e&&p.add(n)});const A=Nf(p.values());return lg(e,this._triggerName,n,r,_,d,g,E,A,m,w,C)}}class hg{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=yf(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const s=t;Object.keys(s).forEach(t=>{let i=s[t];i.length>1&&(i=Rf(i,r,e)),n[t]=i})}}),n}}class dg{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new hg(t.style,t.options&&t.options.params||{})}),fg(this.states,"true","1"),fg(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new ug(t,e,this.states))}),this.fallbackTransition=new ug(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(s=>s.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function fg(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const gg=new qf;class pg{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=jf(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,s=Gd(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],s=this._animations[t];let i;const o=new Map;if(s?(i=Qf(this._driver,e,s,uf,hf,{},{},n,gg,r),i.forEach(t=>{const e=Yd(o,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),i=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);o.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,kd)})});const a=zd(i.map(t=>{const e=o.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const s=Zd(e,"","","");return Wd(this._getPlayer(t),n,s,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const mg="ng-animate-queued",wg="ng-animate-disabled",_g=".ng-animate-disabled",yg=[],Eg={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Cg={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class Ag{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=yf(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const Sg="void",Ig=new Ag(Sg);class vg{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Pg(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(s=n)&&"done"!=s)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var s;const i=Yd(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};i.push(o);const a=Yd(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Pg(t,df),Pg(t,"ng-trigger-"+e),a[e]=Ig),()=>{this._engine.afterFlush(()=>{const t=i.indexOf(o);t>=0&&i.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const s=this._getTrigger(e),i=new Tg(this.id,e,t);let o=this._engine.statesByElement.get(t);o||(Pg(t,df),Pg(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,o={}));let a=o[e];const l=new Ag(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&l.absorbOptions(a.options),o[e]=l,a||(a=Ig),l.value!==Sg&&a.value===l.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let s=0;s<n.length;s++){const r=n[s];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,l.params)){const e=[],n=s.matchStyles(a.value,a.params,e),r=s.matchStyles(l.value,l.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{If(t,n),Sf(t,r)})}return}const c=Yd(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let u=s.matchTransition(a.value,l.value,t,l.params),h=!1;if(!u){if(!r)return;u=s.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:u,fromState:a,toState:l,player:i,isFallbackTransition:h}),h||(Pg(t,mg),i.onStart(()=>{Mg(t,mg)})),i.onDone(()=>{let e=this.players.indexOf(i);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(i);t>=0&&n.splice(t,1)}}),this.players.push(i),c.push(i),i}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,ff,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const s=this._engine.statesByElement.get(t);if(s){const i=[];if(Object.keys(s).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,Sg,r);n&&i.push(n)}}),i.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&zd(i).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const s=e.name;if(r.has(s))return;r.add(s);const i=this._triggers[s].fallbackTransition,o=n[s]||Ig,a=new Ag(Sg),l=new Tg(this.id,s,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:s,transition:i,fromState:o,toState:a,player:l,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==Eg||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Pg(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,i=this._elementListeners.get(s);i&&i.forEach(e=>{if(e.name==n.triggerName){const r=Zd(s,n.triggerName,n.fromState.value,n.toState.value);r._data=t,Wd(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class bg{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new vg(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let s=n;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,e)){this._namespaceList.splice(s+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const s=n[t[r]].namespaceId;if(s){const t=this._fetchNamespace(s);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(Rg(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!Rg(e))return;const s=e.__ng_removed;if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Pg(t,wg)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Mg(t,wg))}removeNode(t,e,n,r){if(Rg(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,s){return Rg(e)?this._fetchNamespace(t).listen(e,n,r,s):()=>{}}_buildInstruction(t,e,n,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,ff,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,pf,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return zd(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=Eg,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,_g)&&this.markElementAsDisabled(t,!1),this.driver.query(t,_g,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Pg(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?zd(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new qf,r=[],s=new Map,i=[],o=new Map,a=new Map,l=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const u=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=Dg(h,this.collectedEnterElements),f=new Map;let g=0;d.forEach((t,e)=>{const n=uf+g++;f.set(e,n),t.forEach(t=>Pg(t,n))});const p=[],m=new Set,w=new Set;for(let O=0;O<this.collectedLeaveElements.length;O++){const t=this.collectedLeaveElements[O],e=t.__ng_removed;e&&e.setForRemoval&&(p.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):w.add(t))}const _=new Map,y=Dg(h,Array.from(m));y.forEach((t,e)=>{const n=hf+g++;_.set(e,n),t.forEach(t=>Pg(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>Mg(t,n))}),y.forEach((t,e)=>{const n=_.get(e);t.forEach(t=>Mg(t,n))}),p.forEach(t=>{this.processLeaveNode(t)})});const E=[],C=[];for(let O=this._namespaceList.length-1;O>=0;O--)this._namespaceList[O].drainQueuedTransitions(e).forEach(t=>{const e=t.player,s=t.element;if(E.push(e),this.collectedEnterElements.length){const t=s.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!u||!this.driver.containsElement(u,s),h=_.get(s),d=f.get(s),g=this._buildInstruction(t,n,d,h,c);if(g.errors&&g.errors.length)C.push(g);else{if(c)return e.onStart(()=>If(s,g.fromStyles)),e.onDestroy(()=>Sf(s,g.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>If(s,g.fromStyles)),e.onDestroy(()=>Sf(s,g.toStyles)),void r.push(e);g.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(s,g.timelines),i.push({instruction:g,player:e,element:s}),g.queriedElements.forEach(t=>Yd(o,t,[]).push(e)),g.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),g.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=l.get(e);r||l.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(C.length){const t=[];C.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),E.forEach(t=>t.destroy()),this.reportError(t)}const A=new Map,S=new Map;i.forEach(t=>{const e=t.element;n.has(e)&&(S.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,A))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{Yd(A,e,[]).push(t),t.destroy()})});const I=p.filter(t=>kg(t,a,l)),v=new Map;Og(v,this.driver,w,l,kd).forEach(t=>{kg(t,a,l)&&I.push(t)});const b=new Map;d.forEach((t,e)=>{Og(b,this.driver,new Set(t),a,"!")}),I.forEach(t=>{const e=v.get(t),n=b.get(t);v.set(t,Object.assign(Object.assign({},e),n))});const T=[],R=[],N={};i.forEach(t=>{const{element:e,player:i,instruction:o}=t;if(n.has(e)){if(c.has(e))return i.onDestroy(()=>Sf(e,o.toStyles)),i.disabled=!0,i.overrideTotalTime(o.totalTime),void r.push(i);let t=N;if(S.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=S.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>S.set(e,t))}const n=this._buildAnimation(i.namespaceId,o,A,s,b,v);if(i.setRealPlayer(n),t===N)T.push(i);else{const e=this.playersByElement.get(t);e&&e.length&&(i.parentPlayer=zd(e)),r.push(i)}}else If(e,o.fromStyles),i.onDestroy(()=>Sf(e,o.toStyles)),R.push(i),c.has(e)&&r.push(i)}),R.forEach(t=>{const e=s.get(t.element);if(e&&e.length){const n=zd(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let O=0;O<p.length;O++){const t=p[O],e=t.__ng_removed;if(Mg(t,hf),e&&e.hasAnimation)continue;let n=[];if(o.size){let e=o.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,pf,!0);for(let t=0;t<r.length;t++){let e=o.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?Bg(this,t,r):this.processLeaveNode(t)}return p.length=0,T.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),T}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,s){let i=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(i=e)}else{const e=this.playersByElement.get(t);if(e){const t=!s||s==Sg;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&i.push(e)})}}return(n||r)&&(i=i.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),i}_beforeAnimationBuild(t,e,n){const r=e.element,s=e.isRemovalTransition?void 0:t,i=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,a=t!==r,l=Yd(n,t,[]);this._getPreviousPlayers(t,a,s,i,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),l.push(t)})}If(r,e.fromStyles)}_buildAnimation(t,e,n,r,s,i){const o=e.triggerName,a=e.element,l=[],c=new Set,u=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new Vd(e.duration,e.delay);const f=h!==a,g=function(t){const e=[];return xg(t,e),e}((n.get(h)||yg).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),p=s.get(h),m=i.get(h),w=Gd(0,this._normalizer,0,e.keyframes,p,m),_=this._buildPlayer(e,w,g);if(e.subTimeline&&r&&u.add(h),f){const e=new Tg(t,o,h);e.setRealPlayer(_),l.push(e)}return _});l.forEach(t=>{Yd(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>Pg(t,gf));const d=zd(h);return d.onDestroy(()=>{c.forEach(t=>Mg(t,gf)),Sf(a,e.toStyles)}),u.forEach(t=>{Yd(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Vd(t.duration,t.delay)}}class Tg{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Vd,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>Wd(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Yd(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Rg(t){return t&&1===t.nodeType}function Ng(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function Og(t,e,n,r,s){const i=[];n.forEach(t=>i.push(Ng(t)));const o=[];r.forEach((n,r)=>{const i={};n.forEach(t=>{const n=i[t]=e.computeStyle(r,t,s);n&&0!=n.length||(r.__ng_removed=Cg,o.push(r))}),t.set(r,i)});let a=0;return n.forEach(t=>Ng(t,i[a++])),o}function Dg(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),s=new Map;function i(t){if(!t)return 1;let e=s.get(t);if(e)return e;const o=t.parentNode;return e=n.has(o)?o:r.has(o)?1:i(o),s.set(t,e),e}return e.forEach(t=>{const e=i(t);1!==e&&n.get(e).push(t)}),n}function Pg(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function Mg(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function Bg(t,e,n){zd(n).onDone(()=>t.processLeaveNode(e))}function xg(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof Hd?xg(r.players,e):e.push(r)}}function kg(t,e,n){const r=n.get(t);if(!r)return!1;let s=e.get(t);return s?r.forEach(t=>s.add(t)):e.set(t,r),n.delete(t),!0}class Lg{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new bg(t,e,n),this._timelineEngine=new pg(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,s){const i=t+"-"+r;let o=this._triggerCache[i];if(!o){const t=[],e=jf(this._driver,s,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e){return new dg(t,e)}(r,e),this._triggerCache[i]=o}this._transitionEngine.registerTrigger(e,r,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,s]=qd(n);this._timelineEngine.command(t,e,s,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,s){if("@"==n.charAt(0)){const[t,r]=qd(n);return this._timelineEngine.listen(t,e,r,s)}return this._transitionEngine.listen(t,e,n,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Fg(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=Vg(e[0]),e.length>1&&(r=Vg(e[e.length-1]))):e&&(n=Vg(e)),n||r?new Ug(t,n,r):null}let Ug=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let s=t.initialStylesByElement.get(e);s||t.initialStylesByElement.set(e,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Sf(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Sf(this._element,this._initialStyles),this._endStyles&&(Sf(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(If(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(If(this._element,this._endStyles),this._endStyles=null),Sf(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function Vg(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const s=n[r];Hg(s)&&(e=e||{},e[s]=t[s])}return e}function Hg(t){return"display"===t||"position"===t}const jg="animation",zg="animationend";class Gg{constructor(t,e,n,r,s,i,o){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=s,this._fillMode=i,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=$g(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),qg(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Yg(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Wg(this._element,this._name,"paused")}resume(){Wg(this._element,this._name,"running")}setPosition(t){const e=Xg(this._element,this._name);this._position=t*this._duration,qg(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Yg(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=$g(t,"").split(","),r=Zg(n,e);r>=0&&(n.splice(r,1),qg(t,"",n.join(",")))}(this._element,this._name))}}function Wg(t,e,n){qg(t,"PlayState",n,Xg(t,e))}function Xg(t,e){const n=$g(t,"");return n.indexOf(",")>0?Zg(n.split(","),e):Zg([n],e)}function Zg(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function Yg(t,e,n){n?t.removeEventListener(zg,e):t.addEventListener(zg,e)}function qg(t,e,n,r){const s=jg+e;if(null!=r){const e=t.style[s];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[s]=n}function $g(t,e){return t.style[jg+e]||""}class Kg{constructor(t,e,n,r,s,i,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=s,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=i||"linear",this.totalTime=r+s,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Gg(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:xf(this.element,n))})}this.currentSnapshot=t}}class Qg extends Vd{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=af(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class Jg{constructor(){this._count=0,this._head=document.querySelector("head")}validateStyleProperty(t){return nf(t)}matchesElement(t,e){return rf(t,e)}containsElement(t,e){return sf(t,e)}query(t,e,n){return of(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>af(t));let r=`@keyframes ${e} {\n`,s="";n.forEach(t=>{s=" ";const e=parseFloat(t.offset);r+=`${s}${100*e}% {\n`,s+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${s}animation-timing-function: ${n};\n`));default:return void(r+=`${s}${e}: ${n};\n`)}}),r+=`${s}}\n`}),r+="}\n";const i=document.createElement("style");return i.textContent=r,i}animate(t,e,n,r,s,i=[],o){const a=i.filter(t=>t instanceof Kg),l={};Pf(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=Mf(t,e,l));if(0==n)return new Qg(t,c);const u="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,u,e);document.querySelector("head").appendChild(h);const d=Fg(t,e),f=new Kg(t,e,u,n,r,s,c,d);return f.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),f}}class tp{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:xf(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class ep{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(np().toString()),this._cssKeyframesDriver=new Jg}validateStyleProperty(t){return nf(t)}matchesElement(t,e){return rf(t,e)}containsElement(t,e){return sf(t,e)}query(t,e,n){return of(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,s,i=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,s,i);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(a.easing=s);const l={},c=i.filter(t=>t instanceof tp);Pf(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const u=Fg(t,e=Mf(t,e=e.map(t=>Ef(t,!1)),l));return new tp(t,e,a,u)}}function np(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let rp=(()=>{class t extends xd{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:At.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?Ld(t):t;return op(this._renderer,null,e,"register",[n]),new sp(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(Wn(Oi),Wn(Va))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();class sp extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new ip(this._id,t,e||{},this._renderer)}}class ip{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return op(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function op(t,e,n,r,s){return t.setProperty(e,`@@${n}:${r}`,s)}const ap="@",lp="@.disabled";let cp=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new up("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,s=e.id+"-"+this._currentId;this._currentId++,this.engine.register(s,t);const i=e=>{Array.isArray(e)?e.forEach(i):this.engine.registerTrigger(r,s,t,e.name,e)};return e.data.animation.forEach(i),new hp(this,s,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(Wn(Oi),Wn(Lg),Wn(la))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();class up{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==ap&&e==lp?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class hp extends up{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==ap?"."==e.charAt(1)&&e==lp?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==ap){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let s=e.substr(1),i="";return s.charAt(0)!=ap&&([s,i]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,i,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let dp=(()=>{class t extends Lg{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(Wn(Va),Wn(cf),Wn(ig))},t.\u0275prov=at({token:t,factory:t.\u0275fac}),t})();const fp=[{provide:cf,useFactory:function(){return"function"==typeof np()?new ep:new Jg}},{provide:new Rn("AnimationModuleType"),useValue:"BrowserAnimations"},{provide:xd,useClass:rp},{provide:ig,useFactory:function(){return new og}},{provide:Lg,useClass:dp},{provide:Oi,useFactory:function(t,e,n){return new cp(t,e,n)},deps:[bl,Lg,la]}];let gp,pp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=lt({providers:fp,imports:[Fl]}),t})();try{gp="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(vp){gp=!1}let mp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=lt({}),t})(),wp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=lt({}),t})(),_p=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=lt({}),t})(),yp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=lt({imports:[[wp,mp,_p],wp,_p]}),t})(),Ep=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=lt({imports:[[al]]}),t})(),Cp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=lt({imports:[[al]]}),t})(),Ap=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=lt({imports:[[al]]}),t})(),Sp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=lt({imports:[[al,Ep,yp,Cp,Ap],Ep,yp]}),t})(),Ip=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t,bootstrap:[Bd]}),t.\u0275inj=lt({providers:[],imports:[[Fl,Sd,Sp,bd,pp,Md]]}),t})();(function(){if(Ca)throw new Error("Cannot enable prod mode after platform setup.");Ea=!1})(),kl().bootstrapModule(Ip).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);